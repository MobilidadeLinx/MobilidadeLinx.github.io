{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"]},"docs":[{"location":"","title":"Introdu\u00e7\u00e3o","text":"<p>Este documento tem por objetivo descrever como o sistema D-TEF interage com os sistemas de automa\u00e7\u00e3o, de forma a que os respons\u00e1veis pelos mesmos possam fazer as adapta\u00e7\u00f5es necess\u00e1rias para viabilizar a execu\u00e7\u00e3o de transa\u00e7\u00f5es de transfer\u00eancia eletr\u00f4nica de fundos (TEF). O sistema D-TEF \u00e9 um conjunto de utilit\u00e1rios e bibliotecas que capacitam os estabelecimentos comerciais, que possuem equipamentos adequados, a efetuar transa\u00e7\u00f5es de TEF. Usando a modalidade TEF Dedicado, onde se requer liga\u00e7\u00e3o permanente entre o estabelecimento comercial e as institui\u00e7\u00f5es financeiras, o sistema D-TEF viabiliza, entre outros servi\u00e7os, pagamentos de compras atrav\u00e9s de cart\u00f5es de cr\u00e9dito e cart\u00f5es de d\u00e9bito e verifica\u00e7\u00e3o de idoneidade de clientes atrav\u00e9s de consulta a institui\u00e7\u00f5es de prote\u00e7\u00e3o ao cr\u00e9dito (SERASA, Associa\u00e7\u00e3o Comercial, Teledata, CDL). O m\u00f3dulo principal do sistema D-TEF \u00e9 executado como servi\u00e7o do Windows (2003/2008/2012). Opera em conjunto com o sistema de automa\u00e7\u00e3o comercial, interagindo com este atrav\u00e9s de duas formas distintas: Atrav\u00e9s de uma DLL ( DPOSDRV.DLL ), onde o sistema de automa\u00e7\u00e3o comercial realiza a comunica\u00e7\u00e3o com o D-TEF por meio de chamadas diretas de fun\u00e7\u00e3o; Atrav\u00e9s de troca de arquivos, onde as informa\u00e7\u00f5es das transa\u00e7\u00f5es s\u00e3o passadas por meio de arquivos com conte\u00fado e formatos espec\u00edficos para cada opera\u00e7\u00e3o. As duas formas de comunica\u00e7\u00e3o s\u00e3o equivalentes em funcionalidade. A escolha por uma ou por outra forma fica a crit\u00e9rio do desenvolvedor do software de automa\u00e7\u00e3o comercial.</p>"},{"location":"#convencoes-utilizadas-neste-manual","title":"Conven\u00e7\u00f5es Utilizadas neste Manual","text":"<p>A descri\u00e7\u00e3o dos par\u00e2metros de fun\u00e7\u00f5es e campos de registros apresentados neste manual segue a conven\u00e7\u00e3o da tabela a seguir.</p> # Descri\u00e7\u00e3o Observa\u00e7\u00e3o <code>A</code> campo alfanum\u00e9rico completado com espa\u00e7os \u00e0 direita e preenchidocom espa\u00e7os, quando n\u00e3o informado <code>H</code> campo hexadecimal campo bin\u00e1rio <code>N</code> campo num\u00e9rico completado com zeros \u00e0 esquerda e preenchidocom zeros, quando n\u00e3o informado <code>I</code> valor inteiro retorno ou par\u00e2metro de fun\u00e7\u00e3o de valor inteiro (integer ) <code>P</code> ponteiro para caracter ponteiro para um array de caracteres (PChar) como par\u00e2metro de fun\u00e7\u00e3o"},{"location":"pages/transacoes/","title":"Transa\u00e7\u00f5es","text":""},{"location":"pages/transacoes/#transacao-de-debito","title":"Transa\u00e7\u00e3o de D\u00e9bito","text":"<pre><code>int TransacaoCartaoDebito(char * pValorTransacao, char * pNumeroCupom, char * pNumeroControle)\n</code></pre> <p>Solicita\u00e7\u00e3o de transa\u00e7\u00e3o de d\u00e9bito simples.</p> <p>Parametros</p> Method Description <code>pValorTransacao</code> 10 inteiros, 2 decimais <code>pNumeroCupom</code> N\u00famero do cupom (fiscal ou n\u00e3o fiscal) <code>pNumeroControle</code> NSU (n\u00famero seq\u00fcencial \u00fanico) <p>Retorna</p> <ul> <li> <p>[ 00 ] indica que n\u00e3o existiram restri\u00e7\u00f5es para a efetiva\u00e7\u00e3o da transa\u00e7\u00e3o</p> </li> <li> <p>[ 11 ] indica que existiram restri\u00e7\u00f5es para a efetiva\u00e7\u00e3o da transa\u00e7\u00e3o. O sistema de automa\u00e7\u00e3o deve retornar \u00e0 rotina de recebimento de valores, pois a transa\u00e7\u00e3o solicitada n\u00e3o foi autorizada, n\u00e3o sendo v\u00e1lida como forma de pagamento.</p> </li> </ul>"},{"location":"pages/transacoes/#transacao-de-credito","title":"Transa\u00e7\u00e3o de Cr\u00e9dito","text":"<pre><code>int TransacaoCartaoCredito(char* pValorTransacao, char* pNumeroCupom, char* pNumeroControle)  </code></pre> <p>Solicita\u00e7\u00e3o de transa\u00e7\u00e3o de cr\u00e9dito simples.</p> <p>Parametros</p> Method Description <code>pValorTransacao</code> 10 inteiros, 2 decimais <code>pNumeroCupom</code> N\u00famero do cupom (fiscal ou n\u00e3o fiscal) <code>pNumeroControle</code> NSU (n\u00famero seq\u00fcencial \u00fanico) <p>Retorna</p> <ul> <li> <p>[ 00 ] indica que n\u00e3o existiram restri\u00e7\u00f5es para a efetiva\u00e7\u00e3o da transa\u00e7\u00e3o</p> </li> <li> <p>[ 11 ] indica que existiram restri\u00e7\u00f5es para a efetiva\u00e7\u00e3o da transa\u00e7\u00e3o. O sistema de automa\u00e7\u00e3o deve retornar \u00e0 rotina de recebimento de valores, pois a transa\u00e7\u00e3o solicitada n\u00e3o foi autorizada, n\u00e3o sendo v\u00e1lida como forma de pagamento.</p> </li> </ul>"},{"location":"pages/transacoes/#transacao-de-debito-completa","title":"Transa\u00e7\u00e3o de D\u00e9bito Completa","text":"PythonC++C <pre><code>from ctypes import *\nimport ctypes\ndll = cdll.LoadLibrary(\"libDPOSDRV.so\")\npValorTransacao = c_buffer(('000000209998').encode('utf-8'))\npNumeroCupom = c_buffer(7)\npNumeroControle = c_buffer(7)\npTipoOperacao = c_buffer(('PM').encode('utf-8'))\npNumeroParcelas = c_buffer(('10').encode('utf-8'))\npSequenciaParcela = c_buffer(('00').encode('utf-8'))\npDataDebito = c_buffer(('12082023').encode('utf-8'))\npValorParcela = c_buffer(('000000000000').encode('utf-8'))\npValorTaxaServico = c_buffer(('000000000000').encode('utf-8'))\npPermiteAlteracao = c_buffer(('N').encode('utf-8'))\npReservado = c_buffer(('0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000').encode('utf-8'))\ntry:\nprint(\"TransacaoCartaoDebitoCompleta\")\nprint(dll.TransacaoCartaoDebitoCompleta(pValorTransacao, pNumeroCupom, pNumeroControle, pTipoOperacao, pNumeroParcelas, pSequenciaParcela, pDataDebito, pValorParcela, pValorTaxaServico, pPermiteAlteracao, pReservado,))\nexcept:\nlast_error = ctypes.GetLastError()\nraise ctypes.WinError()\n</code></pre> <pre><code>#include &lt;iostream&gt;\nint main(void) {\nstd::cout &lt;&lt; \"Hello world!\" &lt;&lt; std::endl;\nreturn 0;\n}\n</code></pre> <pre><code>#include &lt;stdio.h&gt;\nint main(void) {\nprintf(\"Hello world!\\n\");\nreturn 0;\n}\n</code></pre>"},{"location":"pages/IntegracaoSemTelas/IntegracaoSemTelas/","title":"Integra\u00e7\u00e3o sem Telas","text":"<p>Este documento tem por objetivo descrever os procedimentos necess\u00e1rios para realizar as chamadas do client D-TEF sem a apresenta\u00e7\u00e3o das telas pr\u00e9-definidas do D-POS. Isto \u00e9 importante em situa\u00e7\u00f5es onde se deseja adequar visualmente as telas de coleta da transa\u00e7\u00e3o de TEF com o layout geral da automa\u00e7\u00e3o.</p> <p>N\u00e3o \u00e9 necess\u00e1rio que todas as fun\u00e7\u00f5es de coleta de tela sejam desenvolvidas. Se uma fun\u00e7\u00e3o for utilizada somente por uma transa\u00e7\u00e3o e esta n\u00e3o for implementada, ela pode ser desconsiderada. De forma geral, incluem-se neste caso:</p> <ul> <li>as fun\u00e7\u00f5es para coleta e tratamento de c\u00f3digo de barras de documentos</li> <li>coleta de dados da transa\u00e7\u00e3o de verifica\u00e7\u00e3o de endere\u00e7o (AVS)</li> <li>apresenta\u00e7\u00e3o do preview do comprovante (transa\u00e7\u00e3o de consulta CDC)</li> <li>sele\u00e7\u00e3o de planos de pagamento, para o caso de a automa\u00e7\u00e3o utilizar planos de pagamento</li> </ul>"},{"location":"pages/IntegracaoSemTelas/IntegracaoSemTelas/#observacoes","title":"Observa\u00e7\u00f5es","text":"<p>A funcionalidade descrita neste documento est\u00e1 dispon\u00edvel apenas para o D-POS 8. Portanto, transa\u00e7\u00f5es de redes que trafegarem pelo D-TEF 5 dever\u00e3o continuar utilizando o D-POS 5. Como no modo de apresenta\u00e7\u00e3o externa de telas o D-POS 8 n\u00e3o chama automaticamente o D-POS 5, ser\u00e1 necess\u00e1rio fazer as chamadas ao D-POS 5 explicitamente.</p>"},{"location":"pages/IntegracaoSemTelas/IntegracaoSemTelas/#utilizacao-das-telas-da-automacao","title":"Utiliza\u00e7\u00e3o das telas da automa\u00e7\u00e3o","text":"<p>Para que seja poss\u00edvel utilizar as telas da automa\u00e7\u00e3o em lugar das telas do D-POS ao realizar transa\u00e7\u00f5es com o Client, dever\u00e3o ser executados os seguintes procedimentos:</p> <ul> <li>desenvolver as fun\u00e7\u00f5es de callback que ser\u00e3o executadas pelo client no momento de interagir com o usu\u00e1rio;</li> <li>registrar as fun\u00e7\u00f5es da callback;</li> <li>chamar a fun\u00e7\u00e3o ConfiguraFluxoExternoDTEF5 do D-POS;</li> <li>executar as chamadas do Client conforme definido no documento de integra\u00e7\u00e3o, ou seja, executando as chamadas para as fun\u00e7\u00f5es TransacaoCartaoCredito, TransacaoCartaoDebito, ConfirmaCartao, FinalizaTransacao etc.</li> </ul>"},{"location":"pages/IntegracaoSemTelas/IntegracaoSemTelas/#funcao-configurafluxoexternodtef5","title":"Fun\u00e7\u00e3o ConfiguraFluxoExternoDTEF5","text":"<pre><code>void __stdcall ConfiguraFluxoExternoDTEF5()\n</code></pre> <p>Esta fun\u00e7\u00e3o deve ser chamada pelas automa\u00e7\u00f5es quando as transa\u00e7\u00f5es tratadas pelo D-TEF 5 n\u00e3o dever\u00e3o ser executadas atrav\u00e9s do D-POS 5. Isso acontece em geral quando a automa\u00e7\u00e3o deve apresentar as suas pr\u00f3prias telas para coleta de dados. Quando esta fun\u00e7\u00e3o \u00e9 chamada, o D-POS 8, ao identificar que uma transa\u00e7\u00e3o deve ser tratada pelo fluxo do D-TEF 5, ao inv\u00e9s de chamar a DLL do D-POS 5 ele retorna o c\u00f3digo 1000. Por exemplo, a fun\u00e7\u00e3o TransacaoCartaoCredito pode retornar os valores:</p> <ul> <li>0: transa\u00e7\u00e3o OK</li> <li>11: transa\u00e7\u00e3o com erro</li> <li>1000: transa\u00e7\u00e3o deve ser tratada atrav\u00e9s do fluxo externo do D-TEF 5.</li> </ul>"},{"location":"pages/IntegracaoSemTelas/IntegracaoSemTelas/#funcoes-exportadas-para-registrar-as-funcoes-de-callback","title":"Fun\u00e7\u00f5es exportadas para registrar as fun\u00e7\u00f5es de Callback","text":"<p>Para que o client tenha conhecimento das fun\u00e7\u00f5es da automa\u00e7\u00e3o que ele ir\u00e1 executar, essas fun\u00e7\u00f5es devem ser registradas. Seguem as fun\u00e7\u00f5es disponibilizadas na DLL DPOSDRV.DLL para esse fim (a declara\u00e7\u00e3o est\u00e1 na linguagem C).</p> <pre><code>__stdcall void RegPDVDisplayTerminal(pCallBackDisplayTerminal); __stdcall void RegPDVDisplayErro(pCallBackDisplayErro); __stdcall void RegPDVMensagem(pCallBackMensagem); __stdcall void RegPDVBeep(pCallBackBeep); __stdcall void RegPDVSolicitaConfirmacao(pCallBackSolicitaConfirmacao); __stdcall void RegPDVEntraCartao(pCallBackEntraCartao); __stdcall void RegPDVEntraDataValidade(pCallBackEntraDataValidade); __stdcall void RegPDVEntraData(pCallBackEntraData); __stdcall void RegPDVEntraCodigoSeguranca(pCallBackEntraCodigoSeguranca); __stdcall void RegPDVSelecionaOpcao(pCallBackSelecionaOpcao); __stdcall void RegPDVEntraValor(pCallBackEntraValor); __stdcall void RegPDVEntraNumero(pCallBackEntraNumero); __stdcall void RegPDVOperacaoCancelada(pCallBackOperacaoCancelada); __stdcall void RegPDVSetaOperacaoCancelada(pCallBackSetaOperacaoCancelada);\n__stdcall void RegPDVProcessaMensagens(pCallBackProcessaMensagens); __stdcall void RegPDVEntraString(pCallBackEntraString); __stdcall void RegPDVConsultaAVS(pCallBackConsultaAVS); __stdcall void RegPDVMensagemAdicional(pCallBackMensagemAdicional); __stdcall void RegPDVImagemAdicional(pCallBackImagemAdicional);} __stdcall void RegPDVEntraCodigoBarras(pCallBackEntraCodigoBarras); __stdcall void RegPDVEntraCodigoBarrasLido(pCallBackEntraCodigoBarrasLido);\n__stdcall void RegPDVMensagemAlerta(pCallBackMensagemAlerta); __stdcall void RegPDVPreviewComprovante(pCallBackPreviewComprovante); __stdcall void RegPDVSelecionaPlanos(pCallBackSelecionaPlanos); __stdcall void RegPDVSelecionaPlanosEx(pCallBackSelecionaPlanosEx); __stdcall void RegPDVEntraValorEspecial(pCallBackEntraValorEspecial); __stdcall void RegPDVComandos(pCallBackComandos); </code></pre>"},{"location":"pages/Transacoes/Transacoes/","title":"Transa\u00e7\u00f5es","text":"<p>A seguir ser\u00e3o descritas as transa\u00e7\u00f5es e suas fun\u00e7\u00f5es de chamada via integra\u00e7\u00e3o por biblioteca compartilhada (arquivo.dll ou arquivo.so).</p> <p>Todos os campos num\u00e9ricos informados devem ser completados com zeros \u00e0 esquerda e, quando n\u00e3o informados, preenchidos com zeros. Os campos alfanum\u00e9ricos devem ser completados com espa\u00e7os \u00e0 direita e, quando n\u00e3o informados, preenchidos com espa\u00e7os.</p>"},{"location":"pages/Transacoes/Transacoes/#informacoes-comuns","title":"Informa\u00e7\u00f5es Comuns","text":""},{"location":"pages/Transacoes/Transacoes/#resposta-das-funcoes","title":"Resposta das Fun\u00e7\u00f5es","text":"<p>Na resposta da chamada \u00e0 fun\u00e7\u00e3o ser\u00e1 preenchido o campo NumeroControle e ser\u00e1 devolvido o Status, indicando o resultado da transa\u00e7\u00e3o.</p> <p>O NumeroControle , inclu\u00eddo na resposta, dever\u00e1 ser armazenado pelo sistema de automa\u00e7\u00e3o, pois na fun\u00e7\u00e3o de confirma\u00e7\u00e3o este n\u00famero ser\u00e1, obrigatoriamente, utilizado.</p> <p>Caso a transa\u00e7\u00e3o seja autorizada, ser\u00e1 disponibilizado no diret\u00f3rio parametrizado para os cupons um arquivo contendo o comprovante da opera\u00e7\u00e3o a ser impresso pela automa\u00e7\u00e3o. O nome desse arquivo tem o formato NNNNNN.PPP, onde NNNNNN \u00e9 o NumeroControle e PPP \u00e9 o n\u00famero do terminal configurado.</p> <p>Se a rede autorizadora permitir e se estiver configurada no D-TEF a impress\u00e3o de cupom reduzido, al\u00e9m do arquivo acima ser\u00e1 liberado um arquivo com o comprovante reduzido no formato RNNNNNN.PPP, onde NNNNNN \u00e9 o NumeroControle e PPP \u00e9 o n\u00famero do terminal configurado. Assim, o comprovante reduzido dever\u00e1 ser impresso no espa\u00e7o destinado \u00e0 mensagem promocional do cupom fiscal e o comprovante normal continuar\u00e1 a ser impresso no cupom vinculado.</p> <p>O PDV dever\u00e1 verificar a exist\u00eancia do arquivo com o comprovante reduzido ap\u00f3s a aprova\u00e7\u00e3o da transa\u00e7\u00e3o. Se o arquivo com o comprovante reduzido estiver dispon\u00edvel, o PDV dever\u00e1 imprimir no cupom fiscal e em seguida realizar a confirma\u00e7\u00e3o do mesmo, antes da impress\u00e3o do comprovante normal. Se o comprovante reduzido n\u00e3o estiver dispon\u00edvel, a confirma\u00e7\u00e3o dever\u00e1 ser realizada ap\u00f3s a impress\u00e3o do comprovante normal.</p> <p>Ao final da venda, tanto no caso do comprovante reduzido como no comprovante normal, para encerrar a opera\u00e7\u00e3o deve ser chamada a fun\u00e7\u00e3o FinalizaTransacao (ver \u00edtem 3.1.3.11).</p>"},{"location":"pages/Transacoes/Transacoes/#definicao-da-diretiva_callback","title":"Defini\u00e7\u00e3o da DIRETIVA_CALLBACK","text":"<p>A macro DIRETIVA_CALLBACK \u00e9 uma diretiva de pr\u00e9-processamento usada para definir a conven\u00e7\u00e3o de chamada de fun\u00e7\u00e3o em diferentes ambientes de compila\u00e7\u00e3o. Ela nos permite adaptar nosso c\u00f3digo para funcionar corretamente em diferentes sistemas operacionais e compiladores. A conven\u00e7\u00e3o de chamada de fun\u00e7\u00e3o define como os par\u00e2metros s\u00e3o passados para a fun\u00e7\u00e3o e como os valores de retorno s\u00e3o retornados para o chamador.</p> <pre><code>#elif defined(_MSC_VER)\n#define DIRETIVA_CALLBACK __stdcall\n#else\n#define DIRETIVA_CALLBACK _DIRETIVA_CALLBACK\n#endif\n</code></pre>"},{"location":"pages/Transacoes/Transacoes/#parametros-opcionais","title":"Par\u00e2metros opcionais","text":"<p>Caso o sistema de automa\u00e7\u00e3o n\u00e3o possua estas informa\u00e7\u00f5es, devem ser preenchidos com zeros ou espa\u00e7os, conforme o tipo do campo.</p>"},{"location":"pages/Transacoes/Transacoes/#transacao-de-debito-e-debito-split","title":"Transa\u00e7\u00e3o de D\u00e9bito e D\u00e9bito Split","text":""},{"location":"pages/Transacoes/Transacoes/#solicitacao-cartao-de-debito","title":"Solicita\u00e7\u00e3o Cart\u00e3o de D\u00e9bito","text":"<pre><code>int DIRETIVA_CALLBACK TransacaoCartaoDebito(char *pValorTransacao, char *pNumeroCupom, char *pNumeroControle)\n</code></pre> <ul> <li>[ 00 ] indica que n\u00e3o existiram restri\u00e7\u00f5es para a efetiva\u00e7\u00e3o da transa\u00e7\u00e3o.</li> <li>[ 11 ] indica que existiram restri\u00e7\u00f5es para a efetiva\u00e7\u00e3o da transa\u00e7\u00e3o. O sistema de automa\u00e7\u00e3o deve retornar \u00e0 rotina de recebimento de valores, pois a transa\u00e7\u00e3o solicitada n\u00e3o foi autorizada, n\u00e3o sendo v\u00e1lida como forma de pagamento.</li> </ul>"},{"location":"pages/Transacoes/Transacoes/#solicitacao-cartao-de-debito-completa","title":"Solicita\u00e7\u00e3o Cart\u00e3o de D\u00e9bito Completa","text":"<pre><code>int DIRETIVA_CALLBACK TransacaoCartaoDebitoCompleta(char *pValorTransacao, char *pNumeroCupom, char *pNumeroControle, char *pTipoOperacao, char *pNumeroParcelas, char *pSequenciaParcela, char *pDataDebito, char *pValorParcela, char *pValorTaxaServico, char *pPermiteAlteracao, char *pReservado)\n</code></pre> <p>Quando a automa\u00e7\u00e3o comercial necessitar de detalhes mais precisos da transa\u00e7\u00e3o, de cart\u00e3o de d\u00e9bito, pode ser usada a solicita\u00e7\u00e3o de transa\u00e7\u00e3o com cart\u00e3o de d\u00e9bito completa, atrav\u00e9s da chamada \u00e0 fun\u00e7\u00e3o TransacaoCartaoDebitoCompleta. Os par\u00e2metros opcionais dessa fun\u00e7\u00e3o s\u00e3o os seguintes:</p> <p>TipoOperacao</p> <p>NumeroParcelas</p> <p>SequenciaParcela</p> <p>DataDebito</p> <p>ValorParcela</p> <p>ValorTaxaServico</p> <p>PermiteAlteracao</p> <p>Reservado</p> <p>Nas transa\u00e7\u00f5es de d\u00e9bito parcelado, \u00e9 poss\u00edvel se especificar o valor e a data de cada parcela. Neste caso, a fun\u00e7\u00e3o deve ser chamada tantas vezes quantas for o n\u00famero de parcelas. Em cada uma dessas chamadas, o par\u00e2metro SequenciaParcela dever\u00e1 indicar o n\u00famero da parcela em quest\u00e3o. Numa outra situa\u00e7\u00e3o, se os valores das parcelas n\u00e3o forem especificados, dever\u00e1 ser passado o valor \u201c00\u201d no par\u00e2metro SequenciaParcela , indicando que os valores e as datas das parcelas ser\u00e3o calculados automaticamente pela rede autorizadora.</p>"},{"location":"pages/Transacoes/Transacoes/#solicitacao-cartao-de-debito-completa-split","title":"Solicita\u00e7\u00e3o Cart\u00e3o de D\u00e9bito Completa Split","text":"<p>Para realizar uma transa\u00e7\u00e3o de Split D\u00e9bito utilizar o m\u00e9todo descrito abaixo. Ele tem a mesma parametriza\u00e7\u00e3o e regra de entrada da transa\u00e7\u00e3o de D\u00e9bito Completa, todavia recebe a mais os dados de Split de pagamento.</p> <pre><code>int DIRETIVA_CALLBACK TransacaoCartaoDebitoCompletaSplit(char *pValorTransacao, char *pNumeroCupom, char *pNumeroControle, char *pTipoOperacao, char *pNumeroParcelas, char *pSequenciaParcela, char *pDataDebito, char *pValorParcela,\nchar *pValorTaxaServico, char *pPermiteAlteracao, char *pReservado, char *pQuantidadeItensSplit, char *pItensSplit, char *pQuantidadeRecebedoresSplit, char *pRecebedoresSplit)\n</code></pre> <p>Os campos est\u00e3o abaixo caracterizados.</p> Campo Tamanho Descri\u00e7\u00e3o ValorTransacao 12N 10 inteiros, 2 decimais NumeroCupom 06N N\u00famero do cupom (fiscal ou n\u00e3o fiscal) NumeroControle 06N NSU (n\u00famero seq\u00fcencial \u00fanico) TipoOperacao 02A \u2022 [ AV ] \u00c0 Vista \u2022 [ PS ] Parcelada (sem juros) \u2022 [ PC ] Parcelada (com juros)\u2022 [ PD ] Pr\u00e9-datada\u2022 [ PE ] Parcelado  com entrada\u2022 [ PM ] Parcelado sem entrada NumeroParcelas 02N N\u00famero de parcelas (00 \u2013 99) SequenciaParcela 02N N\u00famero da parcela DataDebito 08N  Data da parcela (transa\u00e7\u00e3o parcelada) ou Datade d\u00e9bito (transa\u00e7\u00e3o pr\u00e9-datada) ValorParcela 12N 10 inteiros, 2 decimais. Se o campo TipoOpera\u00e7\u00e3o for [ PE ] e o campo SequenciaParcela for igual a 1, este valor corresponder\u00e1 ao valor de entrada. ValorTaxaServico 12N 10 inteiros, 2 decimais PermiteAlteracao 01A \u2022 [ S ] Permite alterar valores informados (exceto ValorTransacao)\u2022 [ N ] N\u00e3o Permite alterar valores informados Reservado 148A [ Especifica\u00e7\u00e3o ]\u2022 [ 1..1 ] Uso restrito. Fixo \u201c0\u201d\u2022 [ 2..4 ] Uso restrito. Fixo \u201c000\u201d\u2022 [ 5..5 ] [ 0 ] Sem Garantia [ 1 ] Com Garantia\u2022 [ 6..17 ] Valor da taxa de embarque\u2022 [ 18..29 ] Valor do saque\u2022 [ 30..30 ] [ 3 ] indica pagamento com cart\u00e3o Qualidade [ 4 ]indica pagamento com cart\u00e3o MettaCard\u2022 [ 31..70 ] Descri\u00e7\u00e3o do produto (somente para transa\u00e7\u00f5es Cielo). Para transa\u00e7\u00f5es de Pagamento de fatura informar os valores \"0079,0763,0764,\" e preencher valores n\u00e3o utilizados com 0 ou espa\u00e7os em branco.\u2022 [71] Op\u00e7\u00e3o para pagamento de faturaC\u00f3digos poss\u00edveis para a adquirente Getnetlac e Safra:\u2022 0 -&gt; Indica que n\u00e3o \u00e9 pagamento de fatura\u2022 1 -&gt; Indica que \u00e9 um pagamento de faturaC\u00f3digos poss\u00edveis para a adquirente REDE:\u2022 0 -&gt; Indica que n\u00e3o \u00e9 pagamento de fatura\u2022 1 -&gt; C\u00f3digo de Barras digitado\u2022 2 -&gt; C\u00f3digo de Barras lido \u00f3ticamente\u2022 3 -&gt; CPF (11 caracteres)\u2022 4 -&gt; Cart\u00e3o (n\u00e3o deve passar o n\u00famero do cart\u00e3o, colocar tamanho dos dados zerado)\u2022 5 -&gt; Outros(at\u00e9 40 caracteres)Os bytes de 72 a 120 somente ser\u00e3o processados enecessarios para a adquirente REDE:\u2022 [72..73]Tamanho dos dados da op\u00e7\u00e3o de pagamento de fatura\u2022 [74..120] Dados de pagamento de fatura\u2022 [121..121] Indicativo de parametriza\u00e7\u00e3o para CPF E COD funcionario para br premia (0-N\u00e3o; 1-Sim)\u2022 [122..124] C\u00f3digo Funcionario BRPREMIA\u2022 [125..135] CPF Cliente[Especifica\u00e7\u00e3o do Retorno] C\u00f3digos poss\u00edveis:\u2022 [ 01 ] Uso restrito\u2022 [ 02 ] Uso restrito\u2022 [ 03 ] Uso restrito\u2022 [ 04 ] Uso restrito\u2022 [ 05 ] Reservado\u2022 [ 06 ] Dados Correspondente Banc\u00e1rio\u2022 [ 07 ] Dados Correspondente Banc\u00e1rio QuantidadeItensSplit(opcional, utilizar 0 caso n\u00e3o tenha itens) 03N 3 inteiros, informando a quantidade de itens enviados. ItensSplit Clique aqui para visualizar a tabela Quantidade Recebedores Split 03N 3 inteiros, informando a quantidade de recebedores enviados RecebedoresSplit Clique aqui para visualizar a tabela Status 02I \u2022 [ 00 ] Transa\u00e7\u00e3o autorizada\u2022 [ 11 ] Transa\u00e7\u00e3o n\u00e3o efetuada <p>ItensSplit</p> Campo Tamanho Descri\u00e7\u00e3o Valor 12N 10 inteiros, 2 decimais Descri\u00e7\u00e3o 20A 20 caracteres (com espa\u00e7os a direita) Quantidade 5N Quantidade vendida do item informado, 5 Inteiros C\u00f3digo 13A C\u00f3digo do produto, 13 caracteres. <p>RecebedoresSplit</p> Campo Tamanho Descri\u00e7\u00e3o Valor 12N 10 inteiros, 2 decimais CNPJ 14N 14 inteiros Tipo 01N [0] Valor Bruto [1] Porcentagem <p>* O tipo bruto indica que o dado informado no campo \"Valor\" da mesma estrutura representa o valor   real que o CNPJ receber\u00e1, e o tipo porcentagem indica que o dado informado para aquele CNPJ \u00e9   um valor percentual, portando, o CNPJ receber\u00e1 x% do valor total.</p> <p>Status [ 00 ] indica que n\u00e3o existiram restri\u00e7\u00f5es para a efetiva\u00e7\u00e3o da transa\u00e7\u00e3o.</p> <p>Status [ 11 ] indica que existiram restri\u00e7\u00f5es para a efetiva\u00e7\u00e3o da transa\u00e7\u00e3o. O sistema de automa\u00e7\u00e3o deve retornar \u00e0 rotina de recebimento de valores, pois a transa\u00e7\u00e3o solicitada n\u00e3o foi autorizada, n\u00e3o sendo v\u00e1lida como forma de pagamento.</p>"},{"location":"pages/Transacoes/Transacoes/#confirmacao-cartao-de-debito","title":"Confirma\u00e7\u00e3o Cart\u00e3o de D\u00e9bito","text":"<pre><code>int DIRETIVA_CALLBACK ConfirmaCartaoDebito(char *pNumeroControle)\n</code></pre> <pre><code>int DIRETIVA_CALLBACK TransacaoConfirmacaoPreAutorizacao(char *pNumeroControle)\n</code></pre> <p>A confirma\u00e7\u00e3o de transa\u00e7\u00e3o com cart\u00e3o de d\u00e9bito \u00e9 realizada atrav\u00e9s da chamada \u00e0s fun\u00e7\u00f5es ConfirmaCartaoDebito.</p> <p>Na resposta da chamada \u00e0 fun\u00e7\u00e3o ser\u00e1 devolvido o, indicando o resultado da transa\u00e7\u00e3o.</p> <p>Os campos est\u00e3o abaixo caracterizados.</p> Campo Tamanho Descri\u00e7\u00e3o NumeroControle 06N NSU (n\u00famero seq\u00fcencial \u00fanico) 02I [ 00 ] Confirma\u00e7\u00e3o aceita[ 11 ] Confirma\u00e7\u00e3o N\u00c3O aceita <p>Observa\u00e7\u00e3o: Para realiza\u00e7\u00e3o do desfazimento da transa\u00e7\u00e3o dever\u00e1 ser realizada chamada \u00e0 fun\u00e7\u00e3o DesfazCartao. Para maiores detalhes favor verificar o cap\u00edtulo denominado \"Fluxo de Confirma\u00e7\u00e3o e Desfazimento das Transa\u00e7\u00f5es\".</p>"},{"location":"pages/Transacoes/Transacoes/#transacao-de-credito-e-credito-split","title":"Transa\u00e7\u00e3o de Cr\u00e9dito e Cr\u00e9dito Split","text":""},{"location":"pages/Transacoes/Transacoes/#solicitacao-cartao-de-credito","title":"Solicita\u00e7\u00e3o Cart\u00e3o de Cr\u00e9dito","text":"<pre><code>int DIRETIVA_CALLBACK TransacaoCartaoCredito(char *pValorTransacao, char *pNumeroCupom, char *pNumeroControle)\n</code></pre> <p>Se a rede autorizadora permitir e se estiver configurada no D-TEF a impress\u00e3o de cupom reduzido, al\u00e9m do arquivo acima ser\u00e1 liberado um arquivo com o comprovante reduzido no formato RNNNNNN.PPP, onde NNNNNN \u00e9 o NumeroControle e PPP \u00e9 o n\u00famero do terminal configurado. Assim, o comprovante reduzido dever\u00e1 ser impresso no espa\u00e7o destinado \u00e0 mensagem promocional do cupom fiscal e o comprovante normal continuar\u00e1 a ser impresso no cupom vinculado</p> <p>Os campos est\u00e3o abaixo caracterizados:</p> <p>[ 00 ] indica que n\u00e3o existiram restri\u00e7\u00f5es para a efetiva\u00e7\u00e3o da transa\u00e7\u00e3o.</p> <p>[ 11 ] indica que existiram restri\u00e7\u00f5es para a efetiva\u00e7\u00e3o da transa\u00e7\u00e3o. O sistema de automa\u00e7\u00e3o deve retornar \u00e0 rotina de recebimento de valores, pois a transa\u00e7\u00e3o solicitada n\u00e3o foi autorizada, n\u00e3o sendo v\u00e1lida como forma de pagamento</p>"},{"location":"pages/Transacoes/Transacoes/#solicitacao-cartao-de-credito-completa","title":"Solicita\u00e7\u00e3o Cart\u00e3o de Cr\u00e9dito COMPLETA","text":"<pre><code>int DIRETIVA_CALLBACK TransacaoCartaoCreditoCompleta(char *pValorTransacao, char *pNumeroCupom,\nchar *pNumeroControle, char *pTipoOperacao, char *pNumeroParcelas, char *pValorParcela, char *pValorTaxaServico, char *pPermiteAlteracao,\nchar *pReservado)\n</code></pre> <pre><code>int DIRETIVA_CALLBACK TransacaoCartaoPrivateLabelCompleta(char *pValorTransacao, char *pNumeroCupom,\nchar *pNumeroControle, char *pTipoOperacao, char *pNumeroParcelas, char *pValorEntrada, char *pValorTaxaServico, char *pPermiteAlteracao, char *pReservado)\n</code></pre> <p>Quando a automa\u00e7\u00e3o comercial necessitar de detalhes mais precisos da transa\u00e7\u00e3o, de cart\u00e3o de cr\u00e9dito ou private label, pode ser usada a solicita\u00e7\u00e3o de transa\u00e7\u00e3o com cart\u00e3o de cr\u00e9dito completa e transa\u00e7\u00e3o com cart\u00e3o private label completa, atrav\u00e9s da(s) chamada(s) \u00e0(s) fun\u00e7\u00e3o(\u00f5es) TransacaoCartaoCreditoCompleta e TransacaoCartaoPrivateLabelCompleta. Os par\u00e2metros opcionais destas fun\u00e7\u00f5es s\u00e3o os seguintes:</p> <p>TipoOperacao</p> <p>NumeroParcelas</p> <p>ValorParcela</p> <p>ValorEntrada</p> <p>ValorTaxaServico</p> <p>PermiteAlteracao</p> <p>Reservado</p>"},{"location":"pages/Transacoes/Transacoes/#solicitacao-cartao-de-credito-completa-split","title":"Solicita\u00e7\u00e3o Cart\u00e3o de Cr\u00e9dito Completa SPLIT","text":"<p>Para realizar uma transa\u00e7\u00e3o de SPLIT Cr\u00e9dito utilizar o m\u00e9todo descrito abaixo. Ele tem a mesma parametriza\u00e7\u00e3o e regra de entrada da transa\u00e7\u00e3o de Cr\u00e9dito Completa, todavia recebe a mais os dados de SPLIT de pagamento.</p> <pre><code>int DIRETIVA_CALLBACK TransacaoCartaoCreditoCompletaSplit(char *pValorTransacao, char *pNumeroCupom,\nchar *pNumeroControle, char *pTipoOperacao, char *pNumeroParcelas, char *pValorParcela, char *pValorTaxaServico, char *pPermiteAlteracao, char *pReservado, char *pQuantidadeItensSplit, char *pItensSplit, char *pQuantidadeRecebedoresSplit, char *pRecebedoresSplit)\n</code></pre> Campo Tamanho Descri\u00e7\u00e3o ValorTransacao 12N 10 inteiros, 2 decimais NumeroCupom 06N N\u00famero do cupom (fiscal ou n\u00e3o fiscal) NumeroControle 06N NSU (n\u00famero seq\u00fcencial \u00fanico) TipoOperacao 02A \u2022 [ AV ] \u00c0 Vista\u2022 [ FL ] Financiamento Lojista\u2022 [ FA ] Financiamento Administradora NumeroParcelas 02N N\u00famero de parcelas (00 \u2013 99) ValorParcela 12N 10 inteiros, 2 decimais ValorEntrada (somente transacao PrivateLabel) 12N 10 inteiros, 2 decimais ValorTaxaServico 12N 10 inteiros, 2 decimais. PermiteAlteracao 01A \u2022 [ S ] Permite alterar valores informados (exceto ValorTransacao)\u2022 [ N ] N\u00e3o Permite alterar valores informados Reservado 148A [ Especifica\u00e7\u00e3o ]\u2022 [ 1..1 ] Uso restrito. Fixo \u201c0\u201d\u2022 [ 2..4 ] Uso restrito. Fixo \u201c000\u201d\u2022 [ 5..7 ] Plano de pagamento utilizado no PDV\u2022 [ 8..8 ] Valor [ 0 ] indica pagamento com Cart\u00e3o de Cr\u00e9dito;[ 1 ] indica pagamento com Crach\u00e1. [ 3 ] indica pagamento com cart\u00e3o Qualidade [ 4 ] indica pagamento com cart\u00e3o MettaCard\u2022 [ 9..9 ] Flag indicando se h\u00e1 dados de cart\u00e3o (Crach\u00e1) [ 0 ]N\u00e3o [ 1 ]Sim[10] Op\u00e7\u00e3o para Pagamento de fatura \u2022 0 -&gt; Indica que n\u00e3o \u00e9 pagamento de fatura \u2022 1 -&gt; C\u00f3digo de Barras digitado \u2022 2 -&gt; C\u00f3digo de Barras lido \u00f3ticamente\u2022 3 -&gt; CPF (11 caracteres)\u2022 4 -&gt; Cart\u00e3o (n\u00e3o deve passar o n\u00famero do cart\u00e3o, colocar tamanho dos dados zerado)\u2022 5 -&gt; Outros(at\u00e9 40 caracteres)\u2022 [11..12] Tamanho dos dados da op\u00e7\u00e3o de pagamento de fatura\u2022 [13..59] Dados do pagamento de fatura\u2022 [60..126] Uso restrito.\u2022 [ 127..138 ] Valor da taxa de embarque\u2022 [ 139..139 ] Tipo de Venda (0-Normal; 1-Promocional)\u2022 [ 140..140 ] Indicativo de parametriza\u00e7\u00e3o para CPF E COD funcionario para br premia (0-N\u00e3o; 1-Sim)\u2022 [ 141..143 ] C\u00f3digo Funcionario BRPREMIA\u2022 [ 144..154 ] CPF Cliente\u2022 [ 155..156 ] Quantidade de ciclos a pular\u2022 [157..161] C\u00f3digo da tabela dos planos CDC[Especifica\u00e7\u00e3o do Retorno]C\u00f3digos poss\u00edveis:\u2022 [ 01 ] Dados Correspondente Banc\u00e1rio\u2022 [ 02 ] Dados Correspondente Banc\u00e1rio\u2022 [ 03 ] Dados Correspondente Banc\u00e1rio\u2022 [ 04 ] Dados Correspondente Banc\u00e1rio\u2022 [ 05 ] Dados Venda Crach\u00e1\u2022 [ 06 ] Dados Correspondente Banc\u00e1rio\u2022 [ 07 ] Dados Correspondente Banc\u00e1rio\u2022 [ Especifica\u00e7\u00e3o dos Dados Venda Crach\u00e1 ]\u2022 [ 01..09 ] CodigoAutorizacao\u2022 [ 10..59 ] NomeFuncionario\u2022 [ 60..71 ] ValorDesconto\u2022 [ 72..76 ] PercentualDesconto QuantidadeItensSplit(opcional, utilizar 0 caso n\u00e3o tenha itens) 03N 3 inteiros, informando a quantidade de itens enviados. ItensSplit Clique aqui para visualizar a tabela Quantidade Recebedores Split 03N 3 inteiros, informando a quantidade de recebedores enviados RecebedoresSplit Clique aqui para visualizar a tabela Status 02I \u2022 [ 00 ] Transa\u00e7\u00e3o autorizada\u2022 [ 11 ] Transa\u00e7\u00e3o n\u00e3o efetuada <p>ItensSplit</p> Campo Tamanho Descri\u00e7\u00e3o Valor 12N 10 inteiros, 2 decimais Descri\u00e7\u00e3o 20A 20 caracteres (com espa\u00e7os a direita) Quantidade 5N Quantidade vendida do item informado, 5 Inteiros C\u00f3digo 13A C\u00f3digo do produto, 13 caracteres. <p>RecebedoresSplit</p> Campo Tamanho Descri\u00e7\u00e3o Valor 12N 10 inteiros, 2 decimais CNPJ 14N 14 inteiros Tipo* 01N [0] Valor Bruto [1] Porcentagem <p>* O tipo bruto indica que o dado informado no campo \"Valor\" da mesma estrutura representa o valor   real que o CNPJ receber\u00e1, e o tipo porcentagem indica que o dado informado para aquele CNPJ \u00e9   um valor percentual, portando, o CNPJ receber\u00e1 x% do valor total.</p> <p>[ 00 ] indica que n\u00e3o existiram restri\u00e7\u00f5es para a efetiva\u00e7\u00e3o da transa\u00e7\u00e3o.</p> <p>[ 11 ] indica que existiram restri\u00e7\u00f5es para a efetiva\u00e7\u00e3o da transa\u00e7\u00e3o. O sistema de automa\u00e7\u00e3o deve   retornar \u00e0 rotina de recebimento de valores, pois a transa\u00e7\u00e3o solicitada n\u00e3o foi autorizada, n\u00e3o sendo   v\u00e1lida como forma de pagamento.</p>"},{"location":"pages/Transacoes/Transacoes/#confirmacao-cartao-de-credito","title":"Confirma\u00e7\u00e3o Cart\u00e3o de Cr\u00e9dito","text":"<pre><code>int DIRETIVA_CALLBACK ConfirmaCartaoCredito(char *pNumeroControle)\n</code></pre> <pre><code>int DIRETIVA_CALLBACK TransacaoConfirmacaoPreAutorizacao(char *pNumeroControle)\n</code></pre> <p>A confirma\u00e7\u00e3o de transa\u00e7\u00e3o com cart\u00e3o de cr\u00e9dito \u00e9 realizada atrav\u00e9s da chamada a fun\u00e7\u00e3o ConfirmaCartaoCredito.</p> <p>Na resposta da chamada \u00e0 fun\u00e7\u00e3o ser\u00e1 devolvido o , indicando o resultado da transa\u00e7\u00e3o.</p> <p>[ 00 ] indica que n\u00e3o existiram restri\u00e7\u00f5es para a efetiva\u00e7\u00e3o da transa\u00e7\u00e3o.</p> Campo Tamanho Descri\u00e7\u00e3o NumeroControle 06N NSU (n\u00famero seq\u00fcencial \u00fanico) 02I [ 00 ] Confirma\u00e7\u00e3o aceita[ 11 ] Confirma\u00e7\u00e3o N\u00c3O aceita <p>[ 11 ] indica que existiram restri\u00e7\u00f5es para a efetiva\u00e7\u00e3o da transa\u00e7\u00e3o. Cabe ao sistema de automa\u00e7\u00e3o decidir a a\u00e7\u00e3o a ser tomada. A forma de pagamento deve ter sido aceita como v\u00e1lida, pelo sistema de automa\u00e7\u00e3o, por\u00e9m a transa\u00e7\u00e3o n\u00e3o ser\u00e1 confirmada com a institui\u00e7\u00e3o financeira.</p> <p>Observa\u00e7\u00e3o: Para realiza\u00e7\u00e3o do desfazimento da transa\u00e7\u00e3o dever\u00e1 ser realizada chamada \u00e0 fun\u00e7\u00e3o DesfazCartao. Para maiores detalhes favor verificar o cap\u00edtulo denominado \"Fluxo de Confirma\u00e7\u00e3o e Desfazimento das Transa\u00e7\u00f5es\".</p>"},{"location":"pages/Transacoes/Transacoes/#transacoes-de-voucher","title":"Transa\u00e7\u00f5es de Voucher","text":""},{"location":"pages/Transacoes/Transacoes/#solicitacao-cartao-de-voucher","title":"Solicita\u00e7\u00e3o Cart\u00e3o de Voucher","text":"<pre><code>int DIRETIVA_CALLBACK TransacaoCartaoVoucher(char *pValorTransacao, char *pNumeroCupom, char *pNumeroControle)\n</code></pre> <p>[ 00 ] indica que n\u00e3o existiram restri\u00e7\u00f5es para a efetiva\u00e7\u00e3o da transa\u00e7\u00e3o. [ 11 ] indica que existiram restri\u00e7\u00f5es para a efetiva\u00e7\u00e3o da transa\u00e7\u00e3o. O sistema de automa\u00e7\u00e3o deve retornar \u00e0 rotina de recebimento de valores, pois a transa\u00e7\u00e3o solicitada n\u00e3o foi autorizada, n\u00e3o sendo v\u00e1lida como forma de pagamento.</p>"},{"location":"pages/Transacoes/Transacoes/#solicitacao-cartao-voucher-completa","title":"Solicita\u00e7\u00e3o Cart\u00e3o Voucher Completa","text":"<pre><code>int DIRETIVA_CALLBACK TransacaoCartaoVoucherCompleta(char *pValorTransacao, char *pNumeroCupom, char *pNumeroControle, char *pReservado)\n</code></pre> <p>Quando a automa\u00e7\u00e3o comercial necessitar de detalhes mais precisos da transa\u00e7\u00e3o, de cart\u00e3o Voucher, pode ser usada a solicita\u00e7\u00e3o de transa\u00e7\u00e3o com cart\u00e3o Voucher, atrav\u00e9s da chamada \u00e0 fun\u00e7\u00e3o TransacaoCartaoVoucherCompleta. Os par\u00e2metros opcionais dessa fun\u00e7\u00e3o s\u00e3o os seguintes:</p> <p>Reservado (*)</p> <p>Os campos est\u00e3o abaixo caracterizados.</p> Campo Tamanho Descri\u00e7\u00e3o ValorTransacao 12N \u2022 10 inteiros, 2 decimais NumeroCupom 06N N\u00famero do cupom (fiscal ou n\u00e3o fiscal) NumeroControle 06N NSU (n\u00famero seq\u00fcencial \u00fanico) Reservado 187A Especifica\u00e7\u00e3o\u2022 1..1 S aceitapagamento parcial com saldo que resta no cart\u00e3o N n\u00e3o aceita pagamento parcial 02I [ 00 ] Transa\u00e7\u00e3oautorizada[ 11 ] Transa\u00e7\u00e3o n\u00e3o efetuada <p>[00] indica que n\u00e3o existiram restri\u00e7\u00f5es para a efetiva\u00e7\u00e3o da transa\u00e7\u00e3o.</p> <p>[11] indica que existiramrestri\u00e7\u00f5es para a efetiva\u00e7\u00e3o da transa\u00e7\u00e3o. O sistema deautoma\u00e7\u00e3o deve retornar \u00e0 rotina de recebimento de valores,pois a transa\u00e7\u00e3o solicitada n\u00e3o foi autorizada, n\u00e3o sendov\u00e1lida como forma de pagamento.</p>"},{"location":"pages/Transacoes/Transacoes/#confirmacao-cartao-de-voucher","title":"Confirma\u00e7\u00e3o Cart\u00e3o de Voucher","text":"<pre><code>int DIRETIVA_CALLBACK ConfirmaCartaoVoucher(char *pNumeroControle)\n</code></pre> <pre><code>int DIRETIVA_CALLBACK TransacaoConfirmacaoPreAutorizacao(char *pNumeroControle)\n</code></pre> <p>A confirma\u00e7\u00e3o de transa\u00e7\u00e3o com cart\u00e3o de voucher \u00e9 realizada atrav\u00e9s da chamada a fun\u00e7\u00e3o ConfirmaCartaoVoucher.</p> <p>Na resposta da chamada \u00e0 fun\u00e7\u00e3o ser\u00e1 devolvido o , indicando o resultado da transa\u00e7\u00e3o.</p> <p>Os campos est\u00e3o abaixo caracterizados.</p> <p>[00] indica que n\u00e3o existiram restri\u00e7\u00f5es para a efetiva\u00e7\u00e3o da transa\u00e7\u00e3o.</p> Campo Tamanho Descri\u00e7\u00e3o NumeroControle 06N NSU (n\u00famero seq\u00fcencial \u00fanico) 02I [ 00 ] Confirma\u00e7\u00e3o aceita[ 11 ] Confirma\u00e7\u00e3o N\u00c3O aceita <p>[11] indica que existiram restri\u00e7\u00f5es para a efetiva\u00e7\u00e3o da transa\u00e7\u00e3o. Cabe ao sistema de automa\u00e7\u00e3o decidir a a\u00e7\u00e3o a ser tomada. A forma de pagamento deve ter sido aceita como v\u00e1lida, pelo sistema de automa\u00e7\u00e3o, por\u00e9m a transa\u00e7\u00e3o n\u00e3o ser\u00e1 confirmada com a institui\u00e7\u00e3o financeira.</p> <p>Observa\u00e7\u00e3o: Para realiza\u00e7\u00e3o do desfazimento da transa\u00e7\u00e3o dever\u00e1 ser realizada chamada \u00e0 fun\u00e7\u00e3o DesfazCartao. Para maiores detalhes favor verificar o cap\u00edtulo denominado \"Fluxo de Confirma\u00e7\u00e3o e Desfazimento das Transa\u00e7\u00f5es\".</p>"},{"location":"pages/Transacoes/Transacoes/#transacao-qr-code","title":"Transa\u00e7\u00e3o QR Code","text":""},{"location":"pages/Transacoes/Transacoes/#solicitacao-de-transacao-com-qr-code","title":"Solicita\u00e7\u00e3o de transa\u00e7\u00e3o com QR Code","text":"<pre><code>int DIRETIVA_CALLBACK TransacaoQRCode(char *pValorTransacao, char *pNumeroCupom, char *pNumeroControle, char *pReservado)\n</code></pre> <p>[ 00 ] indica que n\u00e3o existiram restri\u00e7\u00f5es para a efetiva\u00e7\u00e3o da transa\u00e7\u00e3o.</p> <p>[ 11 ] indica que existiram restri\u00e7\u00f5es para a efetiva\u00e7\u00e3o da transa\u00e7\u00e3o. O sistema de automa\u00e7\u00e3o deve retornar \u00e0 rotina de recebimento de valores, pois a transa\u00e7\u00e3o solicitada n\u00e3o foi autorizada, n\u00e3o sendo v\u00e1lida como forma de pagamento.</p> <p>Observa\u00e7\u00e3o: Para realiza\u00e7\u00e3o da confirma\u00e7\u00e3o da transa\u00e7\u00e3o dever\u00e1 ser realizada chamada \u00e0 fun\u00e7\u00e3o ConfirmaCartao e para o desfazimento da transa\u00e7\u00e3o dever\u00e1 ser realizada chamada \u00e0 fun\u00e7\u00e3o DesfazCartao. Para  maiores detalhes favor verificar o cap\u00edtulo denominado \"Fluxo de Confirma\u00e7\u00e3o e Desfazimento das Transa\u00e7\u00f5es\".</p>"},{"location":"pages/Transacoes/Transacoes/#transacao-de-crediario","title":"Transa\u00e7\u00e3o de Credi\u00e1rio","text":""},{"location":"pages/Transacoes/Transacoes/#solicitacao-cartao-de-crediario","title":"Solicita\u00e7\u00e3o Cart\u00e3o de Credi\u00e1rio","text":"<pre><code>int DIRETIVA_CALLBACK TransacaoCartaoCrediario(char *pValorTransacao, char *pNumeroCupom, char *pNumeroControle)\n</code></pre> <p>[ 00 ] indica que n\u00e3o existiram restri\u00e7\u00f5es para a efetiva\u00e7\u00e3o da transa\u00e7\u00e3o.</p> <p>[ 11 ] indica que existiram restri\u00e7\u00f5es para a efetiva\u00e7\u00e3o da transa\u00e7\u00e3o. O sistema de automa\u00e7\u00e3o deve retornar \u00e0 rotina de recebimento de valores, pois a transa\u00e7\u00e3o solicitada n\u00e3o foi autorizada, n\u00e3o sendo v\u00e1lida como forma de pagamento.</p>"},{"location":"pages/Transacoes/Transacoes/#solicitacao-cartao-crediario-completa","title":"Solicita\u00e7\u00e3o Cart\u00e3o Credi\u00e1rio Completa","text":"<pre><code>int DIRETIVA_CALLBACK TransacaoCartaoCrediarioCompleta(char *pValorTransacao, char *pNumeroCupom, char *pNumeroControle, char *pNumeroParcelas, char *pDataParcela1, char *pValorParcela1, char *pValorEntrada, char *pPermiteAlteracao,\nchar *pReservado)\n</code></pre> <p>Quando a automa\u00e7\u00e3o comercial necessitar de detalhes mais precisos da transa\u00e7\u00e3o, de cart\u00e3o credi\u00e1rio, pode ser usada a solicita\u00e7\u00e3o de transa\u00e7\u00e3o com cart\u00e3o credi\u00e1rio, atrav\u00e9s da chamada \u00e0 fun\u00e7\u00e3o TransacaoCartaoCrediarioCompleta. Os par\u00e2metros opcionais dessa fun\u00e7\u00e3o s\u00e3o os seguintes:</p> <p>NumeroParcelas (*)</p> <p>DataParcela1 (*)</p> <p>ValorParcela1 (*)</p> <p>ValorEntrada (*)</p> <p>PermiteAlteracao (*)</p> <p>Reservado (*)</p> Campo Tamanho Descri\u00e7\u00e3o ValorTransacao 12N \u2022 10 inteiros, 2 decimais NumeroCupom 06N N\u00famero do cupom (fiscal ou n\u00e3o fiscal) NumeroControle 06N NSU (n\u00famero seq\u00fcencial \u00fanico) NumeroParcelas 02N N\u00famero de parcelas (00 \u2013 99) DataParcela1 08N  Data da parcela1 ValorParcela1 12N 10 inteiros, 2 decimais ValorEntrada 12N 10 inteiros, 2 decimais PermiteAlteracao 01A [ S ] Permite alterar valores informados (exceto ValorTransacao)[ N ] N\u00e3o permite alterar valores informados Reservado 158A 02I [ 00 ] Transa\u00e7\u00e3oautorizada[ 11 ] Transa\u00e7\u00e3o n\u00e3o efetuada <p>[ 00 ] indica que n\u00e3o existiram restri\u00e7\u00f5es para a efetiva\u00e7\u00e3o da transa\u00e7\u00e3o.</p> <p>[ 11 ] indica que existiram restri\u00e7\u00f5es para a efetiva\u00e7\u00e3o da transa\u00e7\u00e3o. O sistema de automa\u00e7\u00e3o deve retornar \u00e0 rotina de recebimento de valores, pois a transa\u00e7\u00e3o solicitada n\u00e3o foi autorizada, n\u00e3o sendo v\u00e1lida como forma de pagamento.</p>"},{"location":"pages/Transacoes/Transacoes/#funcoes-especificas-especificacao-redecardcielobanrisulgetnet","title":"Fun\u00e7\u00f5es Espec\u00edficas (Espec\u00edfica\u00e7\u00e3o Redecard/Cielo/Banrisul/GetNet)","text":"<pre><code>int DIRETIVA_CALLBACK TransacaoCartaoCreditoIATA(char *pValorTransacao, char *pNumeroCupom, char *pNumeroControle)\n</code></pre> <pre><code>int DIRETIVA_CALLBACK TransacaoCartaoPrivateLabel(char *pValorTransacao, char *pNumeroCupom, char *pNumeroControle)\n</code></pre> <pre><code>int DIRETIVA_CALLBACK TransacaoSaqueRedecard(char *pValorTransacao, char *pNumeroCupom, char *pNumeroControle)\n</code></pre> <pre><code>int DIRETIVA_CALLBACK EstornoPreAutorizacaoRedecard(char *pValorTransacao, char *pNumeroControle)\n</code></pre> <pre><code>int DIRETIVA_CALLBACK TransacaoSimulacaoPrivateLabel(char *pValorTransacao, char *pNumeroCupom, char *pNumeroControle)\n</code></pre> <pre><code>int DIRETIVA_CALLBACK TransacaoPagamentoPrivateLabel(char *pValorTransacao, char *pNumeroCupom, char *pNumeroControle)\n</code></pre> <pre><code>int DIRETIVA_CALLBACK TransacaoCartaoCompraSaqueCompleta(char *pValorCompra, char *pValorSaque, char *pNumeroCupom, char *pNumeroControle, char *pPermiteAlteracao)\n</code></pre> <pre><code>int DIRETIVA_CALLBACK TransacaoCDC1MIN(char *pValorTransacao, char *pNumeroCupom, char *pNumeroControle)\n</code></pre> <pre><code>int DIRETIVA_CALLBACK TransacaoSIMparcelado(char *pValorTransacao, char *pNumeroCupom, char *pNumeroControle)\n</code></pre> <pre><code>int DIRETIVA_CALLBACK IdentificacaoAutomacaoComercial(char *pNomeAutomacao, char *pVersaoAutomacao, char *pReservado)\n</code></pre> <pre><code>int DIRETIVA_CALLBACK TransacaoInjecaoChaves(char *pNumeroControle)\n</code></pre> <pre><code>int DIRETIVA_CALLBACK TransacaoAcrescimoPreAutorizacao(char *pNumeroControle)\n</code></pre> <pre><code>int DIRETIVA_CALLBACK TransacaoConsultaPreAutorizacao(char *pNumeroControle)\n</code></pre> <p>As solicita\u00e7\u00f5es de transa\u00e7\u00e3o de Estorno de Pr\u00e9-Autoriza\u00e7\u00e3o de pagamento com Cart\u00e3o de Cr\u00e9dito, de Saque, de Pagamento com Cart\u00e3o de Cr\u00e9dito IATA e Cart\u00e3o Private Label s\u00e3o realizadas atrav\u00e9s das chamadas \u00e0s fun\u00e7\u00f5es EstornoPreAutorizacaoRedecard , TransacaoSaqueRedecard , TransacaoCartaoCreditoIATA, TransacaoCartaoPrivateLabel , TransacaoCartaoCompraSaque, TransacaoCDC1MIN e TransacaoSIMparcelado.</p> <p>O NumeroControle , inclu\u00eddo na resposta, dever\u00e1 ser armazenado pelo sistema de automa\u00e7\u00e3o, pois na fun\u00e7\u00e3o de confirma\u00e7\u00e3o este n\u00famero ser\u00e1, obrigatoriamente, utilizado, tanto nas fun\u00e7\u00f5es de pagamento como na de Saque e Estorno.</p> <p>As fun\u00e7\u00f5es de Estorno e Saque devem ser disponibilizadas via \"menu\", ou seja, o PDV n\u00e3o pode estar efetuando uma venda (assim como as fun\u00e7\u00f5es de cancelamento de pagamento e reimpress\u00e3o). J\u00e1 as fun\u00e7\u00f5es de pagamento (Cart\u00e3o Cr\u00e9dito IATA e Private Label) devem estar disponibilizadas como formas de pagamento do PDV.</p> <p>As fun\u00e7\u00f5es TransacaoCDC1MIN e TransacaoSIMparcelado s\u00e3o espec\u00edficas da rede Banrisul.</p> <p>O PDV dever\u00e1 realizar, respectivamente, chamada \u00e0s fun\u00e7\u00f5es IdentificacaoAutomacaoComercial e TransacaoEstatistica toda a vez que for inicializado.</p> <p>A fun\u00e7\u00e3o TransacaoPagamentoPrivateLabel \u00e9 a transa\u00e7\u00e3o dispon\u00edvel para efetuar o pagamento de fatura de cart\u00f5es private.</p> <p>A fun\u00e7\u00e3o de Inje\u00e7\u00e3o de Chaves poder ser chamada ou executada automaticamente (no caso de executar uma transa\u00e7\u00e3o com a Redecard e existir chave DUKPT na tabela de criptografia da Redecard e o pinpad n\u00e3o possuir esta chave carregada).</p> <p>A fun\u00e7\u00e3o TransacaoAcrescimoPreAutorizacao realiza acr\u00e9scimo de valor na Pr\u00e9-Autoriza\u00e7\u00e3o (ou seja, altera\u00e7\u00e3o de valor em uma pr\u00e9-autoriza\u00e7\u00e3o existente, na qual se deseja aumentar seu valor) pode ser executada com a fun\u00e7\u00e3o TransacaoAcrescimoPreAutorizacao.</p> <p>Uma consulta de Pr\u00e9-Autoriza\u00e7\u00f5es pode ser executada com a fun\u00e7\u00e3o TransacaoConsultaPreAutorizacao.</p> <p>A defini\u00e7\u00e3o das campos das fun\u00e7\u00f5es est\u00e3o abaixo caracterizados.</p> Campo Tamanho Descri\u00e7\u00e3o ValorTransacao 12N \u2022 10 inteiros, 2 decimais NumeroCupom 06N N\u00famero do cupom (fiscal ou n\u00e3o fiscal) NumeroControle 06N NSU (n\u00famero seq\u00fcencial \u00fanico) NomeAutomacao 20A Identifica\u00e7\u00e3o da automa\u00e7\u00e3o comercial VersaoAutomacao 20A Vers\u00e3o da automa\u00e7\u00e3o comercial Reservado 256A Capacidades da automa\u00e7\u00e3o comercial:\u2022 [1..1] Tratamento plataforma promocional Cielo\u2022 [0]: automa\u00e7\u00e3o n\u00e3o est\u00e1 preparada para tratar a plataforma promocional Cielo\u2022 [1]: automa\u00e7\u00e3o est\u00e1 preparada para tratar plataforma promocional Cielo\u2022 [2..2] Tratamento QR Code\u2022 [0]: automa\u00e7\u00e3o n\u00e3o est\u00e1 preparada para transa\u00e7\u00e3o de QR Code\u2022 [1]: automa\u00e7\u00e3o est\u00e1 preparada para transa\u00e7\u00e3o QR Code\u2022 [3..3] Tratamento QR Code no cancelamento\u2022 [0]: automa\u00e7\u00e3o n\u00e3o est\u00e1 informando se o cancelamento pode ser com QR Code\u2022 [1]: automa\u00e7\u00e3o est\u00e1 indicando que o cancelamento \u00e9 de QR Code 02I [ 00 ] Transa\u00e7\u00e3oautorizada[ 11 ] Transa\u00e7\u00e3o n\u00e3o efetuada <p>[ 00 ] indica que n\u00e3o existiram restri\u00e7\u00f5es para a efetiva\u00e7\u00e3o da transa\u00e7\u00e3o.</p> <p>[ 11 ] indica que existiram restri\u00e7\u00f5es para a efetiva\u00e7\u00e3o da transa\u00e7\u00e3o. O sistema de automa\u00e7\u00e3o deve retornar \u00e0 rotina de recebimento de valores, pois a transa\u00e7\u00e3o solicitada n\u00e3o foi autorizada, n\u00e3o sendo v\u00e1lida como forma de pagamento.</p> <p>Quanto \u00e0 estrutura dos logs de retorno, cada transa\u00e7\u00e3o possui estrutura diferente:</p> <p>EstornoPreAutorizacaoRedecard : id\u00eantica ao layout de cancelamento de pagamento.</p> <p>TransacaoSaqueRedecard : n\u00e3o gera log de transa\u00e7\u00e3o.</p> <p>TransacaoCartaoCreditoIATA : id\u00eantica ao layout de pagamento com cart\u00e3o de cr\u00e9dito.</p> <p>TransacaoCartaoPrivateLabel : layout do log do Cart\u00e3o Private Label.</p> <p>TransacaoCartaoCompraSaque : n\u00e3o gera log de transa\u00e7\u00e3o.</p> <p>TransacaoCartaoCompraSaqueCompleta : n\u00e3o gera log de transa\u00e7\u00e3o.</p> <p>Fun\u00e7\u00f5es de Venda PBM ( Pharmacy Benefit Management )</p> <pre><code>int DIRETIVA_CALLBACK ConsultaParametrosPBM(char *pNumeroCupom, char *pQuantidadeRedes,\nchar *pDadosRedes, char *pMensagemOperador)\n</code></pre> <pre><code>int DIRETIVA_CALLBACK ConsultaProdutosPBM(char *pNumeroCupom, char *pRedePBM, char *pTrilha1,\nchar *pTrilha2, char *pDigitado, char *pAutorizacao,\nchar *pDadosCRM, char *pTipoVenda, char *pValorTotalMedicamentos,\nchar *pValorVista, char *pValorCartao, char *pCodigoCredenciado,\nchar *pQuantidadeMedicamentos, char *pMedicamentos, char *pReservado, char *pNumeroControle, char *pMensagemOperador)\n</code></pre> <pre><code>int DIRETIVA_CALLBACK TransacaoVendaPBM(char *pValorTotalMedicamentos, char *pNumeroCupom, char *pRedePBM, char *pTrilha1, char *pTrilha2, char *pDigitado, char *pAutorizacao, char *pNSUConsulta, char *pDadosCRM, char *pTipoVenda,\nchar *pValorVista, char *pValorCartao, char *pCodigoCredenciado,\nchar *pRegraNegocio, char *pQuantidadeMedicamentos, char *pMedicamentos,\nchar *pReservado, char *pNumeroControle, char *pNumeroControleRede, char *pMensagemOperador)\n</code></pre> <pre><code>int DIRETIVA_CALLBACK ConfirmaVendaPBM(char *pNumeroControle)\n</code></pre> <pre><code>int DIRETIVA_CALLBACK TransacaoReimpressaoVendaPBM()\n</code></pre> <pre><code>int DIRETIVA_CALLBACK TransacaoCancelamentoVendaPBM(char *pNumeroControle)\n</code></pre> <pre><code>int DIRETIVA_CALLBACK TransacaoElegibilidadePBM(char *pNumeroCupom, char *pRedePBM, char *pMatricula,\nchar *pDadosElegibilidade, char *pNumeroControle, char *pNumeroControleRede, char *pNomeCliente,\nchar *pNomeMedico, char *pInformaDependente, char *pListaDependentes, char *pReservado, char *pMensagemOperador)\n</code></pre> <pre><code>int DIRETIVA_CALLBACK TransacaoPreAutorizacaoPBM(char *pNumeroCupom, char *pRedePBM, char *pAutorizacaoElegibilidade, char *pDadosFarmaceutico,\nchar *pQuantidadeMedicamentos, char *pMedicamentos, char *pNumeroControle, char *pNumeroControleRede, char *pReservado, char *pMensagemOperador)\n</code></pre> <pre><code>int DIRETIVA_CALLBACK TransacaoCancelamentoPreAutorizacaoPBM(char *pNumeroControle)\n</code></pre> <pre><code>int DIRETIVA_CALLBACK ConsultaParametrosPBM_TeleMarketing(char *pNumeroEmpresa, char *pMultiLoja,\nchar *pNumeroLoja, char *pNumeroPDV,\nchar *pNumeroCupom, char *pQuantidadeRedes, char *pDadosRedes, char *pMensagemOperador)\n</code></pre> <pre><code>int DIRETIVA_CALLBACK ConsultaProdutosPBM_TeleMarketing(char *pNumeroEmpresa, char *pMultiLoja, char *pNumeroLoja, char *pNumeroPDV, char *pNumeroCupom, char *pRedePBM, char *pTrilha1, char *pTrilha2, char *pDigitado, char *pAutorizacao,\nchar *pDadosCRM, char *pTipoVenda, char *pValorTotalMedicamentos, char *pValorVista, char *pValorCartao, char *pCodigoCredenciado,\nchar *pQuantidadeMedicamentos, char *pMedicamentos,\nchar *pReservado, char *pNumeroControle, char *pMensagemOperador)\n</code></pre> <pre><code>int DIRETIVA_CALLBACK TransacaoVendaPBM_TeleMarketing(char *pNumeroEmpresa, char *pMultiLoja, char *pNumeroLoja, char *pNumeroPDV, char *pValorTotalMedicamentos, char *pNumeroCupom, char *pRedePBM, char *pTrilha1, char *pTrilha2,\nchar *pDigitado, char *pAutorizacao, char *pNSUConsulta,\nchar *pDadosCRM, char *pTipoVenda, char *pValorVista, char *pValorCartao, char *pCodigoCredenciado,\nchar *pRegraNegocio, char *pQuantidadeMedicamentos, char *pMedicamentos, char *pReservado, char *pNumeroControle, char *pNumeroControleRede, char *pMensagemOperador)\n</code></pre> <pre><code>int DIRETIVA_CALLBACK TransacaoCancelamentoVendaPBM_TeleMarketing(char *pNumeroEmpresa, char *pMultiLoja,\nchar *pNumeroLoja, char *pNumeroPDV, char *pTrilha1, char *pTrilha2, char *pDigitado, char *pReservado, char *pNumeroControle, char *pMensagemOperador)\n</code></pre> <pre><code>int DIRETIVA_CALLBACK TransacaoAberturaVendaPBM_TeleMarketing(char *pNumeroEmpresa, char *pMultiLoja,\nchar *pNumeroLoja, char *pNumeroPDV, char *pRedePBM, char *pTrilha1, char *pTrilha2, char *pDigitado, char *pReservado, char *pPedirDadosComplementares, char *pDadosComplementares, char *pInfoDadosComplementares, char *pMensagemOperador)\n</code></pre> <pre><code>int DIRETIVA_CALLBACK TransacaoVendaProdutoPBM_TeleMarketing(char *pNumeroEmpresa, char *pMultiLoja,\nchar *pNumeroLoja, char *pNumeroPDV, char *pRedePBM, char *pTrilha1, char *pTrilha2, char *pDigitado, char *pMedicamento, char *pReservado, char *pPedirDadosComplementares, char *pDadosComplementares, char *pInfoDadosComplementares, char *pMensagemOperador)\n</code></pre> <pre><code>int DIRETIVA_CALLBACK TransacaoFechamentoVendaPBM_TeleMarketing(char *pNumeroEmpresa, char *pMultiLoja,\nchar *pNumeroLoja, char *pNumeroPDV, char *pRedePBM, char *pTrilha1, char *pTrilha2, char *pDigitado, char *pConfirmacao, char *pReservado,\nchar *pAutorizacao, char *pNumeroControle, char *pMensagemOperador)\n</code></pre> <pre><code>int DIRETIVA_CALLBACK TransacaoElegibilidadePBM_TeleMarketing(char *pNumeroEmpresa, char *pMultiLoja,\nchar *pNumeroLoja, char *pNumeroPDV,\nchar *pNumeroCupom, char *pRedePBM, char *pMatricula, char *pDadosElegibilidade, char *pNumeroControle, char *pNumeroControleRede, char *pNomeCliente, char *pNomeMedico, char *pInformaDependente, char *pListaDependentes, char *pReservado, char *pMensagemOperador)\n</code></pre> <pre><code>int DIRETIVA_CALLBACK TransacaoPreAutorizacaoPBM_TeleMarketing(char *pNumeroEmpresa, char *pMultiLoja,\nchar *pNumeroLoja, char *pNumeroPDV, char *pNumeroCupom, char *pRedePBM, char *pAutorizacaoElegibilidade, char *pDadosFarmaceutico, char *pQuantidadeMedicamentos, char *pMedicamentos, char *pNumeroControle, char *pNumeroControleRede, char *pReservado, char *pMensagemOperador)\n</code></pre> <pre><code>int DIRETIVA_CALLBACK TransacaoCancelamentoPreAutorizacaoPBM_TeleMarketing(char *pNumeroEmpresa,\nchar *pMultiLoja, char *pNumeroLoja, char *pNumeroPDV, char *pMatricula, char *pReservado, char *pNumeroControle,\nchar *pMensagemOperador)\n</code></pre> <p>As transa\u00e7\u00f5es com a rede \"PBM Funcional\", onde retorna os par\u00e2metros da rede \"DadosRedes=[49000PBM Funcional SS ]\", significa que a mesma necessita do \"C\u00f3digo de Autoriza\u00e7\u00e3o\u201d\" e \"N\u00famero do Cart\u00e3o\", conforme estrutura retornado neste par\u00e2metro.</p> <p>Ainda sobre a rede \u201cPBM Funcional\u201d, referente ao \"N\u00famero do Cart\u00e3o\", o mesmo deve ser solicitado ao operador \"campo com 17 d\u00edgitos\", e enviado no par\u00e2metro \" pTrilha2 \" contendo somente os 17 d\u00edgitos coletados pelo operador.</p> <p>As solicita\u00e7\u00f5es de transa\u00e7\u00e3o de Consulta das Redes Parametrizadas, de Consulta de Produtos, Transa\u00e7\u00e3o de Venda PBM, Confirma\u00e7\u00e3o de Venda PBM, Reimpress\u00e3o de Venda PBM e Cancelamento de Venda PBM s\u00e3o realizadas atrav\u00e9s das chamadas \u00e0s fun\u00e7\u00f5es ConsultaParametrosPBM , ConsultaProdutosPBM , TransacaoVendaPBM , ConfirmaVendaPBM , TransacaoReimpressaoVendaPBM e TransacaoCancelamentoVendaPBM.</p> <p>O NumeroControle , inclu\u00eddo na resposta da fun\u00e7\u00e3o de consulta de produtos, dever\u00e1 ser armazenado pelo sistema de automa\u00e7\u00e3o, pois na fun\u00e7\u00e3o de venda este n\u00famero dever\u00e1 obrigatoriamente, ser utilizado, para informar o n\u00famero da consulta em que os produtos foram obtidos. No caso do NumeroControle obtido no retorno da fun\u00e7\u00e3o de venda, dever\u00e1 ser armazenado pelo sistema de automa\u00e7\u00e3o para efetivar a confirma\u00e7\u00e3o da venda.</p> <p>Ap\u00f3s a impress\u00e3o do comprovante pela automa\u00e7\u00e3o comercial, sendo esta com sucesso, deve-se realizar a confirma\u00e7\u00e3o da transa\u00e7\u00e3o atrav\u00e9s da fun\u00e7\u00e3o ConfirmaVendaPBM informando o n\u00famero do NSU da transa\u00e7\u00e3o que deseja confirmar. Em seguida, para encerrar a opera\u00e7\u00e3o deve ser chamada a fun\u00e7\u00e3o FinalizaTransacao (ver item 3.1.3.11).</p> <p>Atrav\u00e9s da fun\u00e7\u00e3o TransacaoReimpressaoVendaPBM poder\u00e1 ser reimpresso o comprovante da \u00faltima venda PBM emitida com sucesso. Caso a fun\u00e7\u00e3o seja executada com sucesso, o arquivo ULTIMOPBM.PRN ser\u00e1 disponibilizado no diret\u00f3rio parametrizado para os cupons.</p> <p>As fun\u00e7\u00f5es de Consulta de Par\u00e2metros e Consulta de Produtos devem ser acionadas antes de iniciar-se uma venda, pois ao efetuar a venda o operador dever\u00e1 optar por utilizar um produto da rede selecionada ou por um produto da pr\u00f3pria loja. Esta \u201csele\u00e7\u00e3o\u201d \u00e9 importante para determinar se o sistema de automa\u00e7\u00e3o comercial dever\u00e1 chamar a fun\u00e7\u00e3o de venda PBM ou n\u00e3o. No caso de efetuar uma venda PBM, todos os par\u00e2metros obtidos atrav\u00e9s da fun\u00e7\u00e3o de consulta PBM dever\u00e3o ser passados na fun\u00e7\u00e3o de venda, de acordo com a quantidade vendida. Estes dados dever\u00e3o estar coerentes com os dados da consulta, caso contr\u00e1rio, a venda corre o risco de n\u00e3o ser aprovada pela rede PBM selecionada.</p> <p>Atrav\u00e9s da fun\u00e7\u00e3o TransacaoCancelamentoVendaPBM pode-se efetuar o cancelamento de uma venda PBM. O NumeroControle da venda a ser cancelada deve ser informado. Al\u00e9m disso, se a rede PBM exigir, poder\u00e1 ser necess\u00e1rio a leitura do cart\u00e3o do benefici\u00e1rio para efetuar o cancelamento.</p> <p>Os campos est\u00e3o abaixo caracterizados.</p> <p>Continua na p\u00e1gina 43/33 </p> Campo Tamanho Descri\u00e7\u00e3o MultiLoja 01 P 01 Caracter [\u2018S\u2019,\u2019N\u2019] NumeroEmpresa 04 P 04 inteiros NumeroLoja 04 P 04 inteiros NumeroPDV 03 P 03 inteiros [001\u2026356] InfoDadosComplementares 64 A Informa\u00e7\u00e3o de coleta de campos opcionais da tela de abertura de venda PBM. Os par\u00e2metros dos 2 campos t\u00eam o seguinte formato:\u2022 TAAMMXX...XXTAAMMXX...XX\u2022 T : tipo do campo - N (num\u00e9rico), A (alfanum\u00e9rico) ou F (op\u00e7\u00e3o sim ou n\u00e3o - Y/N)\u2022 AA : tamanho m\u00ednimo do campo (1 at\u00e9 50)\u2022 MM : tamanho m\u00e1ximo do campo (1 at\u00e9 50)\u2022 X : nome do campo para apresenta\u00e7\u00e3o na tela (at\u00e9 20 bytes)Os dois campos s\u00e3o opcionais. Se nenhum campo estiver preenchido, n\u00e3o haver\u00e1 a coleta. Exemplo:\u2022 N0808CEP N1111CPF DO PORTADOR\u2022 Neste exemplo, haver\u00e1 a captura de 2 campos, sendo que o primeiro \u00e9 o CEP com 8 d\u00edgitos (N=num\u00e9rico) e o segundo o CPF com 11 d\u00edgitos. DadosComplementares 128A Dados complementares coletados conforme os campos da estrutura InfoDadosComplementares . No exemplo acima, os dados poderiam ficar:\u2022 08999999991199999999999, isto \u00e9, CEP 99999999 com 8 d\u00edgitos e CPF 99999999999 com 11 d\u00edgitos. PedirDadosComplementares 01 A Se a fun\u00e7\u00e3o retornar erro, analisar este campo para verificar se \u00e9 necess\u00e1rio coletar os dados complementares e chamar novamente a fun\u00e7\u00e3o.\u2022 [ S ] Coletar dados complementares\u2022 [ N ] N\u00e3o coletar dados complementares ValorTotalMedicamentos 12N Valor total dos medicamentos do cupom na venda ou valor total dos medicamentos retornados na consulta NumeroCupom 06N N\u00famero do cupom (fiscal ou n\u00e3o fiscal) QuantidadeRedes 02N Quantidade de redes cadastradas DadosRedesFormato:Numero[05]Nome[20]ColetaCartao[01]ColetaAutorizacao[01]Filler[13] 560P Par\u00e2metro que retorna os dados das redes cadastradas. Os campos ColetaCartao e ColetaAutorizacao indicam qual informa\u00e7\u00e3o deve ser coletada pelo sistema de automa\u00e7\u00e3o comercial. Podem ser retornados at\u00e9 14 redes no formato especificado Especifica\u00e7\u00e3o de alguns campos :Campo ColetaCartao = \u2022 [ S ] Coletar cart\u00e3o\u2022 [ N ] N\u00e3o coletar cart\u00e3oCampo ColetaAutorizacao =\u2022 [ S ] Coletar n\u00famero de autoriza\u00e7\u00e3o\u2022 [ N ] N\u00e3o coletar n\u00famero de autoriza\u00e7\u00e3o RedePBM 05N C\u00f3digo da rede PBM selecionada Trilha1 76A Trilha1 do cart\u00e3o Trilha2 37A Trilha2 do cart\u00e3o Digitado 01N \u2022 [ 0 ] Indica que a trilha2 do cart\u00e3o foi obtido atrav\u00e9s de leitura em pinpad criptografado\u2022 [ 1 ] Indica que a trilha2 do cart\u00e3o foi digitado Autoriza\u00e7\u00e3o 12N N\u00famero da autoriza\u00e7\u00e3o coletado pelo sistema de automa\u00e7\u00e3o NSUConsulta 06N N\u00famero de controle obtido na consulta de produtos DadosCRMFormato:CRM[12]UF_CRM[02] 14P Dados de identifica\u00e7\u00e3o do CRM consultado DadosElegibilidadeFormato:CodigoOperadorVita[09]PlanoSaude[06]NumeroDependente[02]TipoProfissional[01]UF_CRM_CRO[02]NumeroCRM_CRO[09]DataReceita[06]DescontoEmFolha[01] 30P Deve ser coletado pelo sistema de automa\u00e7\u00e3o os dados da estrutura.Especifica\u00e7\u00e3o de alguns campos :\u2022 Campo CodigoOperadorVita =\u2022 Campo PlanoSaude = C\u00f3digo do plano de sa\u00fade\u2022 Campo TipoProfissional = [ 0 ] CRM [ 1 ] CRO\u2022 Campo DescontoEmFolha = [ S ] Sim [ N ] N\u00e3o NomeCliente 40P Retornado pela fun\u00e7\u00e3o TransacaoElegibilidadePBM NomeMedico 40P Retornado pela fun\u00e7\u00e3o TransacaoElegibilidadePBM InformaDependente 01P \u2022 [ S ]Sim [ N ]N\u00e3oImportante : se a fun\u00e7\u00e3o retornar status 11, verificar se foi retornado \u201cS\u201d neste par\u00e2metro. Neste caso, chamar a fun\u00e7\u00e3o novamente informando o n\u00famero do dependente na estrutura do par\u00e2metro DadosElegibilidade ListaDependentesFormato:N\u00famero do dependente[02]Nome do dependente[40] 504P Lista de at\u00e9 12 registros AutorizacaoElegibilidade 12P Deve ser informado a Autoriza\u00e7\u00e3o retornada na transa\u00e7\u00e3o de elegibilidade DadosFarmaceuticoFormato:UF_CRF[02]NumeroCRF[12] 14P TipoVenda 01N \u2022 [ 0 ]Vista [ 1 ] Cart\u00e3o ValorVista 12N Valor a pagar \u00e0 vista para consulta e valor pago \u00e0 vista para a fun\u00e7\u00e3o de venda ValorCart\u00e3o 12N Valor a pagar com cart\u00e3o para consulta e valor pago com cart\u00e3o para a fun\u00e7\u00e3o de venda CodigoCredenciado 15N C\u00f3digo do credenciado RegraNegocio 08N C\u00f3digo da regra de neg\u00f3cio (ePharma) QuantidadeMedicamentos 02N Quantidade de medicamentos retornados no campoMedicamentos para a fun\u00e7\u00e3o de consulta e quantidade de medicamentos vendidos para a fun\u00e7\u00e3o de venda MedicamentosFormato:DataReceita[08]IDCRM_CRO[01]CRM[12]UF_CRM[02]TipoMedicamento[02]C\u00f3digo[13]Descri\u00e7\u00e3o[15]CondicaoVenda[01]PrecoMaxConsumidor[08]PrecoFabricaUnitario[08]PrecoUnitarioVendaCons[08]PrecoAquisicaoUnitario[08]PrecoRepasseVarejo[08]MotivoRejeicao[02]QtdReceitada[04]QtdAutorizadaSolicitada[04]Referencia[02]IndicadorVenda[01]TipoEmbalagem[01]Desconto[05]Controle[10]Reembolso[08]Comiss\u00e3o[05]UsoContinuo[01]Filler[05] *P Dados dos medicamentos fornecidos para o sistema de automa\u00e7\u00e3o na fun\u00e7\u00e3o de consulta e dados dos medicamentos vendidos da rede selecionada para a fun\u00e7\u00e3o de venda. Podem ser retornados (pela fun\u00e7\u00e3o de consulta) ou informados (para a fun\u00e7\u00e3o de venda) at\u00e9 o n\u00famero de medicamentos informado no campo QuantidadeMedicamentos.\u2022 * o tamanho deste buffer deve ser calculado da seguinte forma: QuantidadeMedicamentos * 142\u2022 142 = tamanho da estrutura de dados para um medicamentoEspecifica\u00e7\u00e3o de alguns campos :\u2022 Campo IDCRM_CRO = [ 0 ] CRM [ 1 ] CRO\u2022 Campo TipoMedicamento =\u2022 [ 01 ] Medicamento\u2022 [ 02 ] Manipula\u00e7\u00e3o\u2022 [ 03 ] Manip. Especial\u2022 [ 04 ] Perfumaria\u2022 Campo CondicaoVenda =\u2022 [ 0 ] obrigat\u00f3rio utilizar pre\u00e7o f\u00e1brica\u2022 [ 1 ] permite vender com pre\u00e7o inferior\u2022 Campo IndicadorVenda =\u2022 [ 0 ] produto venda cart\u00e3o\u2022 [ 1 ] produto venda vista\u2022 Campo TipoEmbalagem = unit\u00e1rio ou parcial\u2022 Campo Controle = campo para uso restrito\u2022 Campo UsoContinuo = [ S , N ]Observa\u00e7\u00f5es :\u2022 [ 1 ] os campos Reembolso e Comiss\u00e3o foram inclu\u00eddos poiss\u00e3o retornados pela VidaLink\u2022 [ 2 ] o campo UsoContinuo \u00e9 utilizado pela PreSaude\u2022 [ 3 ] no campo QtdAutorizadaSolicitada deve ser informado a quantidade solicitada para a PrevSaude ou quantidadeautorizada para as demais PBMs. Reservado 128P Campo reservadoTransacaoAberturaVendaPBM_TeleMarketing : esta fun\u00e7\u00e3o retornar\u00e1 neste par\u00e2metro o n\u00famero da autoriza\u00e7\u00e3o para esta transa\u00e7\u00e3o. Tamanho de 12 bytes. Confirmacao 01A Indica se a transa\u00e7\u00e3o de venda de produtos PBM deve ser confirmada ou n\u00e3o.\u2022 [ S ] Confirmar a opera\u00e7\u00e3o\u2022 [ N ] N\u00e3o confirmar a opera\u00e7\u00e3o NumeroControle 06 N NSU (n\u00famero seq\u00fcencial \u00fanico) NumeroControleRede 12 N NSU da Rede Autorizadora (n\u00famero seq\u00fcencial \u00fanico retornado pela rede que aprovou a venda) MensagemOperador 64 P Mensagem retornada pelo D-TEF indicando o motivo da recusa da transa\u00e7\u00e3o. Deve ser apresentada ao operador quando a transa\u00e7\u00e3o for rejeitada 02 I \u2022 [ 00 ] Transa\u00e7\u00e3o autorizada\u2022 [ 11 ] Transa\u00e7\u00e3o n\u00e3o efetuada <p>Obs.: todos campos que cont\u00e9m diversos par\u00e2metros devem ser passados conforme seus respectivos tamanhos. Os campos num\u00e9ricos devem vir com zeros \u00e0 esquerda (sem ponto ou v\u00edrgula), enquanto que os alfanum\u00e9ricos devem vir com espa\u00e7os \u00e0 direita.</p> <p>[ 00 ] indica que n\u00e3o existiram restri\u00e7\u00f5es para a efetiva\u00e7\u00e3o da transa\u00e7\u00e3o.</p> <p>[ 11 ] indica que existiram restri\u00e7\u00f5es para a efetiva\u00e7\u00e3o da transa\u00e7\u00e3o. Apresentar ao usu\u00e1rio o conte\u00fado do campo MotivoRejeicao (retornado pela operadora). No campo MensagemOperador cont\u00e9m a mensagem retornada pelo D-TEF.</p> <p>Observa\u00e7\u00e3o : Para cada conjunto de chamadas as fun\u00e7\u00f5es de TeleMarketing ( ConsultaParametrosPBM_TeleMarketing , ConsultaProdutosPBM_TeleMarketing, TransacaoVendaPBM_TeleMarketing, TransacaoAberturaVendaPBM_Telemarketing, TransacaoVendaProdutoPBM_TeleMarketing, TransacaoFechamentoVendaPBM_TeleMarketing ) deve ser informado um n\u00famero de PDV diferente (obedecendo a faixa de PDVs definida na especifica\u00e7\u00e3o dos par\u00e2metros). Isto \u00e9 necess\u00e1rio para que o D-TEF possa diferenciar as transa\u00e7\u00f5es que est\u00e3o ocorrendo simultaneamente. Um exemplo de ocorr\u00eancia desta situa\u00e7\u00e3o \u00e9 na utiliza\u00e7\u00e3o desta fun\u00e7\u00e3o atrav\u00e9s de um servidor Web, que pode ter v\u00e1rios usu\u00e1rios realizando acesso simult\u00e2neo.</p> <p>Observa\u00e7\u00e3o para transa\u00e7\u00f5es de pr\u00e9-venda SevenPDV : a autoriza\u00e7\u00e3o das redes tratadas pela PBM SevenPDV deve seguir o seguinte fluxo de chamadas de fun\u00e7\u00f5es:</p> <p>TransacaoAberturaVendaPBM_TeleMarketing : fun\u00e7\u00e3o para abrir a venda. Se no retorno a fun\u00e7\u00e3o indicar que devem ser pedidos dados complementares, dever\u00e1 ser analisado o campo de retorno pInfoDadosComplementares para buscar a defini\u00e7\u00e3o dos campos a serem coletados. A seguir, a fun\u00e7\u00e3o TransacaoAberturaVendaPBM_TeleMarketing dever\u00e1 ser chamada novamente com a informa\u00e7\u00e3o dos dados complementares. Caso a tela de coleta dos dados complementares do portador for exibida mas o operador n\u00e3o entrou com os dados, a palavra VAZIO dever\u00e1 ser informada no campo pDadosComplementares .</p> <p>TransacaoVendaProdutoPBM_TeleMarketing : transa\u00e7\u00e3o para incluir o produto na autoriza\u00e7\u00e3o que est\u00e1 sendo feita simultaneamente \u00e0 venda. Na estrutura do medicamento, dever\u00e3o ser informados os campos Codigo , PrecoMaxConsumidor , PrecoUnitarioVendaCons , QuantidadeAutorizada e TipoEmbalagem . Os campos retornados na estrutura de medicamento s\u00e3o retornados os campos QuantidadeAutorizada , PrecoMaxConsumidor , PrecoUnitarioVendaCons , PrecoRepasseVarejo , Desconto e MotivoRejeicao .</p> <p>TransacaoFechamentoVendaPBM_TeleMarketing : fun\u00e7\u00e3o para finalizar a venda PBM. Se a venda foi finalizada com sucesso, dever\u00e1 passar o par\u00e2metro pConfirma\u00e7ao com o valor \"S\". Neste caso, ao final da execu\u00e7\u00e3o da fun\u00e7\u00e3o ser\u00e1 disponibilizado o comprovante da opera\u00e7\u00e3o para ser impresso. Se a venda n\u00e3o deve ser finalizada, passar no par\u00e2metro o valor \"N\".</p> <p>Observa\u00e7\u00e3o : para transa\u00e7\u00f5es de telemarketing em ambientes com m\u00faltiplas threads simult\u00e2neas, dever\u00e1 ser utilizada a DLL DPOSDRVTM.DLL.</p>"},{"location":"pages/Transacoes/Transacoes/#funcoes-de-venda-pbm-pharmacy-benefit-management","title":"Fun\u00e7\u00f5es de Venda PBM Pharmacy Benefit Management","text":"<pre><code>int DIRETIVA_CALLBACK ConsultaParametrosPBM(char *pNumeroCupom, char *pQuantidadeRedes, char *pDadosRedes, char *pMensagemOperador)\n</code></pre> <pre><code>int DIRETIVA_CALLBACK ConsultaProdutosPBM(char *pNumeroCupom, char *pRedePBM, char *pTrilha1, char *pTrilha2, char *pDigitado, char *pAutorizacao, char *pDadosCRM, char *pTipoVenda, char *pValorTotalMedicamentos, char *pValorVista, char *pValorCartao, char *pCodigoCredenciado, char *pQuantidadeMedicamentos, char *pMedicamentos, char *pReservado, char *pNumeroControle, char *pMensagemOperador)\n</code></pre> <pre><code>int DIRETIVA_CALLBACK TransacaoVendaPBM(char *pValorTotalMedicamentos, char *pNumeroCupom, char *pRedePBM, char *pTrilha1, char *pTrilha2, char *pDigitado, char *pAutorizacao, char *pNSUConsulta, char *pDadosCRM, char *pTipoVenda, char *pValorVista, char *pValorCartao, char *pCodigoCredenciado, char *pRegraNegocio, char *pQuantidadeMedicamentos, char *pMedicamentos, char *pReservado, char *pNumeroControle, char *pNumeroControleRede, char *pMensagemOperador)\n</code></pre> <pre><code>int DIRETIVA_CALLBACK ConfirmaVendaPBM(char *pNumeroControle)\n</code></pre> <pre><code>int DIRETIVA_CALLBACK TransacaoReimpressaoVendaPBM()\n</code></pre> <pre><code>int DIRETIVA_CALLBACK TransacaoCancelamentoVendaPBM(char *pNumeroControle)\n</code></pre> <pre><code>int DIRETIVA_CALLBACK TransacaoElegibilidadePBM(char *pNumeroCupom, char *pRedePBM, char *pMatricula,\nchar *pDadosElegibilidade, char *pNumeroControle, char *pNumeroControleRede, char *pNomeCliente, char *pNomeMedico, char *pInformaDependente, char *pListaDependentes, char *pReservado, char *pMensagemOperador)\n</code></pre> <pre><code>int DIRETIVA_CALLBACK TransacaoPreAutorizacaoPBM(char *pNumeroCupom, char *pRedePBM, char *pAutorizacaoElegibilidade,\nchar *pDadosFarmaceutico, char *pQuantidadeMedicamentos, char *pMedicamentos, char *pNumeroControle, char *pNumeroControleRede, char *pReservado, char *pMensagemOperador)\n</code></pre> <pre><code>int DIRETIVA_CALLBACK TransacaoCancelamentoPreAutorizacaoPBM(char *pNumeroControle)\n</code></pre> <pre><code>int DIRETIVA_CALLBACK ConsultaParametrosPBM_TeleMarketing(char *pNumeroEmpresa, char *pMultiLoja, char *pNumeroLoja, char *pNumeroPDV, char *pNumeroCupom, char *pQuantidadeRedes, char *pDadosRedes, char *pMensagemOperador)\n</code></pre> <pre><code>int DIRETIVA_CALLBACK ConsultaProdutosPBM_TeleMarketing(char *pNumeroEmpresa, char *pMultiLoja, char *pNumeroLoja, char *pNumeroPDV, char *pNumeroCupom, char *pRedePBM, char *pTrilha1, char *pTrilha2, char *pDigitado, char *pAutorizacao, char *pDadosCRM, char *pTipoVenda, char *pValorTotalMedicamentos, char *pValorVista, char *pValorCartao, char *pCodigoCredenciado, char *pQuantidadeMedicamentos, char *pMedicamentos, char *pReservado, char *pNumeroControle, char *pMensagemOperador)\n</code></pre> <pre><code>int DIRETIVA_CALLBACK TransacaoVendaPBM_TeleMarketing(char *pNumeroEmpresa, char *pMultiLoja, char *pNumeroLoja, char *pNumeroPDV, char *pValorTotalMedicamentos, char *pNumeroCupom, char *pRedePBM, char *pTrilha1, char *pTrilha2, char *pDigitado, char *pAutorizacao, char *pNSUConsulta, char *pDadosCRM, char *pTipoVenda, char *pValorVista, char *pValorCartao, char *pCodigoCredenciado, char *pRegraNegocio, char *pQuantidadeMedicamentos, char *pMedicamentos, char *pReservado, char *pNumeroControle, char *pNumeroControleRede, char *pMensagemOperador)\n</code></pre> <pre><code>int DIRETIVA_CALLBACK TransacaoCancelamentoVendaPBM_TeleMarketing(char *pNumeroEmpresa, char *pMultiLoja,\nchar *pNumeroLoja, char *pNumeroPDV, char *pTrilha1, char *pTrilha2, char *pDigitado, char *pReservado, char *pNumeroControle, char *pMensagemOperador)\n</code></pre> <pre><code>int DIRETIVA_CALLBACK TransacaoAberturaVendaPBM_TeleMarketing(char *pNumeroEmpresa, char *pMultiLoja, char *pNumeroLoja, char *pNumeroPDV, char *pRedePBM, char *pTrilha1, char *pTrilha2, char *pDigitado, char *pReservado, char *pPedirDadosComplementares, char *pDadosComplementares, char *pInfoDadosComplementares, char *pMensagemOperador)\n</code></pre> <pre><code>int DIRETIVA_CALLBACK TransacaoVendaProdutoPBM_TeleMarketing(char *pNumeroEmpresa, char *pMultiLoja,\nchar *pNumeroLoja, char *pNumeroPDV, char *pRedePBM, char *pTrilha1, char *pTrilha2, char *pDigitado, char *pMedicamento, char *pReservado, char *pPedirDadosComplementares, char *pDadosComplementares, char *pInfoDadosComplementares, char *pMensagemOperador)\n</code></pre> <pre><code>int DIRETIVA_CALLBACK TransacaoFechamentoVendaPBM_TeleMarketing(char *pNumeroEmpresa, char *pMultiLoja, char *pNumeroLoja, char *pNumeroPDV, char *pRedePBM, char *pTrilha1, char *pTrilha2, char *pDigitado, char *pConfirmacao, char *pReservado, char *pAutorizacao, char *pNumeroControle, char *pMensagemOperador)\n</code></pre> <pre><code>int DIRETIVA_CALLBACK TransacaoElegibilidadePBM_TeleMarketing(char *pNumeroEmpresa, char *pMultiLoja, char *pNumeroLoja, char *pNumeroPDV, char *pNumeroCupom, char *pRedePBM, char *pMatricula, char *pDadosElegibilidade, char *pNumeroControle, char *pNumeroControleRede, char *pNomeCliente, char *pNomeMedico, char *pInformaDependente, char *pListaDependentes, char *pReservado, char *pMensagemOperador)\n</code></pre> <pre><code>int DIRETIVA_CALLBACK TransacaoPreAutorizacaoPBM_TeleMarketing(char *pNumeroEmpresa, char *pMultiLoja, char *pNumeroLoja, char *pNumeroPDV, char *pNumeroCupom, char *pRedePBM, char *pAutorizacaoElegibilidade, char *pDadosFarmaceutico, char *pQuantidadeMedicamentos, char *pMedicamentos, char *pNumeroControle, char *pNumeroControleRede, char *pReservado, char *pMensagemOperador)\n</code></pre> <pre><code>int DIRETIVA_CALLBACK TransacaoCancelamentoPreAutorizacaoPBM_TeleMarketing(char *pNumeroEmpresa, char *pMultiLoja, char *pNumeroLoja, char *pNumeroPDV, char *pMatricula, char *pReservado, char *pNumeroControle, char *pMensagemOperador)\n</code></pre> <p>As transa\u00e7\u00f5es com a rede \"PBM Funcional\", onde retorna os par\u00e2metros da rede \"DadosRedes=[49000PBM Funcional SS ]\", significa que a mesma necessita do \"C\u00f3digo de Autoriza\u00e7\u00e3o\u201d\" e \"N\u00famero do Cart\u00e3o\", conforme estrutura retornado neste par\u00e2metro.</p> <p>Ainda sobre a rede \u201cPBM Funcional\u201d, referente ao \"N\u00famero do Cart\u00e3o\", o mesmo deve ser solicitado ao operador \"campo com 17 d\u00edgitos\", e enviado no par\u00e2metro \" pTrilha2 \" contendo somente os 17 d\u00edgitos coletados pelo operador.</p> <p>As solicita\u00e7\u00f5es de transa\u00e7\u00e3o de Consulta das Redes Parametrizadas, de Consulta de Produtos, Transa\u00e7\u00e3o de Venda PBM, Confirma\u00e7\u00e3o de Venda PBM, Reimpress\u00e3o de Venda PBM e Cancelamento de Venda PBM s\u00e3o realizadas atrav\u00e9s das chamadas \u00e0s fun\u00e7\u00f5es ConsultaParametrosPBM ,  ConsultaProdutosPBM , TransacaoVendaPBM , ConfirmaVendaPBM , TransacaoReimpressaoVendaPBM e  TransacaoCancelamentoVendaPBM.</p> <p>O NumeroControle , inclu\u00eddo na resposta da fun\u00e7\u00e3o de consulta de produtos, dever\u00e1 ser armazenado pelo sistema de automa\u00e7\u00e3o, pois na fun\u00e7\u00e3o de venda este n\u00famero dever\u00e1 obrigatoriamente, ser utilizado,  para informar o n\u00famero da consulta em que os produtos foram obtidos. No caso do NumeroControle obtido  no retorno da fun\u00e7\u00e3o de venda, dever\u00e1 ser armazenado pelo sistema de automa\u00e7\u00e3o para efetivar a confirma\u00e7\u00e3o da venda.</p> <p>Ap\u00f3s a impress\u00e3o do comprovante pela automa\u00e7\u00e3o comercial, sendo esta com sucesso, deve-se realizar a confirma\u00e7\u00e3o da transa\u00e7\u00e3o atrav\u00e9s da fun\u00e7\u00e3o ConfirmaVendaPBM informando o n\u00famero do NSU da transa\u00e7\u00e3o que deseja confirmar. Em seguida, para encerrar a opera\u00e7\u00e3o deve ser chamada a fun\u00e7\u00e3o FinalizaTransacao (ver item 3.1.3.11).</p> <p>Atrav\u00e9s da fun\u00e7\u00e3o TransacaoReimpressaoVendaPBM poder\u00e1 ser reimpresso o comprovante da \u00faltima venda PBM emitida com sucesso. Caso a fun\u00e7\u00e3o seja executada com sucesso, o arquivo ULTIMOPBM.PRN ser\u00e1 disponibilizado no diret\u00f3rio parametrizado para os cupons.</p> <p>As fun\u00e7\u00f5es de Consulta de Par\u00e2metros e Consulta de Produtos devem ser acionadas antes de iniciar-se uma venda, pois ao efetuar a venda o operador dever\u00e1 optar por utilizar um produto da rede selecionada ou por um produto da pr\u00f3pria loja. Esta \u201csele\u00e7\u00e3o\u201d \u00e9 importante para determinar se o sistema de automa\u00e7\u00e3o comercial dever\u00e1 chamar a fun\u00e7\u00e3o de venda PBM ou n\u00e3o. No caso de efetuar uma venda PBM, todos os par\u00e2metros obtidos atrav\u00e9s da fun\u00e7\u00e3o de consulta PBM dever\u00e3o ser passados na fun\u00e7\u00e3o de venda, de acordo com a quantidade vendida. Estes dados dever\u00e3o estar coerentes com os dados da consulta, caso contr\u00e1rio, a venda corre o risco de n\u00e3o ser aprovada pela rede PBM selecionada.</p> <p>Atrav\u00e9s da fun\u00e7\u00e3o TransacaoCancelamentoVendaPBM pode-se efetuar o cancelamento de uma venda PBM. O NumeroControle da venda a ser cancelada deve ser informado. Al\u00e9m disso, se a rede PBM exigir, poder\u00e1 ser necess\u00e1rio a leitura do cart\u00e3o do benefici\u00e1rio para efetuar o cancelamento.</p> <p>Os campos est\u00e3o abaixo caracterizados.</p> Campo Tamanho Descri\u00e7\u00e3o MultiLoja 01 P 01 Caracter [\u2018S\u2019,\u2019N\u2019] NumeroEmpresa 04 P 04 inteiros NumeroLoja 04 P 04 inteiros NumeroPDV 03 P 03 inteiros [001\u2026356] InfoDadosComplementares 64 A Informa\u00e7\u00e3o de coleta de campos opcionais da tela de abertura de venda PBM. Os par\u00e2metros dos 2 campos t\u00eam o seguinte formato:\u2022 TAAMMXX...XXTAAMMXX...XX\u2022 T : tipo do campo - N (num\u00e9rico), A (alfanum\u00e9rico) ou F (op\u00e7\u00e3o sim ou n\u00e3o - Y/N)\u2022 AA : tamanho m\u00ednimo do campo (1 at\u00e9 50)\u2022 MM : tamanho m\u00e1ximo do campo (1 at\u00e9 50)\u2022 X : nome do campo para apresenta\u00e7\u00e3o na tela (at\u00e9 20 bytes)Os dois campos s\u00e3o opcionais. Se nenhum campo estiver preenchido, n\u00e3o haver\u00e1 a coleta. Exemplo:\u2022 N0808CEP N1111CPF DO PORTADOR\u2022 Neste exemplo, haver\u00e1 a captura de 2 campos, sendo que o primeiro \u00e9 o CEP com 8 d\u00edgitos (N=num\u00e9rico) e o segundo o CPF com 11 d\u00edgitos. DadosComplementares 128A Dados complementares coletados conforme os campos da estrutura InfoDadosComplementares . No exemplo acima, os dados poderiam ficar:\u2022 08999999991199999999999, isto \u00e9, CEP 99999999 com 8 d\u00edgitos e CPF 99999999999 com 11 d\u00edgitos. PedirDadosComplementares 01 A Se a fun\u00e7\u00e3o retornar erro, analisar este campo para verificar se \u00e9 necess\u00e1rio coletar os dados complementares e chamar novamente a fun\u00e7\u00e3o.\u2022 [ S ] Coletar dados complementares\u2022 [ N ] N\u00e3o coletar dados complementares ValorTotalMedicamentos 12N Valor total dos medicamentos do cupom na venda ou valor total dos medicamentos retornados na consulta NumeroCupom 06N N\u00famero do cupom (fiscal ou n\u00e3o fiscal) QuantidadeRedes 02N Quantidade de redes cadastradas DadosRedesFormato:Numero[05]Nome[20]ColetaCartao[01]ColetaAutorizacao[01]Filler[13] 560P Par\u00e2metro que retorna os dados das redes cadastradas. Os campos ColetaCartao e ColetaAutorizacao indicam qual informa\u00e7\u00e3o deve ser coletada pelo sistema de automa\u00e7\u00e3o comercial. Podem ser retornados at\u00e9 14 redes no formato especificado Especifica\u00e7\u00e3o de alguns campos :Campo ColetaCartao = \u2022 [ S ] Coletar cart\u00e3o\u2022 [ N ] N\u00e3o coletar cart\u00e3oCampo ColetaAutorizacao =\u2022 [ S ] Coletar n\u00famero de autoriza\u00e7\u00e3o\u2022 [ N ] N\u00e3o coletar n\u00famero de autoriza\u00e7\u00e3o RedePBM 05N C\u00f3digo da rede PBM selecionada Trilha1 76A Trilha1 do cart\u00e3o Trilha2 37A Trilha2 do cart\u00e3o Digitado 01N \u2022 [ 0 ] Indica que a trilha2 do cart\u00e3o foi obtido atrav\u00e9s de leitura em pinpad criptografado\u2022 [ 1 ] Indica que a trilha2 do cart\u00e3o foi digitado Autoriza\u00e7\u00e3o 12N N\u00famero da autoriza\u00e7\u00e3o coletado pelo sistema de automa\u00e7\u00e3o NSUConsulta 06N N\u00famero de controle obtido na consulta de produtos DadosCRMFormato:CRM[12]UF_CRM[02] 14P Dados de identifica\u00e7\u00e3o do CRM consultado DadosElegibilidadeFormato:CodigoOperadorVita[09]PlanoSaude[06]NumeroDependente[02]TipoProfissional[01]UF_CRM_CRO[02]NumeroCRM_CRO[09]DataReceita[06]DescontoEmFolha[01] 30P Deve ser coletado pelo sistema de automa\u00e7\u00e3o os dados da estrutura.Especifica\u00e7\u00e3o de alguns campos :\u2022 Campo CodigoOperadorVita =\u2022 Campo PlanoSaude = C\u00f3digo do plano de sa\u00fade\u2022 Campo TipoProfissional = [ 0 ] CRM [ 1 ] CRO\u2022 Campo DescontoEmFolha = [ S ] Sim [ N ] N\u00e3o NomeCliente 40P Retornado pela fun\u00e7\u00e3o TransacaoElegibilidadePBM NomeMedico 40P Retornado pela fun\u00e7\u00e3o TransacaoElegibilidadePBM InformaDependente 01P \u2022 [ S ]Sim [ N ]N\u00e3oImportante : se a fun\u00e7\u00e3o retornar status 11, verificar se foi retornado \u201cS\u201d neste par\u00e2metro. Neste caso, chamar a fun\u00e7\u00e3o novamente informando o n\u00famero do dependente na estrutura do par\u00e2metro DadosElegibilidade ListaDependentesFormato:N\u00famero do dependente[02]Nome do dependente[40] 504P Lista de at\u00e9 12 registros AutorizacaoElegibilidade 12P Deve ser informado a Autoriza\u00e7\u00e3o retornada na transa\u00e7\u00e3o de elegibilidade DadosFarmaceuticoFormato:UF_CRF[02]NumeroCRF[12] 14P TipoVenda 01N \u2022 [ 0 ]Vista [ 1 ] Cart\u00e3o ValorVista 12N Valor a pagar \u00e0 vista para consulta e valor pago \u00e0 vista para a fun\u00e7\u00e3o de venda ValorCart\u00e3o 12N Valor a pagar com cart\u00e3o para consulta e valor pago com cart\u00e3o para a fun\u00e7\u00e3o de venda CodigoCredenciado 15N C\u00f3digo do credenciado RegraNegocio 08N C\u00f3digo da regra de neg\u00f3cio (ePharma) QuantidadeMedicamentos 02N Quantidade de medicamentos retornados no campoMedicamentos para a fun\u00e7\u00e3o de consulta e quantidade de medicamentos vendidos para a fun\u00e7\u00e3o de venda MedicamentosFormato:DataReceita[08]IDCRM_CRO[01]CRM[12]UF_CRM[02]TipoMedicamento[02]C\u00f3digo[13]Descri\u00e7\u00e3o[15]CondicaoVenda[01]PrecoMaxConsumidor[08]PrecoFabricaUnitario[08]PrecoUnitarioVendaCons[08]PrecoAquisicaoUnitario[08]PrecoRepasseVarejo[08]MotivoRejeicao[02]QtdReceitada[04]QtdAutorizadaSolicitada[04]Referencia[02]IndicadorVenda[01]TipoEmbalagem[01]Desconto[05]Controle[10]Reembolso[08]Comiss\u00e3o[05]UsoContinuo[01]Filler[05] *P Dados dos medicamentos fornecidos para o sistema de automa\u00e7\u00e3o na fun\u00e7\u00e3o de consulta e dados dos medicamentos vendidos da rede selecionada para a fun\u00e7\u00e3o de venda. Podem ser retornados (pela fun\u00e7\u00e3o de consulta) ou informados (para a fun\u00e7\u00e3o de venda) at\u00e9 o n\u00famero de medicamentos informado no campo QuantidadeMedicamentos.\u2022 * o tamanho deste buffer deve ser calculado da seguinte forma: QuantidadeMedicamentos * 142\u2022 142 = tamanho da estrutura de dados para um medicamentoEspecifica\u00e7\u00e3o de alguns campos :\u2022 Campo IDCRM_CRO = [ 0 ] CRM [ 1 ] CRO\u2022 Campo TipoMedicamento =\u2022 [ 01 ] Medicamento\u2022 [ 02 ] Manipula\u00e7\u00e3o\u2022 [ 03 ] Manip. Especial\u2022 [ 04 ] Perfumaria\u2022 Campo CondicaoVenda =\u2022 [ 0 ] obrigat\u00f3rio utilizar pre\u00e7o f\u00e1brica\u2022 [ 1 ] permite vender com pre\u00e7o inferior\u2022 Campo IndicadorVenda =\u2022 [ 0 ] produto venda cart\u00e3o\u2022 [ 1 ] produto venda vista\u2022 Campo TipoEmbalagem = unit\u00e1rio ou parcial\u2022 Campo Controle = campo para uso restrito\u2022 Campo UsoContinuo = [ S , N ]Observa\u00e7\u00f5es :\u2022 [ 1 ] os campos Reembolso e Comiss\u00e3o foram inclu\u00eddos poiss\u00e3o retornados pela VidaLink\u2022 [ 2 ] o campo UsoContinuo \u00e9 utilizado pela PreSaude\u2022 [ 3 ] no campo QtdAutorizadaSolicitada deve ser informado a quantidade solicitada para a PrevSaude ou quantidadeautorizada para as demais PBMs. Reservado 128P Campo reservadoTransacaoAberturaVendaPBM_TeleMarketing : esta fun\u00e7\u00e3o retornar\u00e1 neste par\u00e2metro o n\u00famero da autoriza\u00e7\u00e3o para esta transa\u00e7\u00e3o. Tamanho de 12 bytes. Confirmacao 01A Indica se a transa\u00e7\u00e3o de venda de produtos PBM deve ser confirmada ou n\u00e3o.\u2022 [ S ] Confirmar a opera\u00e7\u00e3o\u2022 [ N ] N\u00e3o confirmar a opera\u00e7\u00e3o NumeroControle 06 N NSU (n\u00famero seq\u00fcencial \u00fanico) NumeroControleRede 12 N NSU da Rede Autorizadora (n\u00famero seq\u00fcencial \u00fanico retornado pela rede que aprovou a venda) MensagemOperador 64 P Mensagem retornada pelo D-TEF indicando o motivo da recusa da transa\u00e7\u00e3o. Deve ser apresentada ao operador quando a transa\u00e7\u00e3o for rejeitada 02 I \u2022 [ 00 ] Transa\u00e7\u00e3o autorizada\u2022 [ 11 ] Transa\u00e7\u00e3o n\u00e3o efetuada <p>Obs.: todos campos que cont\u00e9m diversos par\u00e2metros devem ser passados conforme seus respectivos tamanhos. Os campos num\u00e9ricos devem vir com zeros \u00e0 esquerda (sem ponto ou v\u00edrgula), enquanto que os alfanum\u00e9ricos devem vir com espa\u00e7os \u00e0 direita.</p> <p>[ 00 ] indica que n\u00e3o existiram restri\u00e7\u00f5es para a efetiva\u00e7\u00e3o da transa\u00e7\u00e3o.</p> <p>[ 11 ] indica que existiram restri\u00e7\u00f5es para a efetiva\u00e7\u00e3o da transa\u00e7\u00e3o. Apresentar ao usu\u00e1rio o conte\u00fado do campo MotivoRejeicao (retornado pela operadora). No campo MensagemOperador cont\u00e9m a mensagem retornada pelo D-TEF.</p> <p>Observa\u00e7\u00e3o : Para cada conjunto de chamadas as fun\u00e7\u00f5es de TeleMarketing ( ConsultaParametrosPBM_TeleMarketing , ConsultaProdutosPBM_TeleMarketing, TransacaoVendaPBM_TeleMarketing, TransacaoAberturaVendaPBM_Telemarketing, TransacaoVendaProdutoPBM_TeleMarketing, TransacaoFechamentoVendaPBM_TeleMarketing ) deve ser informado um n\u00famero de PDV diferente (obedecendo a faixa de PDVs definida na especifica\u00e7\u00e3o dos par\u00e2metros). Isto \u00e9 necess\u00e1rio para que o D-TEF possa diferenciar as transa\u00e7\u00f5es que est\u00e3o ocorrendo simultaneamente. Um exemplo de ocorr\u00eancia desta situa\u00e7\u00e3o \u00e9 na utiliza\u00e7\u00e3o desta fun\u00e7\u00e3o atrav\u00e9s de um servidor Web, que pode ter v\u00e1rios usu\u00e1rios realizando acesso simult\u00e2neo.</p> <p>Observa\u00e7\u00e3o para transa\u00e7\u00f5es de pr\u00e9-venda SevenPDV : a autoriza\u00e7\u00e3o das redes tratadas pela PBM SevenPDV deve seguir o seguinte fluxo de chamadas de fun\u00e7\u00f5es:</p> <p>TransacaoAberturaVendaPBM_TeleMarketing : fun\u00e7\u00e3o para abrir a venda. Se no retorno a fun\u00e7\u00e3o indicar que devem ser pedidos dados complementares, dever\u00e1 ser analisado o campo de retorno pInfoDadosComplementares para buscar a defini\u00e7\u00e3o dos campos a serem coletados. A seguir, a fun\u00e7\u00e3o TransacaoAberturaVendaPBM_TeleMarketing dever\u00e1 ser chamada novamente com a informa\u00e7\u00e3o dos dados complementares. Caso a tela de coleta dos dados complementares do portador for exibida mas o operador n\u00e3o entrou com os dados, a palavra VAZIO dever\u00e1 ser informada no campo pDadosComplementares .</p> <p>TransacaoVendaProdutoPBM_TeleMarketing : transa\u00e7\u00e3o para incluir o produto na autoriza\u00e7\u00e3o que est\u00e1 sendo feita simultaneamente \u00e0 venda. Na estrutura do medicamento, dever\u00e3o ser informados os campos Codigo , PrecoMaxConsumidor , PrecoUnitarioVendaCons , QuantidadeAutorizada e TipoEmbalagem.  Os campos retornados na estrutura de medicamento s\u00e3o retornados os campos QuantidadeAutorizada , PrecoMaxConsumidor , PrecoUnitarioVendaCons , PrecoRepasseVarejo , Desconto e MotivoRejeicao.</p> <p>TransacaoFechamentoVendaPBM_TeleMarketing : fun\u00e7\u00e3o para finalizar a venda PBM. Se a venda foi finalizada com sucesso, dever\u00e1 passar o par\u00e2metro pConfirma\u00e7ao com o valor \"S\". Neste caso, ao final da execu\u00e7\u00e3o da fun\u00e7\u00e3o ser\u00e1 disponibilizado o comprovante da opera\u00e7\u00e3o para ser impresso. Se a venda n\u00e3o deve ser finalizada, passar no par\u00e2metro o valor \"N\".</p> <p>Observa\u00e7\u00e3o : para transa\u00e7\u00f5es de telemarketing em ambientes com m\u00faltiplas threads simult\u00e2neas, dever\u00e1 ser utilizada a DLL DPOSDRVTM.DLL.</p>"},{"location":"pages/Transacoes/Transacoes/#transacao-cheque","title":"Transa\u00e7\u00e3o Cheque","text":""},{"location":"pages/Transacoes/Transacoes/#solicitacao-cheque","title":"Solicita\u00e7\u00e3o Cheque","text":"<pre><code>int DIRETIVA_CALLBACK TransacaoCheque(char *pValorTransacao, char *pNumeroCupom, char *pNumeroControle,\nchar *pQuantidadeCheques, char *pPeriodicidadeCheques, char *pDataPrimeiroCheque, char *pCarenciaPrimeiroCheque)\n</code></pre> <p>A solicita\u00e7\u00e3o de transa\u00e7\u00e3o com cheque \u00e9 realizada atrav\u00e9s da chamada \u00e0 fun\u00e7\u00e3o TransacaoCheque , com a passagem dos seguintes par\u00e2metros opcionais:</p> <p>QuantidadeCheques</p> <p>PeriodicidadeCheques</p> <p>DataPrimeiroCheque</p> <p>CarenciaPrimeiroCheque</p> <p>Se for retornado um comprovante a ser impresso, a confirma\u00e7\u00e3o e a finaliza\u00e7\u00e3o da transa\u00e7\u00e3o ser\u00e3o necess\u00e1rias. Para saber se um comprovante foi retornado, ap\u00f3s a execu\u00e7\u00e3o com sucesso da fun\u00e7\u00e3o dever\u00e1 ser pesquisado no diret\u00f3rio de libera\u00e7\u00e3o de cupons o arquivo correspondente ao n\u00famero de controle retornado na fun\u00e7\u00e3o.</p> <p>Na resposta da chamada \u00e0 fun\u00e7\u00e3o ser\u00e1 devolvido o , indicando o resultado da transa\u00e7\u00e3o.</p> <p>Os campos est\u00e3o abaixo caracterizados.</p> Campo Tamanho Descri\u00e7\u00e3o ValorTransacao 12N 10 inteiros, 2 decimais NumeroCupom 06N N\u00famero do cupom (fiscal ou n\u00e3o fiscal) NumeroControle 06N NSU (n\u00famero seq\u00fcencial \u00fanico) QuantidadeCheques 02N Quantidade de cheques da transa\u00e7\u00e3o PeriodicidadeCheques 03N Periodicidade, em dias, entre os cheques. [ 000 ] indica periodicidade vari\u00e1vel (livre) a ser coletada. DataPrimeiroCheque 08N Data do dep\u00f3sito do primeiro cheque, no formato  CarenciaPrimeiroCheque 03N Car\u00eancia, em dias, para o dep\u00f3sito do primeiro cheque 02I [ 00 ] Transa\u00e7\u00e3o autorizada [ 11 ] Transa\u00e7\u00e3o n\u00e3o autorizada <p>[ 00 ] indica que n\u00e3o existiram restri\u00e7\u00f5es para a efetiva\u00e7\u00e3o da transa\u00e7\u00e3o e que os cheques envolvidos foram impressos com sucesso.</p> <p>[ 11 ] indica que existiram restri\u00e7\u00f5es para a efetiva\u00e7\u00e3o da transa\u00e7\u00e3o. O sistema de automa\u00e7\u00e3o deve retornar \u00e0 rotina de recebimento de valores, pois a transa\u00e7\u00e3o solicitada n\u00e3o foi autorizada, n\u00e3o sendo v\u00e1lida como forma de pagamento.</p>"},{"location":"pages/Transacoes/Transacoes/#solicitacao-cheque-completa","title":"Solicita\u00e7\u00e3o Cheque Completa","text":"<pre><code>int DIRETIVA_CALLBACK TransacaoChequeCompleta(char *pValorTransacao, char *pNumeroCupomVenda, char *pNumeroControle, char *pQuantidadeCheques, char *pPeriodicidadeCheques, char *pDataPrimeiroCheque, char *pCarenciaPrimeiroCheque, char *pTipoDocumento, char *pNumeroDocumento, char *pQuantidadeCheques, char *pSequenciaCheque, char *pCamaraCompensacao, char *pNumeroBanco, char *pNumeroAgencia, char *pNumeroContaCorrente, char *pNumeroCheque, char *pDataDeposito, char *pValorCheque, char *pDataNascimentoCliente, char *pTelefoneCliente, char *pCMC7, char *pPermiteAlteracao, char *pReservado)\n</code></pre> <p>Quando a automa\u00e7\u00e3o comercial necessitar de detalhes mais precisos da transa\u00e7\u00e3o, de cheque, pode ser usada a solicita\u00e7\u00e3o de transa\u00e7\u00e3o com cheque completa, atrav\u00e9s da chamada \u00e0 fun\u00e7\u00e3o TransacaoChequeCompleta. Os par\u00e2metros opcionais dessa fun\u00e7\u00e3o s\u00e3o os seguintes:</p> <p>QuantidadeCheques</p> <p>PeriodicidadeCheques</p> <p>DataPrimeiroCheque</p> <p>CarenciaPrimeiroCheque</p> <p>TipoDocumento</p> <p>NumeroDocumento</p> <p>QuantidadeCheques</p> <p>SequenciaCheque</p> <p>CamaraCompensacao</p> <p>NumeroBanco</p> <p>NumeroAgencia</p> <p>NumeroContaCorrente</p> <p>NumeroCheque</p> <p>DataDeposito</p> <p>ValorCheque</p> <p>DataNascimentoCliente</p> <p>TelefoneCliente</p> <p>CMC7</p> <p>PermiteAlteracao</p> <p>Reservado</p> <p>Se for retornado um comprovante a ser impresso, a confirma\u00e7\u00e3o e a finaliza\u00e7\u00e3o da transa\u00e7\u00e3o ser\u00e3o necess\u00e1rias. Para saber se um comprovante foi retornado, ap\u00f3s a execu\u00e7\u00e3o com sucesso da fun\u00e7\u00e3o dever\u00e1 ser pesquisado no diret\u00f3rio de libera\u00e7\u00e3o de cupons o arquivo correspondente ao n\u00famero de controle retornado na fun\u00e7\u00e3o.</p> <p>Na resposta da chamada \u00e0 fun\u00e7\u00e3o ser\u00e1 devolvido o , indicando o resultado da transa\u00e7\u00e3o.</p> Campo Tamanho Descri\u00e7\u00e3o ValorTransacao 12N 10 inteiros, 2 decimais NumeroCupom 06N N\u00famero do cupom (fiscal ou n\u00e3o fiscal) NumeroControle 06N NSU (n\u00famero seq\u00fcencial \u00fanico) QuantidadeCheques 02N Quantidade de cheques da transa\u00e7\u00e3o PeriodicidadeCheques 03N Periodicidade, em dias, entre os cheques. O valor [ 000 ] indica periodicidade vari\u00e1vel (livre) a ser coletada. DataPrimeiroCheque 08N Data do dep\u00f3sito do primeiro cheque, no formato  CarenciaPrimeiroCheque 03N Car\u00eancia, em dias, para o dep\u00f3sito do primeiro cheque TipoDocumento 01N \u2022 [ 1 ] CPF\u2022 [ 2 ] CNPJ NumeroDocumento 14N CPF ou CNPJ QuantidadeCheques 02N Quantidade de cheques da transa\u00e7\u00e3o ( obrigat\u00f3rio para consulta de m\u00faltiplos cheques ) SequenciaCheque 02N N\u00famero de seq\u00fc\u00eancia do cheque ( obrigat\u00f3rio para consulta de m\u00faltiplos cheques ) CamaraCompensacao 03N C\u00e2mara de compensa\u00e7\u00e3o NumeroBanco 03N N\u00famero do banco NumeroAgencia 04N N\u00famero da agencia NumeroContaCorrente 10N N\u00famero da conta-corrente NumeroCheque 07N N\u00famero do cheque com D\u00edgito verificador DataDeposito 08N ValorCheque 12N 10 inteiros, 2 decimais DataNascimentoCliente 08N TelefoneCliente 12A Telefone somente com caracteres num\u00e9ricos CMC7 50A Conte\u00fado da trilha CMC-7 PermiteAlteracao 01A [ S ] Permite alterar valores informados (exceto ValorTransacao) [ N ] N\u00e3o Permite alterar valores informados Reservado 51A [ Especifica\u00e7\u00e3o ] [ 01..01 ] Reservado [ 02..13 ] Valor m\u00e1ximo permitido para a transa\u00e7\u00e3o [ 14..14 ] [ S ] Consultar Cheque [ N ] N\u00e3o consultar [ 15..15 ] D\u00edgito C1 do cheque coletado [ 16..16 ] D\u00edgito C2 do cheque coletado [ 17..17 ] D\u00edgito C3 do cheque coletado [ 18..23 ] Cliente Desde, no formato 02I \u2022 [ 00 ] Transa\u00e7\u00e3o autorizada\u2022 [ 11 ] Transa\u00e7\u00e3o n\u00e3o autorizada <p>[ 00 ] indica que n\u00e3o existiram restri\u00e7\u00f5es para a efetiva\u00e7\u00e3o da transa\u00e7\u00e3o e que os cheques envolvidos foram impressos com sucesso.</p> <p>[ 11 ] indica que existiram restri\u00e7\u00f5es para a efetiva\u00e7\u00e3o da transa\u00e7\u00e3o. O sistema de automa\u00e7\u00e3o deve retornar \u00e0 rotina de recebimento de valores, pois a transa\u00e7\u00e3o solicitada n\u00e3o foi autorizada, n\u00e3o sendo v\u00e1lida como forma de pagamento.</p> <p>Habilitando a Consulta de M\u00faltiplos Cheques</p> <p>Para realizar a consulta de m\u00faltiplos cheques em uma mesma transa\u00e7\u00e3o com a rede verificadora, \u00e9 necess\u00e1rio que o D-POS esteja parametrizado para efetuar tal procedimento. Esta parametriza\u00e7\u00e3o deve ser realizada no D-TEF e \u00e9 armazenado no arquivo CHEQUE.TEF. Este arquivo dever\u00e1 ser copiado para o diret\u00f3rio do D-POS. Al\u00e9m disso, s\u00f3 \u00e9 permitido a consulta de m\u00faltiplos cheques para cheques da mesma conta. Se for realizado recebimentos de cheque de contas diferentes, ser\u00e1 enviado para a rede uma transa\u00e7\u00e3o de consulta para cada cheque, independente da parametriza\u00e7\u00e3o definida.</p> <p>Este tipo de consulta \u00e9 v\u00e1lido somente quando o automa\u00e7\u00e3o comercial realiza a consulta atrav\u00e9s da chamada da fun\u00e7\u00e3o TransacaoChequeCompleta informando os campos referentes \u00e0 seq\u00fc\u00eancia e a quantidade de cheques. A consulta do(s) cheque(s) ser\u00e1 enviada ao D-TEF ap\u00f3s a coleta do \u00faltimo cheque (campo pSequenciaCheque igual ao campo pQuantidadeCheques ). Para isto, o automa\u00e7\u00e3o comercial dever\u00e1 realizar uma chamada da fun\u00e7\u00e3o TransacaoChequeCompleta para cada cheque a ser processado, acumulando o campo pSequenciaCheque at\u00e9 atingir a quantidade de cheques informado (campo pQuantidadeCheques ).</p> <p>Observa\u00e7\u00e3o : a consulta de m\u00faltiplos cheques est\u00e1 limitado em 24 cheques na mesma transa\u00e7\u00e3o de consulta com a rede.</p> <p>Importante : esta funcionalidade depende da institui\u00e7\u00e3o verificadora cadastrada. Nem todas possuem este recurso. Portanto, deve-se consultar a rede se h\u00e1 disponibilidade deste servi\u00e7o.</p>"},{"location":"pages/Transacoes/Transacoes/#consultando-cheques-garantidos","title":"Consultando Cheques Garantidos","text":"<pre><code>int DIRETIVA_CALLBACK ConsultaChequesGarantidos(char *pTipoDocumento, char *pNumeroDocumento, char *pDataInicialConsulta, char *pDataFinalConsulta, char *pNumeroControle)\n</code></pre> <p>Para realizar a consulta dos cheques que foram garantidos pela rede autorizadora, deve-se realizar chamada \u00e0 fun\u00e7\u00e3o ConsultaChequesGarantidos . Esta fun\u00e7\u00e3o s\u00f3 est\u00e1 dispon\u00edvel caso a garantia de cheques esteja habilitada. Esta parametriza\u00e7\u00e3o deve ser realizada no D-TEF e \u00e9 armazenado no arquivo CHEQUE.TEF. Este arquivo dever\u00e1 ser copiado para o diret\u00f3rio do D-POS. A seguir, est\u00e3o detalhados os par\u00e2metros utilizados na chamada da fun\u00e7\u00e3o.</p> Campo Tamanho Descri\u00e7\u00e3o TipoDocumento 01N \u2022 [ 1 ] CPF\u2022 [ 2 ] CNPJ NumeroDocumento 14N CPF ou CNPJ NumeroControle 06N NSU (n\u00famero seq\u00fcencial \u00fanico) DataInicialConsulta 08N DDMMAAAA DataFinalConsulta 08N DDMMAAAA 02I \u2022 [ 00 ] Transa\u00e7\u00e3o autorizada\u2022 [ 11 ] Transa\u00e7\u00e3o n\u00e3o autorizada <p>[ 00 ] indica que n\u00e3o existiram restri\u00e7\u00f5es para a efetiva\u00e7\u00e3o da transa\u00e7\u00e3o.</p> <p>[ 11 ] indica que existiram restri\u00e7\u00f5es para a efetiva\u00e7\u00e3o da transa\u00e7\u00e3o.</p>"},{"location":"pages/Transacoes/Transacoes/#transacao-cartao-fidelidade","title":"Transa\u00e7\u00e3o Cart\u00e3o Fidelidade","text":""},{"location":"pages/Transacoes/Transacoes/#solicitacao-cartoes-fidelidade","title":"Solicita\u00e7\u00e3o Cart\u00f5es Fidelidade","text":"<pre><code>int DIRETIVA_CALLBACK TransacaoCartaoFidelidade(char *pValorTransacao, char *pNumeroCupom, char *pCompraPontos, char *pQuantidadeItensTaxaVariavel, char *pItensTaxaVariavel, char *pNumeroControle)\n</code></pre> <pre><code>int DIRETIVA_CALLBACK ConfirmaCartaoFidelidade(char *pNumeroControle)\n</code></pre> <p>A fun\u00e7\u00e3o de D\u00e9bito segue o mesmo princ\u00edpio, no entanto, n\u00e3o \u00e9 necess\u00e1rio a passagem do par\u00e2metro pValorTransacao, pois este ser\u00e1 solicitado durante a realiza\u00e7\u00e3o da transa\u00e7\u00e3o.</p> <p>O NumeroControle, inclu\u00eddo na resposta, dever\u00e1 ser armazenado pelo sistema de automa\u00e7\u00e3o, pois na fun\u00e7\u00e3o de confirma\u00e7\u00e3o este n\u00famero ser\u00e1, obrigatoriamente, utilizado, tanto na fun\u00e7\u00e3o de Cart\u00e3o (Carga de Pontos) como na fun\u00e7\u00e3o de D\u00e9bito (D\u00e9bito de Pontos).</p> <p>Ap\u00f3s a impress\u00e3o do comprovante pela automa\u00e7\u00e3o comercial, sendo esta com sucesso, deve-se realizar a confirma\u00e7\u00e3o da transa\u00e7\u00e3o. Em seguida, para encerrar a opera\u00e7\u00e3o deve ser chamada a fun\u00e7\u00e3o FinalizaTransacao (ver item 3.1.3.10).</p> <p>Existem duas situa\u00e7\u00f5es para chamada da fun\u00e7\u00e3o TransacaoCartaoFidelidade :</p> <p>Primeira : a opera\u00e7\u00e3o de cart\u00e3o fidelidade \u00e9 realizada ap\u00f3s a transa\u00e7\u00e3o normal de venda, independente da forma de pagamento utilizada (venda com cr\u00e9dito de pontos).</p> <p>Segunda : a opera\u00e7\u00e3o de cart\u00e3o fidelidade \u00e9 realizada fora da venda (compra de pontos sem v\u00ednculo com a venda).</p> <p>A identifica\u00e7\u00e3o de quando a fun\u00e7\u00e3o TransacaoCartaoFidelidade \u00e9 chamada deve ser informado no par\u00e2metro CompraPontos .</p> <p>Os campos est\u00e3o abaixo caracterizados.</p> Campo Tamanho Descri\u00e7\u00e3o ValorTransacao 12N 10 inteiros, 2 decimais NumeroCupom 06N N\u00famero do cupom (fiscal ou n\u00e3o fiscal) CompraPontos 01N [ 0 ] Indica cr\u00e9ditode pontos atrav\u00e9s de venda [ 1 ] Indica compra de pontos QuantidadeItensTaxaVariavel 03N Quantidade de itens vendidos com taxa vari\u00e1vel. [ 000 ] para opera\u00e7\u00e3o \u201ccompra de pontos\u201d [ ... ] para opera\u00e7\u00e3o \u201cvenda\u201d com cr\u00e9dito de pontos. ItensTaxaVariavelFormato:EAN[13]Quantidade[03]Pre\u00e7o[07]Pontos[07]Taxa[07] 999P Dados dos produtos com taxa vari\u00e1vel. S\u00e3o permitidos o m\u00e1ximo de 27 produtos. Observa\u00e7\u00e3o : Campo Pontos: Pontos acumulados com o item [5 inteiros, 2 decimas] Campo Taxa : Taxa de convers\u00e3o do item [3 inteiros, 4 decimais] NumeroControle 06N NSU (n\u00famero seq\u00fcencial \u00fanico) 02I [ 00 ] Transa\u00e7\u00e3o autorizada [ 11 ] Transa\u00e7\u00e3o n\u00e3o efetuada <p>[ 00 ] indica que n\u00e3o existiram restri\u00e7\u00f5es para a efetiva\u00e7\u00e3o da transa\u00e7\u00e3o.</p> <p>[ 11 ] indica que existiram restri\u00e7\u00f5es para a efetiva\u00e7\u00e3o da transa\u00e7\u00e3o. O sistema de automa\u00e7\u00e3o deve retornar \u00e0 rotina de recebimento de valores, pois a transa\u00e7\u00e3o solicitada n\u00e3o foi autorizada, n\u00e3o sendo v\u00e1lida como forma de pagamento.</p>"},{"location":"pages/Transacoes/Transacoes/#transacao-debito-beneficiario","title":"Transa\u00e7\u00e3o Debito Beneficiario","text":""},{"location":"pages/Transacoes/Transacoes/#solicitacao-debito-beneficiario","title":"Solicita\u00e7\u00e3o D\u00e9bito Benefici\u00e1rio","text":"<pre><code>int DIRETIVA_CALLBACK TransacaoDebitoBeneficiario(char *pValorTransacao, char *pTipoBeneficio, char *pNumeroBeneficio, char *pNumeroCupom, char *pNumeroControle)\n</code></pre> <pre><code>int DIRETIVA_CALLBACK TransacaoDebitoBeneficiarioCompleta(char *pValorTransacao, char *pTipoBeneficio,\nchar *pNumeroBeneficio, char *pNumeroCupom, char *pNumeroControle, char *pPermiteAlteracao, char *pReservado)\n</code></pre> <pre><code>int DIRETIVA_CALLBACK ConfirmaDebitoBeneficiario(char *pNumeroControle)\n</code></pre> <p>Ap\u00f3s a impress\u00e3o do comprovante pela automa\u00e7\u00e3o comercial, sendo esta com sucesso, deve-se realizar a confirma\u00e7\u00e3o da transa\u00e7\u00e3o. Em seguida, para encerrar a opera\u00e7\u00e3o deve ser chamada a fun\u00e7\u00e3o FinalizaTransacao (ver item 3.1.3.10).</p> <p>Os campos est\u00e3o abaixo caracterizados.</p> Campo Tamanho Descri\u00e7\u00e3o ValorTransacao 12N 10 inteiros, 2 decimais NumeroCupom 06N N\u00famero do cupom (fiscal ou n\u00e3o fiscal) NumeroControle 06N NSU (n\u00famero seq\u00fcencial \u00fanico) TipoBeneficio 01N [ 1 ] Refei\u00e7\u00e3o [ 2 ] Alimenta\u00e7\u00e3o NumeroBeneficio 19N N\u00famero do Benef\u00edcio PermiteAlteracao 01A [ S ] Permite alterar valores informados (exceto ValorTransacao) [ N ] N\u00e3o Permite alterar valores informados Reservado 255A 02I [ 00 ] Transa\u00e7\u00e3o autorizada [ 11 ] Transa\u00e7\u00e3o n\u00e3o autorizada <p>[ 00 ] indica que n\u00e3o existiram restri\u00e7\u00f5es para a efetiva\u00e7\u00e3o da transa\u00e7\u00e3o.</p> <p>[ 11 ] indica que existiram restri\u00e7\u00f5es para a efetiva\u00e7\u00e3o da transa\u00e7\u00e3o. O sistema de automa\u00e7\u00e3o deve retornar \u00e0 rotina de recebimento de valores, pois a transa\u00e7\u00e3o solicitada n\u00e3o foi autorizada, n\u00e3o sendo v\u00e1lida como forma de pagamento.</p>"},{"location":"pages/Transacoes/Transacoes/#transacao-cartao-frota","title":"Transa\u00e7\u00e3o Cart\u00e3o Frota","text":""},{"location":"pages/Transacoes/Transacoes/#solicitacao-transacao-cartao-frota","title":"Solicita\u00e7\u00e3o Transa\u00e7\u00e3o Cart\u00e3o Frota","text":"<pre><code>int DIRETIVA_CALLBACK TransacaoCartaoFrota(char *pValorTransacao, char *pNumeroCupom, char *pNumeroControle)\n</code></pre> <pre><code>int DIRETIVA_CALLBACK TransacaoCartaoFrotaCompleta(char *pValorTransacao, char *pNumeroCupom, char *pNumeroControle, char *pTipoProduto, char *pCodigoVeiculo, char *pCodigoCondutor, char *pQuilometragem, char *pDadosServicos, char *pPermiteAlteracao, char *pReservado)\n</code></pre> <pre><code>int DIRETIVA_CALLBACK ConfirmaCartaoFrota(char *pNumeroControle)\n</code></pre> <p>Os campos est\u00e3o abaixo caracterizados.</p> Campo Tamanho Descri\u00e7\u00e3o ValorTransacao 12N 10 inteiros, 2 decimais NumeroCupom 06N N\u00famero do cupom (fiscal ou n\u00e3o fiscal) NumeroControle 06N NSU (n\u00famero seq\u00fcencial \u00fanico) TipoProduto 01N [ 0 ] VCE [ 1 ] Pr\u00e9-Pago(MaxiFrota) [ 2 ] P\u00f3s-Pago(MaxiFrota). Deve ser informado zero '0' para as demais redes CodigoVeiculo 20N C\u00f3digo do ve\u00edculo (n\u00e3o utilizado para rede Ticket e TicketLog, informar zeros '0') CodigoCondutor 15A C\u00f3digo do condutor (3ia de 2 a 11 d\u00edgitos) Quilometragem 10N Od\u00f4metro do ve\u00edculo (Policard e 3ia m\u00e1ximo de 8 d\u00edgitos) DadosServicos*este par\u00e2metro \u00e9 limitado em 20 registros para os layouts 2 e 4 e 31 registros para os demais* os dados dos servi\u00e7os devem ser informados conforme a especifica\u00e7\u00e3o ao lado (de acordo com o tipo e tamanho especificado) Dados dos servi\u00e7os fornecidos pela automa\u00e7\u00e3o e que devem ser enviados \u00e0 rede administradora (se esta exigir). Tabelas de especifica\u00e7\u00e3o a seguir.Clique aqui para visualizar as tabelas PermiteAlteracao \u2022 [ S ] Permite alterar valores informados (exceto ValorTransacao)\u2022 [ N ] N\u00e3o Permite alterar valores informados Reservado 255A \u2022 [1..11] CPF\u2022 [12..20] N\u00famero da Ordem Servi\u00e7o\u2022 [21..24] Placa do ve\u00edculo. (Utilizado na rede Ticket, nas demais redes informar zeros '0').\u2022 [25..33] Hor\u00edmetro ( Utilizado na rede Ticket e TicketLog.Enviar zeros '0' se transa\u00e7\u00e3o n\u00e3o utilizar este campo)\u2022 [34..34] Produto frota (Utilizado na rede Fit Card. Enviar zeros '0' se n\u00e3o utilizado)\u2022 [35..35] Indicativo de parametriza\u00e7\u00e3o para CPF E COD funcionario para br premia (0-N\u00e3o; 1-Sim), n\u00e3o utilizado TicketLog.\u2022 [36..38] C\u00f3digo Funcionario BRPREMIA, n\u00e3o utilizado TicketLog.\u2022 [39..45] Placa completa do ve\u00edculo no formato  sem separa\u00e7\u00e3o entre letras e numeros. Quando for informada uma placa v\u00e1lida a informa\u00e7\u00e3o [21..24] ser\u00e1 ignorada.\u2022 [46..50] C\u00f3digo da Rede, onde: 137-FitCard e 10000-Outras. (Rede TicketLog). Campo num\u00e9rico)\u2022 [51..60] Identifica\u00e7\u00e3o do ve\u00edculo na frota. (Campo num\u00e9rico)\u2022 [61..68] N\u00famero de registro do funcion\u00e1rio. (Campo num\u00e9rico)\u2022 [69..69] Tipo de operacao. 1 - Compra; 2 - Consulta Saldo; 3 - Recarga Status 02I \u2022 [ 00 ] Transa\u00e7\u00e3o autorizada\u2022 [ 11 ] Transa\u00e7\u00e3o n\u00e3o autorizada <p>DadosServicos - Especifica\u00e7\u00e3o</p> Campo Tamanho Descri\u00e7\u00e3o C\u00f3digoServi\u00e7o 03N 3 inteiros ValorUnit\u00e1rio 08N 6 Inteiros,2 Decimais Quantidade 08N 5 Inteiros,3 Decimais ValorTotal 12N 10 inteiros,2 decimais <p>DadosServicos - Especifica\u00e7\u00e3o Alternativa 1 (Ex: Rede3ia)</p> Campo Tamanho Descri\u00e7\u00e3o Especifica\u00e7\u00e3o 02A [@1] Tipo 1 C\u00f3digoServi\u00e7o 12N 12 inteiros Quantidade 08N 5 Inteiros, 3 Decimais ValorTotal 09N 7 inteiros, 2 decimais <p>DadosServicos - Especifica\u00e7\u00e3o Alternativa 2 (Ex: RedeTicket)</p> Campo Tamanho Descri\u00e7\u00e3o Especifica\u00e7\u00e3o 02A [@2] Tipo 2 RamoMercadoria 04N 4 Inteiros TipoMercadoria 04N 4 Inteiros C\u00f3digoMercadoria 05N 5 Inteiros Descri\u00e7\u00e3o Mercadoria 30A 30 caracteres (com espa\u00e7os a direita) Valor Unit\u00e1rio 08N 5 inteiros,2 Decimais Quantidade 08N 5 inteiros,2 Decimais Valor Total da mercadoria 12N 10 inteiros, 2 decimais Valor Desconto 12N 10 inteiros, 2 decimais Significado Campo Desconto 12N 0 = Valor em moeda,1 = Valor em percentagem (%) Valor Total com desconto 12N 10 inteiros, 2 Decimais <p>DadosServicos - Especifica\u00e7\u00e3o Alternativa 3 (Ex:Rede MaisAceito):</p> Campo Tamanho Descri\u00e7\u00e3o Especifica\u00e7\u00e3o 02A [@3] Tipo 3 C\u00f3digoServi\u00e7o 09N 3 bytes(c\u00f3d.grupo) 6 bytes (c\u00f3d.produto) Quantidade 08N 5 Inteiros,2 Decimais ValorTotal 10N 8 inteiros,2 Decimais <p>DadosServicos - Especifica\u00e7\u00e3o Alternativa 4 (Ex:Rede TicketLog):</p> Campo Tamanho Descri\u00e7\u00e3o Especifica\u00e7\u00e3o 02A [@4] Tipo 4 RamoMercadoria 04N 1-Abastecimento, 2-Troca de \u00d3leo,3-Servi\u00e7os Diversos TipoMercadoria 04N Para combustiveis informar o c\u00f3digo do tipo, ex.: 1 - gasolina comum, 2 - gasolina aditivada, 3 - diesel. Para   os demais produtos informar '0000' C\u00f3digoMercadoriaServico 12N C\u00f3digo referente ao produto vendido Quantidade 08N 5 Inteiros,3 Decimais ValorTotal 10N 10 inteiros,2 Decimais <p>OBS. 1: Os dados num\u00e9ricos devem ser preenchidos com zeros a esquerda</p> <p>OBS. 2: Nas transa\u00e7\u00f5es TicketLog, se forem informados mais produtos que a rede solicitar, a transa\u00e7\u00e3o ser\u00e1 cancelada e retornara um erro.</p> <p>Exemplo para Rede Ticket:</p> <p>\u2022 Transa\u00e7\u00e3o de 3,00 reais com Desconto em Moeda de 1 real:</p> <p>\u2022 Especifica\u00e7\u00e3o: @2</p> <p>\u2022 Ramo Mercadoria: 0001</p> <p>\u2022 Tipo Mercadoria: 0001</p> <p>\u2022 C\u00f3digo Mercadoria: 00103</p> <p>\u2022 Descri\u00e7\u00e3o Mercadoria: Gasolina Premium</p> <p>\u2022 Valor Unit\u00e1rio: 00001000</p> <p>\u2022 Quantidade: 00003000</p> <p>\u2022 Valor Total Mercadoria 0000000300</p> <p>\u2022 Valor Desconto 0000000100</p> <p>\u2022 Significado do campo 0</p> <p>\u2022 Valor Total com Desconto 0000000200</p> <p>\u2022 Transa\u00e7\u00e3o de 3,00 reais com Desconto em Percentual de 10%:</p> <p>\u2022 Especifica\u00e7\u00e3o: @2</p> <p>\u2022 Ramo Mercadoria: 0001</p> <p>\u2022 Tipo Mercadoria: 0001</p> <p>\u2022 C\u00f3digo Mercadoria: 00103</p> <p>\u2022 Descri\u00e7\u00e3o Mercadoria: Gasolina Premium</p> <p>\u2022 Valor Unit\u00e1rio: 00001000</p> <p>\u2022 Quantidade: 00003000</p> <p>\u2022 Valor Total Mercadoria 0000000300</p> <p>\u2022 Valor Desconto 0000001000</p> <p>\u2022 Significado do campo 1</p> <p>\u2022 Valor Total com Desconto 0000000270</p> <p>Status [ 00 ] indica que n\u00e3o existiram restri\u00e7\u00f5es para a efetiva\u00e7\u00e3o da transa\u00e7\u00e3o.</p> <p>Status [ 11 ] indica que existiram restri\u00e7\u00f5es para a efetiva\u00e7\u00e3o da transa\u00e7\u00e3o. O sistema de automa\u00e7\u00e3o deve retornar \u00e0 rotina de recebimento de valores, pois a transa\u00e7\u00e3o solicitada n\u00e3o foi autorizada, n\u00e3o sendo v\u00e1lida como forma de pagamento.</p> <p>Obs: Para rede Ticket o campo ValorTransa\u00e7\u00e3o deve conter o valor total da transa\u00e7\u00e3o incluindo os descontos aplicados. No caso do exemplo acima da ticket o campo ValorTransacao deve ter valor de 2,00 reais.</p> <p>Os itens CPF e N\u00famero da Ordem de Servi\u00e7o do campo Reservado devem ser preenchidos quando for utilizada a Rede Policard.</p> <p>No campo reservado as informa\u00e7\u00f5es n\u00e3o dispon\u00edveis devem ser preechidas com brancos ou zeros de acordo com o seu tipo de dado.</p> <p>Detalhamento do campo DadosServi\u00e7o para Rede Redecard .</p> <p>O campo C\u00f3digoServi\u00e7o poder\u00e1 ser:</p> <p>1-Abastecimento, 2-Troca de \u00d3leo, 3-Lavagem, 4-Ped\u00e1gio, 5-Outros.</p> <p>O Campo Quantidade representar\u00e1, quando for o caso, os Litros.</p> <p>Detalhamento do campo DadosServi\u00e7o para Rede Policard .</p> <p>Existem tr\u00eas tipos poss\u00edveis e, para cada tipo, produtos que podem ser selecionados.</p> <p>Tipos: 01-Tipos de Combust\u00edveis 02-Tipos de Servi\u00e7o 03-Manuten\u00e7\u00e3o (sem produtos).</p> <p>Tabela de Produtos:</p> 01 Tipos de Combust\u00edveis: 02 Tipos de Servi\u00e7o 01 - Gasolina Comum 01 - Troca de \u00f3leo 02 - Gasolina Aditivada 02 - Filtro de Ar 03 - \u00c1lcool 03 - Filtro de \u00f3leo 04 - Diesel Comum 04 - Filtro de combust\u00edvel 05 - Diesel Aditivado 05 - Flu\u00eddo de Freio 06 - GNV 06 - Flu\u00eddo de Radiador 07 - GLP 07 - Extintor 08 - Lavagem Expressa 09 - Lavagem Completa 10 - Conserto de pneu 11 \u2013 Montagem/desmonte Pneu 12 - Balanceamento 13 - Geometria 14 - Graxa 15 - Querosene 16 \u2013 Outros servi\u00e7os <p>A montagem da estrutura DadosServi\u00e7os deve ser feita da seguinte maneira:</p> <p>O campo C\u00f3digoServi\u00e7o ter\u00e1 o c\u00f3digo do tipo e do produto. Ex: 102, onde 1 indica Tipo de Combust\u00edvel e 02 indica Gasolina Aditivada.</p> <p>O campo ValorUnit\u00e1rio e Valortotal ter\u00e3o valor zero.</p> <p>O campo Quantidade indicar\u00e1 Litros (para caso 01-Tipo de Combust\u00edveis) ou Quantidade (para caso 02-Tipos de Servi\u00e7o).</p> <p>Se for escolhido o tipo 03-Manuten\u00e7\u00e3o deve ser colocado em C\u00f3digoServi\u00e7o o valor 300 e os demais campos zerados. Neste tipo deve-se preencher o campo N\u00famero da Ordem Servi\u00e7o do campo reservado.</p> <p>Detalhamento do campo DadosServico para Rede Ticket .</p> <p>Segue abaixo os registros da tabela da Ticket com Ramo, Tipo e C\u00f3digo da Mercadoria. Devem ser utilizados apenas os campos C\u00f3digo e Mercadoria para passar respectivamente nos campos \u201cC\u00f3digo Mercadoria\u201d e \u201cDescri\u00e7\u00e3o Mercadoria\u201d da estrutura DadosServico.</p> C\u00f3digo Ramo Tipo Nome do Tipo C\u00f3d. Mercadoria 1 POSTO DE COMBUST 1 COMBUSTIVEL 00101 GASOLINA COMUM 1 POSTO DE COMBUST 1 COMBUSTIVEL 00102 GASOLINA ADITIV 1 POSTO DE COMBUST 1 COMBUSTIVEL 00103 GASOLINA PREMIUM 1 POSTO DE COMBUST 1 COMBUSTIVEL 00104 ETANOL COMUM 1 POSTO DE COMBUST 1 COMBUSTIVEL 00105 ETANOL ADITIVADO 1 POSTO DE COMBUST 1 COMBUSTIVEL 00106 DIESEL COMUM 1 POSTO DE COMBUST 1 COMBUSTIVEL 00107 DIESEL ADITIVADO 1 POSTO DE COMBUST 1 COMBUSTIVEL 00108 GAS NATURAL 1 POSTO DE COMBUST 1 COMBUSTIVEL 00109 BIODIESEL 1 POSTO DE COMBUST 1 COMBUSTIVEL 00110 QUEROSENE 1 POSTO DE COMBUST 1 COMBUSTIVEL 00111 METANOL 1 POSTO DE COMBUST 1 COMBUSTIVEL 00112 DIESEL MARITIMO 1 POSTO DE COMBUST 1 COMBUSTIVEL 00113 DIESEL S50 1 POSTO DE COMBUST 1 COMBUSTIVEL 00114 GLP 1 POSTO DE COMBUST 1 COMBUSTIVEL 00115 DIESEL BS 500 1 POSTO DE COMBUST 1 COMBUSTIVEL 00116 DIESEL S 10 1 POSTO DE COMBUST 2 LIMPEZA 00133 LAVAGEM SIMPLES 1 POSTO DE COMBUST 2 LIMPEZA 00134 LAVAGEM COMPLETA 1 POSTO DE COMBUST 2 LIMPEZA 00135 LAVAGEM ESPECIAL 1 POSTO DE COMBUST 2 LIMPEZA 00136 POLIMENTO CERA 1 POSTO DE COMBUST 2 LIMPEZA 00137 POLIMENTO MASSA 1 POSTO DE COMBUST 2 LIMPEZA 00138 CRISTALIZACAO 1 POSTO DE COMBUST 2 LIMPEZA 00139 OUTRO 1 POSTO DE COMBUST 3 ADIT E LUBRIFIC 00140 TROCA OLEO MOTOR 1 POSTO DE COMBUST 3 ADIT E LUBRIFIC 00141 COMPL OLEO MOTOR 1 POSTO DE COMBUST 3 ADIT E LUBRIFIC 00142 ADIT OLEO MOTOR 1 POSTO DE COMBUST 3 ADIT E LUBRIFIC 00143 TR OLEO TRANSMIS 1 POSTO DE COMBUST 3 ADIT E LUBRIFIC 00144 COMPL OLEO TRANS 1 POSTO DE COMBUST 3 ADIT E LUBRIFIC 00145 TR OLEO DIFERENC 1 POSTO DE COMBUST 3 ADIT E LUBRIFIC 00146 COMPL OLEO DIFER 1 POSTO DE COMBUST 3 ADIT E LUBRIFIC 00147 TROCA OLEO DIREC 1 POSTO DE COMBUST 3 ADIT E LUBRIFIC 00148 COMPL OLEO DIREC 1 POSTO DE COMBUST 3 ADIT E LUBRIFIC 00149 TR FLUIDO FREIO 1 POSTO DE COMBUST 3 ADIT E LUBRIFIC 00150 COMP FLUID FREIO 1 POSTO DE COMBUST 3 ADIT E LUBRIFIC 00151 TROCA ADIT RAD 1 POSTO DE COMBUST 3 ADIT E LUBRIFIC 00152 COMPL AD RAD 1 POSTO DE COMBUST 3 ADIT E LUBRIFIC 00153 ADITIVO COMBUST 1 POSTO DE COMBUST 3 ADIT E LUBRIFIC 00154 ENGRAXAMENTO 1 POSTO DE COMBUST 3 ADIT E LUBRIFIC 00155 OUTROS 1 POSTO DE COMBUST 3 ADIT E LUBRIFIC 00214 ARLA A GRANEL 1 POSTO DE COMBUST 3 ADIT E LUBRIFIC 00222 OLEO DOIS TEMPOS 1 POSTO DE COMBUST 3 ADIT E LUBRIFIC 00223 ARLA 20 LTS 1 POSTO DE COMBUST 3 ADIT E LUBRIFIC 00224 ARLA 10 LTS 1 POSTO DE COMBUST 4 FILTROS 00156 TR FILTRO OLEO 1 POSTO DE COMBUST 4 FILTROS 00157 TROCA FILTRO AR 1 POSTO DE COMBUST 4 FILTROS 00158 TR FILTRO COMB 1 POSTO DE COMBUST 4 FILTROS 00159 OUTROS 1 POSTO DE COMBUST 5 EQUIP ELETRICOS 00160 TROCA BATERIA 1 POSTO DE COMBUST 5 EQUIP ELETRICOS 00161 TROCA CORREIA 1 POSTO DE COMBUST 5 EQUIP ELETRICOS 00162 TROCA LAMPADA 1 POSTO DE COMBUST 5 EQUIP ELETRICOS 00163 TROCA FUSIVEL 1 POSTO DE COMBUST 5 EQUIP ELETRICOS 00164 OUTROS 1 POSTO DE COMBUST 6 EQUIP DIVERSOS 00165 EXTINTOR INCEN 1 POSTO DE COMBUST 6 EQUIP DIVERSOS 00166 TROCA PALHETA 1 POSTO DE COMBUST 6 EQUIP DIVERSOS 00167 CHAVEIRO 1 POSTO DE COMBUST 6 EQUIP DIVERSOS 00168 OUTROS 1 POSTO DE COMBUST 7 BORRACHARIA 00169 TROCA PNEU 1 POSTO DE COMBUST 7 BORRACHARIA 00170 CONSERTO PNEU 1 POSTO DE COMBUST 7 BORRACHARIA 00171 CALIBRAGEM NITRO 1 POSTO DE COMBUST 7 BORRACHARIA 00172 TROCA CAMARA 1 POSTO DE COMBUST 7 BORRACHARIA 00173 CONSERTO CAMARA 1 POSTO DE COMBUST 7 BORRACHARIA 00174 TROCA VALVULA 1 POSTO DE COMBUST 7 BORRACHARIA 00175 CONSERTO DE RODA 1 POSTO DE COMBUST 7 BORRACHARIA 00176 OUTROS 2 LAVA RAPIDO 2 LIMPEZA 00133 LAVAGEM SIMPLES 2 LAVA RAPIDO 2 LIMPEZA 00134 LAVAGEM COMPLETA 2 LAVA RAPIDO 2 LIMPEZA 00135 LAVAGEM ESPECIAL 2 LAVA RAPIDO 2 LIMPEZA 00136 POLIMENTO CERA 2 LAVA RAPIDO 2 LIMPEZA 00137 POLIMENTO MASSA 2 LAVA RAPIDO 2 LIMPEZA 00138 CRISTALIZACAO 2 LAVA RAPIDO 2 LIMPEZA 00139 OUTRO 3 MANUT E PECAS 8 PECAS E SERVICOS 00177 PECAS E SERVICOS 4 BORRACHARIA 7 BORRACHARIA 00169 TROCA PNEU 4 BORRACHARIA 7 BORRACHARIA 00170 CONSERTO PNEU 4 BORRACHARIA 7 BORRACHARIA 00171 CALIBRAGEM NITRO 4 BORRACHARIA 7 BORRACHARIA 00172 TROCA CAMARA 4 BORRACHARIA 7 BORRACHARIA 00173 CONSERTO CAMARA 4 BORRACHARIA 7 BORRACHARIA 00174 TROCA VALVULA 4 BORRACHARIA 7 BORRACHARIA 00175 CONSERTO DE RODA 4 BORRACHARIA 7 BORRACHARIA 00176 OUTROS 5 HOTEL 9 HOTEL 00178 DIARIA 5 HOTEL 9 HOTEL 00179 OUTROS 6 ESTACIONAMENTO 10 ESTACIONAMENTO 00180 HORA 6 ESTACIONAMENTO 10 ESTACIONAMENTO 00181 DIARIA 6 ESTACIONAMENTO 10 ESTACIONAMENTO 00182 MENSALIDADE 6 ESTACIONAMENTO 10 ESTACIONAMENTO 00183 OUTROS 7 EST INT POSTO 1 COMBUSTIVEL 00101 GASOLINA COMUM 7 EST INT POSTO 1 COMBUSTIVEL 00102 GASOLINA ADITIV 7 EST INT POSTO 1 COMBUSTIVEL 00103 GASOLINA PREMIUM 7 EST INT POSTO 1 COMBUSTIVEL 00104 ETANOL COMUM 7 EST INT POSTO 1 COMBUSTIVEL 00105 ETANOL ADITIVADO 7 EST INT POSTO 1 COMBUSTIVEL 00106 DIESEL COMUM 7 EST INT POSTO 1 COMBUSTIVEL 00107 DIESEL ADITIVADO 7 EST INT POSTO 1 COMBUSTIVEL 00108 GAS NATURAL 7 EST INT POSTO 1 COMBUSTIVEL 00109 BIODIESEL 7 EST INT POSTO 1 COMBUSTIVEL 00110 QUEROSENE 7 EST INT POSTO 1 COMBUSTIVEL 00111 METANOL 7 EST INT POSTO 1 COMBUSTIVEL 00112 DIESEL MARITIMO 7 EST INT POSTO 1 COMBUSTIVEL 00113 DIESEL S50 7 EST INT POSTO 1 COMBUSTIVEL 00114 GLP 7 EST INT POSTO 1 COMBUSTIVEL 00115 DIESEL BS 500 7 EST INT POSTO 1 COMBUSTIVEL 00116 DIESEL S 10 7 EST INT POSTO 2 LIMPEZA 00133 LAVAGEM SIMPLES 7 EST INT POSTO 2 LIMPEZA 00134 LAVAGEM COMPLETA 7 EST INT POSTO 2 LIMPEZA 00135 LAVAGEM ESPECIAL 7 EST INT POSTO 2 LIMPEZA 00136 POLIMENTO CERA 7 EST INT POSTO 2 LIMPEZA 00137 POLIMENTO MASSA 7 EST INT POSTO 2 LIMPEZA 00139 OUTRO 7 EST INT POSTO 2 LIMPEZA 00138 CRISTALIZACAO 7 EST INT POSTO 3 ADIT E LUBRIFIC 00140 TROCA OLEO MOTOR 7 EST INT POSTO 3 ADIT E LUBRIFIC 00141 COMPL OLEO MOTOR 7 EST INT POSTO 3 ADIT E LUBRIFIC 00142 ADIT OLEO MOTOR 7 EST INT POSTO 3 ADIT E LUBRIFIC 00143 TR OLEO TRANSMIS 7 EST INT POSTO 3 ADIT E LUBRIFIC 00144 COMPL OLEO TRANS 7 EST INT POSTO 3 ADIT E LUBRIFIC 00145 TR OLEO DIFERENC 7 EST INT POSTO 3 ADIT E LUBRIFIC 00146 COMPL OLEO DIFER 7 EST INT POSTO 3 ADIT E LUBRIFIC 00147 TROCA OLEO DIREC 7 EST INT POSTO 3 ADIT E LUBRIFIC 00148 COMPL OLEO DIREC 7 EST INT POSTO 3 ADIT E LUBRIFIC 00149 TR FLUIDO FREIO 7 EST INT POSTO 3 ADIT E LUBRIFIC 00150 COMP FLUID FREIO 7 EST INT POSTO 3 ADIT E LUBRIFIC 00151 TROCA ADIT RAD 7 EST INT POSTO 3 ADIT E LUBRIFIC 00152 COMPL AD RAD 7 EST INT POSTO 3 ADIT E LUBRIFIC 00153 ADITIVO COMBUST 7 EST INT POSTO 3 ADIT E LUBRIFIC 00154 ENGRAXAMENTO 7 EST INT POSTO 3 ADIT E LUBRIFIC 00155 OUTROS 7 EST INT POSTO 3 ADIT E LUBRIFIC 00214 ARLA A GRANEL 7 EST INT POSTO 3 ADIT E LUBRIFIC 00222 OLEO DOIS TEMPOS 7 EST INT POSTO 3 ADIT E LUBRIFIC 00223 ARLA 20 LTS 7 EST INT POSTO 3 ADIT E LUBRIFIC 00224 ARLA 10 LTS 7 EST INT POSTO 4 FILTROS 00156 TR FILTRO OLEO 7 EST INT POSTO 4 FILTROS 00157 TROCA FILTRO AR 7 EST INT POSTO 4 FILTROS 00158 TR FILTRO COMB 7 EST INT POSTO 4 FILTROS 00159 OUTROS 7 EST INT POSTO 5 EQUIP ELETRICOS 00160 TROCA BATERIA 7 EST INT POSTO 5 EQUIP ELETRICOS 00161 TROCA CORREIA 7 EST INT POSTO 5 EQUIP ELETRICOS 00162 TROCA LAMPADA 7 EST INT POSTO 5 EQUIP ELETRICOS 00163 TROCA FUSIVEL 7 EST INT POSTO 5 EQUIP ELETRICOS 00164 OUTROS 7 EST INT POSTO 6 EQUIP ELETRICOS 00165 EXTINTOR INCEN 7 EST INT POSTO 6 EQUIP ELETRICOS 00166 TROCA PALHETA 7 EST INT POSTO 6 EQUIP ELETRICOS 00167 CHAVEIRO 7 EST INT POSTO 6 EQUIP ELETRICOS 00168 OUTROS 8 EST INT OFICINA 8 PECAS E SERVICOS 00177 PECAS E SERVICOS 9 EST INT ALMOXARI 11 ALMOXARIFADO 00184 ALMOXARIFADO 10 EST INT OUTROS 12 OUTROS 00185 OUTROS 10 EST INT OUTROS 15 LUBRIFICANTES 00189 15W40 10 EST INT OUTROS 15 LUBRIFICANTES 00190 85W140 10 EST INT OUTROS 15 LUBRIFICANTES 00191 AT 10 EST INT OUTROS 15 LUBRIFICANTES 00192 FLUIDO FREIO 10 EST INT OUTROS 15 LUBRIFICANTES 00193 FTA 10 EST INT OUTROS 15 LUBRIFICANTES 00194 H220S 10 EST INT OUTROS 15 LUBRIFICANTES 00195 LUBR VL 10 EST INT OUTROS 15 LUBRIFICANTES 00196 M40 10 EST INT OUTROS 15 LUBRIFICANTES 00197 PAROIL 10 EST INT OUTROS 15 LUBRIFICANTES 00198 S68 10 EST INT OUTROS 15 LUBRIFICANTES 00199 S150 10 EST INT OUTROS 15 LUBRIFICANTES 00200 S460 10 EST INT OUTROS 15 LUBRIFICANTES 00201 SAE80 10 EST INT OUTROS 15 LUBRIFICANTES 00202 SAE90 10 EST INT OUTROS 15 LUBRIFICANTES 00203 SAE90LS 10 EST INT OUTROS 15 LUBRIFICANTES 00204 T68 10 EST INT OUTROS 15 LUBRIFICANTES 00205 TC50 10 EST INT OUTROS 15 LUBRIFICANTES 00206 WBF100 10 EST INT OUTROS 15 LUBRIFICANTES 00207 ADITIVO RADIADOR 10 EST INT OUTROS 16 GRAXA 00208 GRAXA 10 EST INT OUTROS 17 EMULSSAO 00209 EMULSSAO IMPR 10 EST INT OUTROS 17 EMULSSAO 00210 EMULSSAO RR 10 EST INT OUTROS 18 CAP 00211 CAP 30 45 10 EST INT OUTROS 18 CAP 00212 CAP POL 10 EST INT OUTROS 18 CAP 00213 CAP OUTROS 12 TAXI 1 COMBUSTIVEL 00101 GASOLINA COMUM 12 TAXI 1 COMBUSTIVEL 00102 GASOLINA ADITIV 12 TAXI 1 COMBUSTIVEL 00103 GASOLINA PREMIUM 12 TAXI 1 COMBUSTIVEL 00104 ETANOL COMUM 12 TAXI 1 COMBUSTIVEL 00105 ETANOL ADITIVADO 12 TAXI 1 COMBUSTIVEL 00106 DIESEL COMUM 12 TAXI 1 COMBUSTIVEL 00107 DIESEL ADITIVADO 12 TAXI 1 COMBUSTIVEL 00108 GAS NATURAL 12 TAXI 1 COMBUSTIVEL 00109 BIODIESEL 12 TAXI 1 COMBUSTIVEL 00110 QUEROSENE 12 TAXI 1 COMBUSTIVEL 00111 METANOL 12 TAXI 1 COMBUSTIVEL 00112 DIESEL MARITIMO 12 TAXI 1 COMBUSTIVEL 00113 DIESEL S50 12 TAXI 1 COMBUSTIVEL 00114 GLP 12 TAXI 1 COMBUSTIVEL 00115 DIESEL BS 500 12 TAXI 1 COMBUSTIVEL 00116 DIESEL S 10 12 TAXI 2 LIMPEZA 00133 LAVAGEM SIMPLES 12 TAXI 2 LIMPEZA 00134 LAVAGEM COMPLETA 12 TAXI 2 LIMPEZA 00135 LAVAGEM ESPECIAL 12 TAXI 2 LIMPEZA 00136 POLIMENTO CERA 12 TAXI 2 LIMPEZA 00137 POLIMENTO MASSA 12 TAXI 2 LIMPEZA 00138 CRISTALIZACAO 12 TAXI 2 LIMPEZA 00139 OUTRO 12 TAXI 3 ADIT E LUBRIFIC 00140 TROCA OLEO MOTOR 12 TAXI 3 ADIT E LUBRIFIC 00141 COMPL OLEO MOTOR 12 TAXI 3 ADIT E LUBRIFIC 00142 ADIT OLEO MOTOR 12 TAXI 3 ADIT E LUBRIFIC 00143 TR OLEO TRANSMIS 12 TAXI 3 ADIT E LUBRIFIC 00144 COMPL OLEO TRANS 12 TAXI 3 ADIT E LUBRIFIC 00145 TR OLEO DIFERENC 12 TAXI 3 ADIT E LUBRIFIC 00146 COMPL OLEO DIFER 12 TAXI 3 ADIT E LUBRIFIC 00147 TROCA OLEO DIREC 12 TAXI 3 ADIT E LUBRIFIC 00148 COMPL OLEO DIREC 12 TAXI 3 ADIT E LUBRIFIC 00149 TR FLUIDO FREIO 12 TAXI 3 ADIT E LUBRIFIC 00150 COMP FLUID FREIO 12 TAXI 3 ADIT E LUBRIFIC 00151 TROCA ADIT RAD 12 TAXI 3 ADIT E LUBRIFIC 00152 COMPL AD RAD 12 TAXI 3 ADIT E LUBRIFIC 00153 ADITIVO COMBUST 12 TAXI 3 ADIT E LUBRIFIC 00154 ENGRAXAMENTO 12 TAXI 3 ADIT E LUBRIFIC 00155 OUTROS 12 TAXI 3 ADIT E LUBRIFIC 00214 ARLA A GRANEL 12 TAXI 3 ADIT E LUBRIFIC 00222 OLEO DOIS TEMPOS 12 TAXI 3 ADIT E LUBRIFIC 00223 ARLA 20 LTS 12 TAXI 3 ADIT E LUBRIFIC 00224 ARLA 10 LTS 12 TAXI 4 FILTROS 00156 TR FILTRO OLEO 12 TAXI 4 FILTROS 00157 TROCA FILTRO AR 12 TAXI 4 FILTROS 00158 TR FILTRO COMB 12 TAXI 4 FILTROS 00159 OUTROS 12 TAXI 5 EQUIP ELETRICOS 00160 TROCA BATERIA 12 TAXI 5 EQUIP ELETRICOS 00161 TROCA CORREIA 12 TAXI 5 EQUIP ELETRICOS 00162 TROCA LAMPADA 12 TAXI 5 EQUIP ELETRICOS 00163 TROCA FUSIVEL 12 TAXI 5 EQUIP ELETRICOS 00164 OUTROS 12 TAXI 6 EQUIP DIVERSOS 00165 EXTINTOR INCEN 12 TAXI 6 EQUIP DIVERSOS 00166 TROCA PALHETA 12 TAXI 6 EQUIP DIVERSOS 00167 CHAVEIRO 12 TAXI 6 EQUIP DIVERSOS 00168 OUTROS 12 TAXI 7 BORRACHARIA 00169 TROCA PNEU 12 TAXI 7 BORRACHARIA 00170 CONSERTO PNEU 12 TAXI 7 BORRACHARIA 00171 CALIBRAGEM NITRO 12 TAXI 7 BORRACHARIA 00172 TROCA CAMARA 12 TAXI 7 BORRACHARIA 00173 CONSERTO CAMARA 12 TAXI 7 BORRACHARIA 00174 TROCA VALVULA 12 TAXI 7 BORRACHARIA 00175 CONSERTO DE RODA 12 TAXI 7 BORRACHARIA 00176 OUTROS 12 TAXI 8 PECAS E SERVICOS 00177 PECAS E SERVICOS 12 TAXI 9 HOTEL 00178 DIARIA 12 TAXI 9 HOTEL 00179 OUTROS 12 TAXI 10 ESTACIONAMENTO 00180 HORA 12 TAXI 10 ESTACIONAMENTO 00181 DIARIA 12 TAXI 10 ESTACIONAMENTO 00182 MENSALIDADE 12 TAXI 10 ESTACIONAMENTO 00183 OUTROS 12 TAXI 11 ALMOXARIFADO 00184 ALMOXARIFADO 12 TAXI 12 OUTROS 00185 OUTROS 12 TAXI 13 TAXI 00186 TAXI 13 ASSISTENCIA 1 COMBUSTIVEL 00101 GASOLINA COMUM 13 ASSISTENCIA 1 COMBUSTIVEL 00102 GASOLINA ADITIV 13 ASSISTENCIA 1 COMBUSTIVEL 00103 GASOLINA PREMIUM 13 ASSISTENCIA 1 COMBUSTIVEL 00104 ETANOL COMUM 13 ASSISTENCIA 1 COMBUSTIVEL 00105 ETANOL ADITIVADO 13 ASSISTENCIA 1 COMBUSTIVEL 00106 DIESEL COMUM 13 ASSISTENCIA 1 COMBUSTIVEL 00107 DIESEL ADITIVADO 13 ASSISTENCIA 1 COMBUSTIVEL 00108 GAS NATURAL 13 ASSISTENCIA 1 COMBUSTIVEL 00109 BIODIESEL 13 ASSISTENCIA 1 COMBUSTIVEL 00110 QUEROSENE 13 ASSISTENCIA 1 COMBUSTIVEL 00111 METANOL 13 ASSISTENCIA 1 COMBUSTIVEL 00112 DIESEL MARITIMO 13 ASSISTENCIA 1 COMBUSTIVEL 00113 DIESEL S50 13 ASSISTENCIA 1 COMBUSTIVEL 00114 GLP 13 ASSISTENCIA 1 COMBUSTIVEL 00115 DIESEL BS 500 13 ASSISTENCIA 1 COMBUSTIVEL 00116 DIESEL S 10 13 ASSISTENCIA 2 LIMPEZA 00133 LAVAGEM SIMPLES 13 ASSISTENCIA 2 LIMPEZA 00134 LAVAGEM COMPLETA 13 ASSISTENCIA 2 LIMPEZA 00135 LAVAGEM ESPECIAL 13 ASSISTENCIA 2 LIMPEZA 00136 POLIMENTO CERA 13 ASSISTENCIA 2 LIMPEZA 00137 POLIMENTO MASSA 13 ASSISTENCIA 2 LIMPEZA 00138 CRISTALIZACAO 13 ASSISTENCIA 2 LIMPEZA 00139 OUTRO 13 ASSISTENCIA 3 ADIT E LUBRIFIC 00140 TROCA OLEO MOTOR 13 ASSISTENCIA 3 ADIT E LUBRIFIC 00141 COMPL OLEO MOTOR 13 ASSISTENCIA 3 ADIT E LUBRIFIC 00142 ADIT OLEO MOTOR 13 ASSISTENCIA 3 ADIT E LUBRIFIC 00143 TR OLEO TRANSMIS 13 ASSISTENCIA 3 ADIT E LUBRIFIC 00144 COMPL OLEO TRANS 13 ASSISTENCIA 3 ADIT E LUBRIFIC 00145 TR OLEO DIFERENC 13 ASSISTENCIA 3 ADIT E LUBRIFIC 00146 COMPL OLEO DIFER 13 ASSISTENCIA 3 ADIT E LUBRIFIC 00147 TROCA OLEO DIREC 13 ASSISTENCIA 3 ADIT E LUBRIFIC 00148 COMPL OLEO DIREC 13 ASSISTENCIA 3 ADIT E LUBRIFIC 00149 TR FLUIDO FREIO 13 ASSISTENCIA 3 ADIT E LUBRIFIC 00150 COMP FLUID FREIO 13 ASSISTENCIA 3 ADIT E LUBRIFIC 00151 TROCA ADIT RAD 13 ASSISTENCIA 3 ADIT E LUBRIFIC 00152 COMPL AD RAD 13 ASSISTENCIA 3 ADIT E LUBRIFIC 00153 ADITIVO COMBUST 13 ASSISTENCIA 3 ADIT E LUBRIFIC 00154 ENGRAXAMENTO 13 ASSISTENCIA 3 ADIT E LUBRIFIC 00155 OUTROS 13 ASSISTENCIA 3 ADIT E LUBRIFIC 00214 ARLA A GRANEL 13 ASSISTENCIA 3 ADIT E LUBRIFIC 00222 OLEO DOIS TEMPOS 13 ASSISTENCIA 3 ADIT E LUBRIFIC 00223 ARLA 20 LTS 13 ASSISTENCIA 3 ADIT E LUBRIFIC 00224 ARLA 10 LTS 13 ASSISTENCIA 4 FILTROS 00156 TR FILTRO OLEO 13 ASSISTENCIA 4 FILTROS 00157 TROCA FILTRO AR 13 ASSISTENCIA 4 FILTROS 00158 TR FILTRO COMB 13 ASSISTENCIA 4 FILTROS 00159 OUTROS 13 ASSISTENCIA 5 EQUIP ELETRICOS 00160 TROCA BATERIA 13 ASSISTENCIA 5 EQUIP ELETRICOS 00161 TROCA CORREIA 13 ASSISTENCIA 5 EQUIP ELETRICOS 00162 TROCA LAMPADA 13 ASSISTENCIA 5 EQUIP ELETRICOS 00163 TROCA FUSIVEL 13 ASSISTENCIA 5 EQUIP ELETRICOS 00164 OUTROS 13 ASSISTENCIA 6 EQUIP DIVERSOS 00165 EXTINTOR INCEN 13 ASSISTENCIA 6 EQUIP DIVERSOS 00166 TROCA PALHETA 13 ASSISTENCIA 6 EQUIP DIVERSOS 00167 CHAVEIRO 13 ASSISTENCIA 6 EQUIP DIVERSOS 00168 OUTROS 13 ASSISTENCIA 7 BORRACHARIA 00169 TROCA PNEU 13 ASSISTENCIA 7 BORRACHARIA 00170 CONSERTO PNEU 13 ASSISTENCIA 7 BORRACHARIA 00171 CALIBRAGEM NITRO 13 ASSISTENCIA 7 BORRACHARIA 00172 TROCA CAMARA 13 ASSISTENCIA 7 BORRACHARIA 00173 CONSERTO CAMARA 13 ASSISTENCIA 7 BORRACHARIA 00174 TROCA VALVULA 13 ASSISTENCIA 7 BORRACHARIA 00175 CONSERTO DE RODA 13 ASSISTENCIA 7 BORRACHARIA 00176 OUTROS 13 ASSISTENCIA 8 PECAS E SERVICOS 00177 PECAS E SERVICOS 13 ASSISTENCIA 9 HOTEL 00178 DIARIA 13 ASSISTENCIA 9 HOTEL 00179 OUTROS 13 ASSISTENCIA 10 ESTACIONAMENTO 00180 HORA 13 ASSISTENCIA 10 ESTACIONAMENTO 00181 DIARIA 13 ASSISTENCIA 10 ESTACIONAMENTO 00182 MENSALIDADE 13 ASSISTENCIA 10 ESTACIONAMENTO 00183 OUTROS 13 ASSISTENCIA 11 ALMOXARIFADO 00184 ALMOXARIFADO 13 ASSISTENCIA 12 OUTROS 00185 OUTROS 13 ASSISTENCIA 13 TAXI 00186 TAXI 13 ASSISTENCIA 14 ASSISTENCIA 00188 ASSISTEN CIA 15 CENTRAL DE SERV 1 COMBUSTIVEL 00101 GASOLINA COMUM 15 CENTRAL DE SERV 1 COMBUSTIVEL 00102 GASOLINA ADITIV 15 CENTRAL DE SERV 1 COMBUSTIVEL 00103 GASOLINA PREMIUM 15 CENTRAL DE SERV 1 COMBUSTIVEL 00104 ETANOL COMUM 15 CENTRAL DE SERV 1 COMBUSTIVEL 00105 ETANOL ADITIVADO 15 CENTRAL DE SERV 1 COMBUSTIVEL 00106 DIESEL COMUM 15 CENTRAL DE SERV 1 COMBUSTIVEL 00107 DIESEL ADITIVADO 15 CENTRAL DE SERV 1 COMBUSTIVEL 00108 GAS NATURAL 15 CENTRAL DE SERV 1 COMBUSTIVEL 00109 BIODIESEL 15 CENTRAL DE SERV 1 COMBUSTIVEL 00110 QUEROSENE 15 CENTRAL DE SERV 1 COMBUSTIVEL 00111 METANOL 15 CENTRAL DE SERV 1 COMBUSTIVEL 00112 DIESEL MARITIMO 15 CENTRAL DE SERV 1 COMBUSTIVEL 00113 DIESEL S50 15 CENTRAL DE SERV 1 COMBUSTIVEL 00114 GLP 15 CENTRAL DE SERV 1 COMBUSTIVEL 00115 DIESEL BS 500 15 CENTRAL DE SERV 1 COMBUSTIVEL 00116 DIESEL S 10 15 CENTRAL DE SERV 2 LIMPEZA 00133 LAVAGEM SIMPLES 15 CENTRAL DE SERV 2 LIMPEZA 00134 LAVAGEM COMPLETA 15 CENTRAL DE SERV 2 LIMPEZA 00135 LAVAGEM ESPECIAL 15 CENTRAL DE SERV 2 LIMPEZA 00136 POLIMENTO CERA 15 CENTRAL DE SERV 2 LIMPEZA 00137 POLIMENTO MASSA 15 CENTRAL DE SERV 2 LIMPEZA 00138 CRISTALIZACAO 15 CENTRAL DE SERV 2 LIMPEZA 00139 OUTRO 15 CENTRAL DE SERV 3 ADIT E LUBRIFIC 00140 TROCA OLEO MOTOR 15 CENTRAL DE SERV 3 ADIT E LUBRIFIC 00141 COMPL OLEO MOTOR 15 CENTRAL DE SERV 3 ADIT E LUBRIFIC 00142 ADIT OLEO MOTOR 15 CENTRAL DE SERV 3 ADIT E LUBRIFIC 00143 TR OLEO TRANSMIS 15 CENTRAL DE SERV 3 ADIT E LUBRIFIC 00144 COMPL OLEO TRANS 15 CENTRAL DE SERV 3 ADIT E LUBRIFIC 00145 TR OLEO DIFERENC 15 CENTRAL DE SERV 3 ADIT E LUBRIFIC 00146 COMPL OLEO DIFER 15 CENTRAL DE SERV 3 ADIT E LUBRIFIC 00147 TROCA OLEO DIREC 15 CENTRAL DE SERV 3 ADIT E LUBRIFIC 00148 COMPL OLEO DIREC 15 CENTRAL DE SERV 3 ADIT E LUBRIFIC 00149 TR FLUIDO FREIO 15 CENTRAL DE SERV 3 ADIT E LUBRIFIC 00150 COMP FLUID FREIO 15 CENTRAL DE SERV 3 ADIT E LUBRIFIC 00151 TROCA ADIT RAD 15 CENTRAL DE SERV 3 ADIT E LUBRIFIC 00152 COMPL AD RAD 15 CENTRAL DE SERV 3 ADIT E LUBRIFIC 00153 ADITIVO COMBUST 15 CENTRAL DE SERV 3 ADIT E LUBRIFIC 00154 ENGRAXAMENTO 15 CENTRAL DE SERV 3 ADIT E LUBRIFIC 00155 OUTROS 15 CENTRAL DE SERV 3 ADIT E LUBRIFIC 00214 ARLA A GRANEL 15 CENTRAL DE SERV 3 ADIT E LUBRIFIC 00222 OLEO DOIS TEMPOS 15 CENTRAL DE SERV 3 ADIT E LUBRIFIC 00223 ARLA 20 LTS 15 CENTRAL DE SERV 3 ADIT E LUBRIFIC 00224 ARLA 10 LTS 15 CENTRAL DE SERV 4 FILTROS 00156 TR FILTRO OLEO 15 CENTRAL DE SERV 4 FILTROS 00157 TROCA FILTRO AR 15 CENTRAL DE SERV 4 FILTROS 00158 TR FILTRO COMB 15 CENTRAL DE SERV 4 FILTROS 00159 OUTROS 15 CENTRAL DE SERV 5 EQUIP ELETRICOS 00160 TROCA BATERIA 15 CENTRAL DE SERV 5 EQUIP ELETRICOS 00161 TROCA CORREIA 15 CENTRAL DE SERV 5 EQUIP ELETRICOS 00162 TROCA LAMPADA 15 CENTRAL DE SERV 5 EQUIP ELETRICOS 00163 TROCA FUSIVEL 15 CENTRAL DE SERV 5 EQUIP ELETRICOS 00164 OUTROS 15 CENTRAL DE SERV 6 EQUIP DIVERSOS 00165 EXTINTOR INCEN 15 CENTRAL DE SERV 6 EQUIP DIVERSOS 00166 TROCA PALHETA 15 CENTRAL DE SERV 6 EQUIP DIVERSOS 00167 CHAVEIRO 15 CENTRAL DE SERV 6 EQUIP DIVERSOS 00168 OUTROS 15 CENTRAL DE SERV 7 BORRACHARIA 00169 TROCA PNEU 15 CENTRAL DE SERV 7 BORRACHARIA 00170 CONSERTO PNEU 15 CENTRAL DE SERV 7 BORRACHARIA 00171 CALIBRAGEM NITRO 15 CENTRAL DE SERV 7 BORRACHARIA 00172 TROCA CAMARA 15 CENTRAL DE SERV 7 BORRACHARIA 00173 CONSERTO CAMARA 15 CENTRAL DE SERV 7 BORRACHARIA 00174 TROCA VALVULA 15 CENTRAL DE SERV 7 BORRACHARIA 00175 CONSERTO DE RODA 15 CENTRAL DE SERV 7 BORRACHARIA 00176 OUTROS 15 CENTRAL DE SERV 8 PECAS E SERVICOS 00177 PECAS E SERVICOS 15 CENTRAL DE SERV 9 HOTEL 00178 DIARIA 15 CENTRAL DE SERV 9 HOTEL 00179 OUTROS 15 CENTRAL DE SERV 10 ESTACIONAMENTO 00180 HORA 15 CENTRAL DE SERV 10 ESTACIONAMENTO 00181 DIARIA 15 CENTRAL DE SERV 10 ESTACIONAMENTO 00182 MENSALIDADE 15 CENTRAL DE SERV 10 ESTACIONAMENTO 00183 OUTROS 15 CENTRAL DE SERV 11 ALMOXARIFADO 00184 ALMOXARIFADO 15 CENTRAL DE SERV 12 OUTROS 00185 OUTROS 15 CENTRAL DE SERV 13 TAXI 00186 TAXI 15 CENTRAL DE SERV 14 ASSISTENCIA 00188 ASSISTENCIA 15 CENTRAL DE SERV 15 LUBRIFICANTES 00189 15W40 15 CENTRAL DE SERV 15 LUBRIFICANTES 00190 85W140 15 CENTRAL DE SERV 15 LUBRIFICANTES 00191 AT 15 CENTRAL DE SERV 15 LUBRIFICANTES 00192 FLUIDO FREIO 15 CENTRAL DE SERV 15 LUBRIFICANTES 00193 FTA 15 CENTRAL DE SERV 15 LUBRIFICANTES 00194 H220S 15 CENTRAL DE SERV 15 LUBRIFICANTES 00195 LUBR VL 15 CENTRAL DE SERV 15 LUBRIFICANTES 00196 M40 15 CENTRAL DE SERV 15 LUBRIFICANTES 00197 PAROIL 15 CENTRAL DE SERV 15 LUBRIFICANTES 00198 S68 15 CENTRAL DE SERV 15 LUBRIFICANTES 00199 S150 15 CENTRAL DE SERV 15 LUBRIFICANTES 00200 S460 15 CENTRAL DE SERV 15 LUBRIFICANTES 00201 SAE80 15 CENTRAL DE SERV 15 LUBRIFICANTES 00202 SAE90 15 CENTRAL DE SERV 15 LUBRIFICANTES 00203 SAE90LS 15 CENTRAL DE SERV 15 LUBRIFICANTES 00204 T68 15 CENTRAL DE SERV 15 LUBRIFICANTES 00205 TC50 15 CENTRAL DE SERV 15 LUBRIFICANTES 00206 WBF100 15 CENTRAL DE SERV 15 LUBRIFICANTES 00207 ADITIVO RADIADOR 15 CENTRAL DE SERV 16 GRAXA 00208 GRAXA 15 CENTRAL DE SERV 17 EMULSSAO 00209 EMULSSAO IMPR 15 CENTRAL DE SERV 17 EMULSSAO 00210 EMULSSAO RR 15 CENTRAL DE SERV 18 CAP 00211 CAP 30 45 15 CENTRAL DE SERV 18 CAP 00212 CAP POL 15 CENTRAL DE SERV 18 CAP 00213 CAP OUTROS 15 CENTRAL DE SERV 19 CENTRAL DE SERV 00215 REBOQUE 15 CENTRAL DE SERV 19 CENTRAL DE SERV 00216 SOCORRO MECANICO 15 CENTRAL DE SERV 19 CENTRAL DE SERV 00217 CHAVEIRO 15 CENTRAL DE SERV 19 CENTRAL DE SERV 00218 TRANSPORTE ALTER 15 CENTRAL DE SERV 19 CENTRAL DE SERV 00219 VEICULO RESERVA 15 CENTRAL DE SERV 19 CENTRAL DE SERV 00220 LEVA E TRAZ 15 CENTRAL DE SERV 19 CENTRAL DE SERV 00221 OUTROS SERVICOS 16 CENTRAL DE SERV 1 COMBUSTIVEL 00101 GASOLINA COMUM 16 CENTRAL DE SERV 1 COMBUSTIVEL 00102 GASOLINA ADITIV 16 CENTRAL DE SERV 1 COMBUSTIVEL 00103 GASOLINA PREMIUM 16 CENTRAL DE SERV 1 COMBUSTIVEL 00104 ETANOL COMUM 16 CENTRAL DE SERV 1 COMBUSTIVEL 00105 ETANOL ADITIVADO 16 CENTRAL DE SERV 1 COMBUSTIVEL 00106 DIESEL COMUM 16 CENTRAL DE SERV 1 COMBUSTIVEL 00107 DIESEL ADITIVADO 16 CENTRAL DE SERV 1 COMBUSTIVEL 00108 GAS NATURAL 16 CENTRAL DE SERV 1 COMBUSTIVEL 00109 BIODIESEL 16 CENTRAL DE SERV 1 COMBUSTIVEL 00110 QUEROSENE 16 CENTRAL DE SERV 1 COMBUSTIVEL 00111 METANOL 16 CENTRAL DE SERV 1 COMBUSTIVEL 00112 DIESEL MARITIMO 16 CENTRAL DE SERV 1 COMBUSTIVEL 00113 DIESEL S50 16 CENTRAL DE SERV 1 COMBUSTIVEL 00114 GLP 16 CENTRAL DE SERV 1 COMBUSTIVEL 00115 DIESEL BS 500 16 CENTRAL DE SERV 1 COMBUSTIVEL 00116 DIESEL S 10 16 CENTRAL DE SERV 2 LIMPEZA 00133 LAVAGEM SIMPLES 16 CENTRAL DE SERV 2 LIMPEZA 00134 LAVAGEM COMPLETA 16 CENTRAL DE SERV 2 LIMPEZA 00135 LAVAGEM ESPECIAL 16 CENTRAL DE SERV 2 LIMPEZA 00136 POLIMENTO CERA 16 CENTRAL DE SERV 2 LIMPEZA 00137 POLIMENTO MASSA 16 CENTRAL DE SERV 2 LIMPEZA 00138 CRISTALIZACAO 16 CENTRAL DE SERV 2 LIMPEZA 00139 OUTRO 16 CENTRAL DE SERV 3 ADIT E LUBRIFIC 00140 TROCA OLEO MOTOR 16 CENTRAL DE SERV 3 ADIT E LUBRIFIC 00141 COMPL OLEO MOTOR 16 CENTRAL DE SERV 3 ADIT E LUBRIFIC 00142 ADIT OLEO MOTOR 16 CENTRAL DE SERV 3 ADIT E LUBRIFIC 00143 TR OLEO TRANSMIS 16 CENTRAL DE SERV 3 ADIT E LUBRIFIC 00144 COMPL OLEO TRANS 16 CENTRAL DE SERV 3 ADIT E LUBRIFIC 00145 TR OLEO DIFERENC 16 CENTRAL DE SERV 3 ADIT E LUBRIFIC 00146 COMPL OLEO DIFER 16 CENTRAL DE SERV 3 ADIT E LUBRIFIC 00147 TROCA OLEO DIREC 16 CENTRAL DE SERV 3 ADIT E LUBRIFIC 00148 COMPL OLEO DIREC 16 CENTRAL DE SERV 3 ADIT E LUBRIFIC 00149 TR FLUIDO FREIO 16 CENTRAL DE SERV 3 ADIT E LUBRIFIC 00150 COMP FLUID FREIO 16 CENTRAL DE SERV 3 ADIT E LUBRIFIC 00151 TROCA ADIT RAD 16 CENTRAL DE SERV 3 ADIT E LUBRIFIC 00152 COMPL AD RAD 16 CENTRAL DE SERV 3 ADIT E LUBRIFIC 00153 ADITIVO COMBUST 16 CENTRAL DE SERV 3 ADIT E LUBRIFIC 00154 ENGRAXAMENTO 16 CENTRAL DE SERV 3 ADIT E LUBRIFIC 00155 OUTROS 16 CENTRAL DE SERV 3 ADIT E LUBRIFIC 00214 ARLA A GRANEL 16 CENTRAL DE SERV 3 ADIT E LUBRIFIC 00222 OLEO DOIS TEMPOS 16 CENTRAL DE SERV 3 ADIT E LUBRIFIC 00223 ARLA 20 LTS 16 CENTRAL DE SERV 3 ADIT E LUBRIFIC 00224 ARLA 10 LTS 16 CENTRAL DE SERV 4 FILTROS 00156 TR FILTRO OLEO 16 CENTRAL DE SERV 4 FILTROS 00157 TROCA FILTRO AR 16 CENTRAL DE SERV 4 FILTROS 00158 TR FILTRO COMB 16 CENTRAL DE SERV 4 FILTROS 00159 OUTROS 16 CENTRAL DE SERV 5 EQUIP ELETRICOS 00160 TROCA BATERIA 16 CENTRAL DE SERV 5 EQUIP ELETRICOS 00161 TROCA CORREIA 16 CENTRAL DE SERV 5 EQUIP ELETRICOS 00162 TROCA LAMPADA 16 CENTRAL DE SERV 5 EQUIP ELETRICOS 00163 TROCA FUSIVEL 16 CENTRAL DE SERV 5 EQUIP ELETRICOS 00164 OUTROS 16 CENTRAL DE SERV 6 EQUIP DIVERSOS 00165 EXTINTOR INCEN 16 CENTRAL DE SERV 6 EQUIP DIVERSOS 00166 TROCA PALHETA 16 CENTRAL DE SERV 6 EQUIP DIVERSOS 00167 CHAVEIRO 16 CENTRAL DE SERV 6 EQUIP DIVERSOS 00168 OUTROS 16 CENTRAL DE SERV 7 BORRACHARIA 00169 TROCA PNEU 16 CENTRAL DE SERV 7 BORRACHARIA 00170 CONSERTO PNEU 16 CENTRAL DE SERV 7 BORRACHARIA 00171 CALIBRAGEM NITRO 16 CENTRAL DE SERV 7 BORRACHARIA 00172 TROCA CAMARA 16 CENTRAL DE SERV 7 BORRACHARIA 00173 CONSERTO CAMARA 16 CENTRAL DE SERV 7 BORRACHARIA 00174 TROCA VALVULA 16 CENTRAL DE SERV 7 BORRACHARIA 00175 CONSERTO DE RODA 16 CENTRAL DE SERV 7 BORRACHARIA 00176 OUTROS 16 CENTRAL DE SERV 8 PECAS E SERVICOS 00177 PECAS E SERVICOS 16 CENTRAL DE SERV 9 HOTEL 00178 DIARIA 16 CENTRAL DE SERV 9 HOTEL 00179 OUTROS 16 CENTRAL DE SERV 10 ESTACIONAMENTO 00180 HORA 16 CENTRAL DE SERV 10 ESTACIONAMENTO 00181 DIARIA 16 CENTRAL DE SERV 10 ESTACIONAMENTO 00182 MENSALIDADE 16 CENTRAL DE SERV 10 ESTACIONAMENTO 00183 OUTROS 16 CENTRAL DE SERV 11 ALMOXARIFADO 00184 ALMOXARIFADO 16 CENTRAL DE SERV 12 OUTROS 00185 OUTROS 16 CENTRAL DE SERV 13 TAXI 00186 TAXI 16 CENTRAL DE SERV 14 ASSISTENCIA 00188 ASSISTENCIA 16 CENTRAL DE SERV 15 LUBRIFICANTES 00189 15W40 16 CENTRAL DE SERV 15 LUBRIFICANTES 00190 85W140 16 CENTRAL DE SERV 15 LUBRIFICANTES 00191 AT 16 CENTRAL DE SERV 15 LUBRIFICANTES 00192 FLUIDO FREIO 16 CENTRAL DE SERV 15 LUBRIFICANTES 00193 FTA 16 CENTRAL DE SERV 15 LUBRIFICANTES 00194 H220S 16 CENTRAL DE SERV 15 LUBRIFICANTES 00195 LUBR VL 16 CENTRAL DE SERV 15 LUBRIFICANTES 00196 M40 16 CENTRAL DE SERV 15 LUBRIFICANTES 00197 PAROIL 16 CENTRAL DE SERV 15 LUBRIFICANTES 00198 S68 16 CENTRAL DE SERV 15 LUBRIFICANTES 00199 S150 16 CENTRAL DE SERV 15 LUBRIFICANTES 00200 S460 16 CENTRAL DE SERV 15 LUBRIFICANTES 00201 SAE80 16 CENTRAL DE SERV 15 LUBRIFICANTES 00202 SAE90 16 CENTRAL DE SERV 15 LUBRIFICANTES 00203 SAE90LS 16 CENTRAL DE SERV 15 LUBRIFICANTES 00204 T68 16 CENTRAL DE SERV 15 LUBRIFICANTES 00205 TC50 16 CENTRAL DE SERV 15 LUBRIFICANTES 00206 WBF100 16 CENTRAL DE SERV 15 LUBRIFICANTES 00207 ADITIVO RADIADOR 16 CENTRAL DE SERV 16 GRAXA 00208 GRAXA 16 CENTRAL DE SERV 17 EMULSSAO 00209 EMULSSAO IMPR 16 CENTRAL DE SERV 17 EMULSSAO 00210 EMULSSAO RR 16 CENTRAL DE SERV 18 CAP 00211 CAP 30 45 16 CENTRAL DE SERV 18 CAP 00212 CAP POL 16 CENTRAL DE SERV 18 CAP 00213 CAP OUTROS 16 CENTRAL DE SERV 19 CENTRAL DE SERV 00215 REBOQUE 16 CENTRAL DE SERV 19 CENTRAL DE SERV 00216 SOCORRO MECANICO 16 CENTRAL DE SERV 19 CENTRAL DE SERV 00217 CHAVEIRO 16 CENTRAL DE SERV 19 CENTRAL DE SERV 00218 TRANSPORTE ALTER 16 CENTRAL DE SERV 19 CENTRAL DE SERV 00219 VEICULO RESERVA 16 CENTRAL DE SERV 19 CENTRAL DE SERV 00220 LEVA E TRAZ 16 CENTRAL DE SERV 19 CENTRAL DE SERV 00221 OUTROS SERVICOS"},{"location":"pages/Transacoes/Transacoes/#solicita-funcoes","title":"Solicita Fun\u00e7\u00f5es","text":""},{"location":"pages/Transacoes/Transacoes/#solicitacao-funcoes","title":"Solicita\u00e7\u00e3o Fun\u00e7\u00f5es","text":"<p>As fun\u00e7\u00f5es atualmente disponibilizadas s\u00e3o:</p> <p>Pr\u00e9-Autoriza\u00e7\u00e3o para Pagamento com Cart\u00e3o de Cr\u00e9dito</p> <p>Cancelamento de Pagamento com Cart\u00e3o de Cr\u00e9dito ou D\u00e9bito</p> <p>Resumo de Vendas</p> <p>Consulta de Parcelas (Cr\u00e9dito e D\u00e9bito)</p> <p>Reimpress\u00e3o de Cupom</p> <p>Consulta de Saldo</p> <p>ConsultaSaque/Saque</p> <p>SimulacaoCrediario</p> <pre><code>int DIRETIVA_CALLBACK TransacaoPreAutorizacaoCartaoCredito(char *pNumeroControle)\n</code></pre> <pre><code>int DIRETIVA_CALLBACK TransacaoCancelamentoPagamento(char *pNumeroControle)\n</code></pre> <pre><code>int DIRETIVA_CALLBACK TransacaoCancelamentoPagamentoCompleta(char *pValorTransacao, char *pNumeroCupomVenda,\nchar *pNumeroControle, char *pPermiteAlteracao, char *pReservado)\n</code></pre> <pre><code>int DIRETIVA_CALLBACK TransacaoResumoVendas(char *pNumeroControle)\n</code></pre> <pre><code>int DIRETIVA_CALLBACK TransacaoConsultaParcelas(char *pNumeroControle)\n</code></pre> <pre><code>int DIRETIVA_CALLBACK TransacaoConsultaSaldo(char *pNumeroCupomVenda, char *pNumeroControle)\n</code></pre> <pre><code>int DIRETIVA_CALLBACK TransacaoConsultaSaldoCompleta(char *pNumeroCupomVenda, char *pNumeroControle, char *pTipoCartao, char *pPermiteAlteracao, char *pReservado)\n</code></pre> <pre><code>int DIRETIVA_CALLBACK TransacaoSaque(char *pValorTransacao, char *pNumeroCupom, char *pNumeroControle)\n</code></pre> <pre><code>int DIRETIVA_CALLBACK TransacaoSaqueCompleta(char *pValorTransacao, char *pNumeroCupom, char *pNumeroControle, char *pTipoTransacao, char *pPlanoPagamento, char *pNumeroParcelas, char *pPermiteAlteracao, char *pReservado)\n</code></pre> <pre><code>int DIRETIVA_CALLBACK TransacaoSimulacaoCrediario(char *pValorTransacao, char *pNumeroCupom, char *pNumeroControle)\n</code></pre> <pre><code>int DIRETIVA_CALLBACK TransacaoConsultaPrivateLabel(char *pValorTransacao, char *pNumeroCupom,\nchar *pNumeroControle)\n</code></pre> <pre><code>int DIRETIVA_CALLBACK TransacaoEstatistica(char *pNumeroControle)\n</code></pre> <pre><code>int DIRETIVA_CALLBACK TransacaoTrocoSurpresa(char *pValorTransacao, char *pNumeroCupom, char *pNumeroControle, char *pMensagemTEF, char *pReservado)\n</code></pre> <pre><code>int DIRETIVA_CALLBACK TransacaoConsultaPlanos(char *pValorTransacao, char *pNumeroControle, char *pReservado, char *pPlanos)\n</code></pre> <pre><code>int DIRETIVA_CALLBACK TransacaoConsultaCadastroCPF(char *pValorTransacao, char *pNumeroCupom, char *pNumeroControle, char *pTipoOperacao, char *pDocEmissor, char *pPermiteAlteracao, char *pReservado)\n</code></pre> <pre><code>int DIRETIVA_CALLBACK TransacaoDepositoCompleta(char *pValorTransacao, char *pNumeroCupom, char *pNumeroControle, char *pTipoOperacao, char *pDocEmissor, char *pDocDestinatario, char *pPermiteAlteracao, char *pReservado)\n</code></pre> <pre><code>int DIRETIVA_CALLBACK TransacaoSaqueDomesticoCompleta(char *pValorTransacao, char *pNumeroCupom,\nchar *pNumeroControle, char *pTipoOperacao, char *pCodigoPIN, char *pDocDestinatario, char *pPermiteAlteracao, char *pReservado)\n</code></pre> <p>As solicita\u00e7\u00f5es de transa\u00e7\u00e3o de Pr\u00e9-Autoriza\u00e7\u00e3o de pagamento com cart\u00e3o de cr\u00e9dito, de Cancelamento de Pagamento com cart\u00e3o de cr\u00e9dito ou cart\u00e3o de d\u00e9bito, de Resumo de Vendas, de Consulta de Parcelas com cart\u00e3o de cr\u00e9dito ou cart\u00e3o de d\u00e9bito, Consulta de Saldo, Consulta de Saque ou Saque e Simula\u00e7\u00e3o de Credi\u00e1rio s\u00e3o realizadas atrav\u00e9s da chamada \u00e0s fun\u00e7\u00f5es TransacaoPreAutorizacaoCartaoCredito, TransacaoCancelamentoPagamento ou TransacaoCancelamentoPagamentoCompleta, TransacaoResumoVendas e TransacaoConsultaParcelas , TransacaoConsultaSaldo ou TransacaoConsultaSaldoCompleta , TransacaoSaque, TransacaoSaqueCompleta, TransacaoConsultaCadastroCPF, TransacaoSimulacaoCrediario, TransacaoDeposito, TransacaoSaqueTransferenciaDomestica, Simula\u00e7\u00e3o de Credi\u00e1rio.</p> <p>A fun\u00e7\u00e3o TransacaoCancelamentoPagamentoCompleta permite a realiza\u00e7\u00e3o do cancelamento de uma transa\u00e7\u00e3o de cart\u00e3o, com a diferen\u00e7a de permitir que o PDV informe o valor da transa\u00e7\u00e3o, n\u00famero do cupom, e se o operador pode alterar o NSU da transa\u00e7\u00e3o ou n\u00e3o.</p> <p>Para as transa\u00e7\u00f5es acima que necessitam de confirma\u00e7\u00e3o (Cancelamento de Pagamento, Pr\u00e9-Autoriza\u00e7\u00e3o,  Consulta de Parcelas, Resumo de Vendas, Saque e Consulta Private Label), pode-se utilizar a fun\u00e7\u00e3o  ConfirmaCartaoCredito . Ap\u00f3s a execu\u00e7\u00e3o desta, deve-se chamar a fun\u00e7\u00e3o FinalizaTransacao , assim como \u00e9 feito nas transa\u00e7\u00f5es de cart\u00f5es de d\u00e9bito, cr\u00e9dito e voucher.</p> <p>Os campos est\u00e3o abaixo caracterizados.</p> Campo Tamanho Descri\u00e7\u00e3o ValorTransacao 12N 10 inteiros, 2 decimais NumeroCupom 06N N\u00famero do cupom (fiscal ou n\u00e3o fiscal) NumeroControle 06N NSU (n\u00famero seq\u00fcencial \u00fanico) TipoCartao 01N Indica o tipo de cart\u00e3o que deseja consultar o saldo [ 1 ] Cr\u00e9dito [ 2 ] D\u00e9bito [ 3 ] Private [ 4 ] CPF (1) [ 5 ] CNPJ (\u00b9) TipoTransacao 01N \u2022 [ 0 ] Consulta Saque [ 1 ] Saque TipoOperacao 01N \u2022 [ 1 ] Nacional [ 2 ] Internacional DocEmissor 11A N\u00famero do Documento do Destinat\u00e1rio (CPF ou passaporte) DocDestinatario 11A N\u00famero do Documento do Destinat\u00e1rio (CPF ou passaporte) CodigoPIN 11A N\u00famero do Documento recebido via SMS PlanoPagamento 03N C\u00f3digo do plano de pagamento NumeroParcelas 02N N\u00famero de parcelas PermiteAlteracao 01A [ S ] Permite alterar valores informados (exceto ValorTransacao) [ N ] N\u00e3o permite alterar valores informados Reservado 158A [ Especifica\u00e7\u00e3o \u2013 TransacaoCancelamentoPagamento ]\u2022 [ 1..1 ] Valor\u2022 - [ 0 ] indica cancelamento de pagamento feito com Cart\u00e3o;\u2022 - [ 1 ] indica cancelamento de pagamento feito com Crach\u00e1;\u2022 - [ 2 ] indica cancelamento de pagamento d\u00e9bito Wappa;\u2022 - [ 3 ] indica cancelamento de pagamento feito com cart\u00e3o Qualidade\u2022 - [ 4 ] indica cancelamento de pagamento feito com cart\u00e3o MettaCard\u2022 - [ 5 ] indica cancelamento de pagamento feito com cart\u00e3o Ecopag\u2022 - [ Q ] indica cancelamento de pagamento feito com QR Code\u2022 [ 2..9 ] Data da transa\u00e7\u00e3o a ser cancelada, no formato AAAAMMDD\u2022 [ Especifica\u00e7\u00e3o do Retorno ]\u2022 C\u00f3digo poss\u00edveis :\u2022 [ 01 ] Dados Venda Crach\u00e1\u2022 [ Especifica\u00e7\u00e3o dos Dados Venda Crach\u00e1 ]\u2022 [ 01..09 ] CodigoAutorizacao\u2022 [ 10..59 ] NomeFuncionario\u2022 [ 60..71 ] ValorDesconto\u2022 [ 72..76 ] PercentualDesconto\u2022 [ 01 ] N\u00famero da Rede Autorizadora[ Especifica\u00e7\u00e3o dos Dados \u2013 Opera\u00e7\u00e3o Consulta Saldo ][ 01..01 ]Indicador de consulta com crach\u00e1\u2022 - [0] para consulta norma\u2022 - [1] para consulta com crach\u00e1\u2022 [ 02..15 ] CPF ou CNPJ do cliente (espa\u00e7os a direita se CPF) 02I \u2022 [ 00 ] Transa\u00e7\u00e3o autorizada\u2022 [ 11 ] Transa\u00e7\u00e3o n\u00e3o efetuada Planos 1..999A [ Especifica\u00e7\u00e3o dos Dados \u2013 Consulta Planos ]\u2022 [ 01..008 ] Data Nascimento Portador do Cart\u00e3o(DDMMAAAA)\u2022 [ 09..058 ] NomePortador do Cart\u00e3o\u2022 [ 59..059 ] Fixo P-indicador de Consulta de Planos\u2022 [ 60..999 ] Planos (para cada c\u00f3digo de processamento o bloco abaixo se repetira)\u2022 [ N06 ] CodigoProcessamento\u2022 [ N05 ] DataPrimeiraParcela(AADDD ** )\u2022 [ N01 ] FlagJuros\u2022 [ N01 ] FlagPulaCicloOs campos descritos abaixo podem repetir para demonstrar a quantidade de parcelas do tipo de plano:\u2022 [ N02 ] NumeroDaParcela\u2022 [ N08 ] ValorPrimeiraParcela\u2022 [ N08 ] ValorDemaisParcelas\u2022 [ N05 ] TaxaJuros\u2022 [ N05 ] CETAnual\u2022 [ N01 ] \u201c;\u201d(FinalizadorDeCodigoProcessamento) <p>** quantidade de dias do ano informado at\u00e9 a data atual</p> <p>(\u00b9) documento do cliente utilizado na transa\u00e7\u00e3o de consulta de saldo</p> <p>[ 00 ] indica que n\u00e3o existiram restri\u00e7\u00f5es para a efetiva\u00e7\u00e3o da transa\u00e7\u00e3o.</p> <p>[ 11 ] indica que existiram restri\u00e7\u00f5es para a efetiva\u00e7\u00e3o da transa\u00e7\u00e3o.</p> <pre><code>int DIRETIVA_CALLBACK TransacaoReimpressaoCupom()\n</code></pre> <p>As solicita\u00e7\u00f5es de transa\u00e7\u00e3o de Reimpress\u00e3o de Cupom \u00e9 realizada atrav\u00e9s da chamada \u00e0 fun\u00e7\u00e3o TransacaoReimpressaoCupom.</p> <p>Caso a fun\u00e7\u00e3o seja executada com sucesso, ser\u00e1 disponibilizado no diret\u00f3rio parametrizado (diret\u00f3rio de cupons) um arquivo denominado ULTIMO.PRN contendo o cupom da \u00faltima transa\u00e7\u00e3o de venda efetuada com sucesso.</p> <p>Na resposta da chamada \u00e0 fun\u00e7\u00e3o ser\u00e1 devolvido o , indicando o resultado da transa\u00e7\u00e3o.</p> <p>O campo est\u00e1 abaixo caracterizado.</p> Campo Tamanho Descri\u00e7\u00e3o 02I \u2022 [ 00 ] Transa\u00e7\u00e3o autorizada\u2022 [ 11 ] Transa\u00e7\u00e3o n\u00e3o efetuada <p>[ 00 ] indica que n\u00e3o existiram restri\u00e7\u00f5es para a efetiva\u00e7\u00e3o da transa\u00e7\u00e3o.</p> <p>[ 11 ] indica que existiram restri\u00e7\u00f5es para a efetiva\u00e7\u00e3o da transa\u00e7\u00e3o.</p> <pre><code>int DIRETIVA_CALLBACK TransacaoFechamento(char *pDataMovimento, char *pQuantidadeVendas, char *pValorTotalVendas, char *pQuantidadeVendasCanceladas, char *pValorTotalVendasCanceladas, char *pReservado, char *pNumeroControle, char *pMensagemOperador)\n</code></pre> <p>Esta transa\u00e7\u00e3o deve ser utilizada sempre que uma determinada Administradora exija que o estabelecimento comercial informe dados do movimento di\u00e1rio. Neste caso, deve-se chamar esta fun\u00e7\u00e3o no fechamento do caixa.</p> <p>Na resposta da chamada \u00e0 fun\u00e7\u00e3o ser\u00e1 devolvido o , indicando o resultado da transa\u00e7\u00e3o.</p> <p>Os campos est\u00e3o caracterizados abaixo.</p> Campo Tamanho Descri\u00e7\u00e3o DataMovimento 08N Data de movimento, no formato aammdd QuantidadeVendas 04N Quantidade de vendas ValorTotalVendas 12N 10 inteiros, 2 decimais QuantidadeVendasCanceladas 04N Quantidade de vendas canceladas ValorTotalVendasCanceladas 12N 10 inteiros, 2 decimais Reservado 255A NumeroControle 06N NSU (n\u00famero seq\u00fcencial \u00fanico) MensagemOperador 64A Mensagem de retorno do D-TEF 02I \u2022 [ 00 ] Transa\u00e7\u00e3o autorizada\u2022 [ 11 ] Transa\u00e7\u00e3o n\u00e3o efetuada <p>[ 00 ] indica que n\u00e3o existiram restri\u00e7\u00f5es para a efetiva\u00e7\u00e3o da transa\u00e7\u00e3o.</p> <p>[ 11 ] indica que existiram restri\u00e7\u00f5es para a efetiva\u00e7\u00e3o da transa\u00e7\u00e3o.</p> <p>Procedure InformaDadosMedicamentos(pIndicativoReceita, pRegistroProfissional, pListaMedicamentos: Pchar);</p> <p>A chamada da fun\u00e7\u00e3o InformaDadosMedicamentos dever\u00e1 ser realizada sempre antes das fun\u00e7\u00f5es TransacaoCartaoCredito e TransacaoCartaoVoucher . O D-POS, ao realizar a transa\u00e7\u00e3o de cart\u00e3o de cr\u00e9dito ou voucher, consultar\u00e1 o D-TEF da necessidade de enviar a lista de medicamentos.</p> <p>Esta transa\u00e7\u00e3o deve ser utilizada sempre que uma Administradora exija que o estabelecimento comercial informe dados dos medicamentos. Neste caso, deve-se chamar esta fun\u00e7\u00e3o para repassar estas informa\u00e7\u00f5es ao TEF.</p> <p>Os campos est\u00e3o caracterizados abaixo.</p> Campo Tamanho Descri\u00e7\u00e3o IndicativoReceita 01N \u2022 [ 0 ] sem receita\u2022 [ 1 ] com receita Registro Profissional 12N CRM ou CRO do profissional ListaMedicamentos* este par\u00e2metro \u00e9 limitado em 15 medicamentos* os dados dos medicamentos devem ser informados conforme a   especifica\u00e7\u00e3o ao lado   (de acordo com o tipo e   tamanho especificado) 795P Dados dos medicamentos fornecidos pela automa\u00e7\u00e3o e que devem ser enviados \u00e0 rede administradora (se esta exigir) Especifica\u00e7\u00e3o: <pre><code>int DIRETIVA_CALLBACK TransacaoCancelamentoGarantiaCheque(char *pValorTransacao, char *pNumeroControle)\n</code></pre> <p>A solicita\u00e7\u00e3o de transa\u00e7\u00e3o de Cancelamento de Garantia de Cheque \u00e9 realizada atrav\u00e9s da chamada \u00e0 fun\u00e7\u00e3o TransacaoCancelamentoGarantiaCheque.</p> <p>Caso a transa\u00e7\u00e3o seja autorizada, poder\u00e1 ser disponibilizado no diret\u00f3rio parametrizado para os cupons um arquivo contendo o comprovante da opera\u00e7\u00e3o a ser impresso pela automa\u00e7\u00e3o. O nome desse arquivo tem o formato NNNNNN.PPP, onde NNNNNN \u00e9 o NumeroControle e PPP \u00e9 o n\u00famero do terminal configurado. A libera\u00e7\u00e3o deste arquivo com comprovante da opera\u00e7\u00e3o depende da parametriza\u00e7\u00e3o do D-TEF.</p> <p>Caso o comprovante esteja sendo disponibilizado, ser\u00e1 necess\u00e1rio a confirma\u00e7\u00e3o da impress\u00e3o deste, assim como sua finaliza\u00e7\u00e3o atrav\u00e9s da fun\u00e7\u00e3o FinalizaTransacao.</p> <p>Obs.: esta fun\u00e7\u00e3o \u00e9 necess\u00e1ria apenas para transa\u00e7\u00f5es com a rede TecBan.</p> <p>O campo est\u00e1 abaixo caracterizado.</p> Campo Tamanho Descri\u00e7\u00e3o 02I \u2022 [ 00 ] Transa\u00e7\u00e3o autorizada\u2022 [ 11 ] Transa\u00e7\u00e3o n\u00e3o efetuada <p>[ 00 ] indica que n\u00e3o existiram restri\u00e7\u00f5es para a efetiva\u00e7\u00e3o da transa\u00e7\u00e3o.</p> <p>[ 11 ] indica que existiram restri\u00e7\u00f5es para a efetiva\u00e7\u00e3o da transa\u00e7\u00e3o.</p> <pre><code>int DIRETIVA_CALLBACK ConsultaParametrosTeledata(char *pDadosTeledata, char *pMensagemOperador)\n</code></pre> <p>A solicita\u00e7\u00e3o da fun\u00e7\u00e3o de consulta de par\u00e2metros Teledata \u00e9 realizada atrav\u00e9s da chamada \u00e0 fun\u00e7\u00e3o ConsultaParametrosTeledata.</p> <p>Caso a transa\u00e7\u00e3o seja autorizada, a fun\u00e7\u00e3o devolver\u00e1 no par\u00e2metro pDadosTeledata as informa\u00e7\u00f5es da Teledata destinadas \u00e0 loja.</p> <p>Na resposta da chamada \u00e0 fun\u00e7\u00e3o ser\u00e1 preenchido tamb\u00e9m o campo pMensagemOperador e ser\u00e1 devolvido o , indicando o resultado da transa\u00e7\u00e3o.</p> <p>Os campos est\u00e3o caracterizados abaixo.</p> Campo Tamanho Descri\u00e7\u00e3o DadosTeledata 1024A Dados retornados pela rede Teledata MensagemOperador 64A Mensagem de retorno do DTEF 02I \u2022 [ 00 ] Transa\u00e7\u00e3o autorizada\u2022 [ 11 ] Transa\u00e7\u00e3o n\u00e3o efetuada <p>[ 00 ] indica que n\u00e3o existiram restri\u00e7\u00f5es para a efetiva\u00e7\u00e3o da transa\u00e7\u00e3o.</p> <p>[ 11 ] indica que existiram restri\u00e7\u00f5es para a efetiva\u00e7\u00e3o da transa\u00e7\u00e3o.</p> <p>Obs .: esta fun\u00e7\u00e3o \u00e9 necess\u00e1ria apenas para transa\u00e7\u00f5es com a rede Teledata.</p> <pre><code>int DIRETIVA_CALLBACK TransacaoTrocoSurpresa(char *pValorTransacao, char *pNumeroCupom, char *pNumeroControle, char *pMensagemTEF, char *pReservado)\n</code></pre> <p>A transa\u00e7\u00e3o consiste na venda de um cupom com um n\u00famero para concorrer a um pr\u00eamio. O \u00fanico dado coletado \u00e9 o valor da transa\u00e7\u00e3o. Esta transa\u00e7\u00e3o est\u00e1 dispon\u00edvel apenas para a rede GetNet.</p> <p>Os campos est\u00e3o caracterizados abaixo.</p> Campo Tamanho Descri\u00e7\u00e3o ValorTransacao 12N NumeroCupom 06N N\u00famero do cupom (fiscal ou n\u00e3o fiscal) NumeroControle 06N NSU (n\u00famero seq\u00fcencial \u00fanico) MensagemTEF 64A Mensagem de retorno do DTEF Reservado 255A 02I \u2022 [ 00 ] Transa\u00e7\u00e3o autorizada\u2022 [ 11 ] Transa\u00e7\u00e3o n\u00e3o efetuada <p>[ 00 ] indica que n\u00e3o existiram restri\u00e7\u00f5es para a efetiva\u00e7\u00e3o da transa\u00e7\u00e3o.</p> <p>[ 11 ] indica que existiram restri\u00e7\u00f5es para a efetiva\u00e7\u00e3o da transa\u00e7\u00e3o.</p>"},{"location":"pages/Transacoes/Transacoes/#finalizacao-de-venda-ou-recebimento","title":"Finaliza\u00e7\u00e3o de Venda ou Recebimento","text":"<pre><code>int DIRETIVA_CALLBACK FinalizaTransacao()\n</code></pre> <p>A finaliza\u00e7\u00e3o da opera\u00e7\u00e3o de venda ou de recebimento \u00e9 realizada atrav\u00e9s da chamada \u00e0 fun\u00e7\u00e3o FinalizaTransacao. Na resposta da chamada \u00e0 fun\u00e7\u00e3o ser\u00e1 devolvido o , indicando o resultado da transa\u00e7\u00e3o. O funcionamento desta opera\u00e7\u00e3o depende do modo de desfazimento configurado atrav\u00e9s da fun\u00e7\u00e3o ConfiguraModoDesfazimento. Caso o modo de desfazimento n\u00e3o seja definido, o client assume o modo antigo de opera\u00e7\u00e3o, ou seja, vai realizar o desfazimento das transa\u00e7\u00f5es n\u00e3o confirmadas. Se for definido o modo expl\u00edcito as transa\u00e7\u00f5es ser\u00e3o desfeitas somente se for chamada a fun\u00e7\u00e3o DesfazCartao.</p> <p>O campo est\u00e1 abaixo caracterizado.</p> Campo Tamanho Descri\u00e7\u00e3o 02I \u2022 [ 00 ]  Finaliza\u00e7\u00e3o completada com sucesso\u2022 [ 11 ] Finaliza\u00e7\u00e3o N\u00c3O completada com sucesso <p>[ 00 ] indica que n\u00e3o existiram restri\u00e7\u00f5es para a efetiva\u00e7\u00e3o da transa\u00e7\u00e3o.</p> <p>[ 11 ] indica que n\u00e3o existiram restri\u00e7\u00f5es para a efetiva\u00e7\u00e3o da transa\u00e7\u00e3o,, por\u00e9m o processo de confirma\u00e7\u00e3o da transa\u00e7\u00e3o junto \u00e0 institui\u00e7\u00e3o financeira apresentou falha. Neste caso, a transa\u00e7\u00e3o ficar\u00e1 pendente e dever\u00e1 ser tratada por meio da aplica\u00e7\u00e3o de procedimentos administrativos.</p>"}]}